{"ast":null,"code":"var _jsxFileName = \"/Users/gustsantos/Desktop/initucastt/frontend/src/pages/JourneysPage.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/pages/JourneysPage.jsx\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst lsPrefixGuess = k => k.startsWith('flow_') || k.startsWith('journey_');\nfunction readLocalFlows() {\n  const items = [];\n  try {\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (!key) continue;\n      if (!lsPrefixGuess(key)) continue;\n      try {\n        const val = JSON.parse(localStorage.getItem(key));\n        if (val && Array.isArray(val.nodes) && Array.isArray(val.edges)) {\n          items.push({\n            id: val.id || key,\n            name: val.name || 'Sem nome',\n            updatedAt: val.updatedAt || null,\n            nodes: val.nodes,\n            edges: val.edges,\n            _source: 'ls'\n          });\n        }\n      } catch {}\n    }\n  } catch {}\n  return items;\n}\nasync function fetchBackendList() {\n  const res = await fetch('/api/journeys');\n  if (!res.ok) throw new Error('backend off');\n  const arr = await res.json();\n  // normaliza\n  return Array.isArray(arr) ? arr.map(f => ({\n    id: f.id,\n    name: f.name || 'Sem nome',\n    updatedAt: f.updatedAt || null,\n    nodes: f.nodes || [],\n    edges: f.edges || [],\n    _source: 'api'\n  })) : [];\n}\nexport default function JourneysPage() {\n  _s();\n  const navigate = useNavigate();\n  const [flows, setFlows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingId, setEditingId] = useState(null);\n  const [draftName, setDraftName] = useState('');\n\n  // load list (backend → fallback LS)\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      setLoading(true);\n      try {\n        const api = await fetchBackendList();\n        if (!cancelled) setFlows(api);\n      } catch {\n        const ls = readLocalFlows();\n        if (!cancelled) setFlows(ls);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n  const sorted = useMemo(() => {\n    return [...flows].sort((a, b) => {\n      const ta = a.updatedAt ? new Date(a.updatedAt).getTime() : 0;\n      const tb = b.updatedAt ? new Date(b.updatedAt).getTime() : 0;\n      return tb - ta;\n    });\n  }, [flows]);\n  const fmtDate = iso => {\n    if (!iso) return '—';\n    try {\n      return new Date(iso).toLocaleString();\n    } catch {\n      return iso;\n    }\n  };\n  const refreshFromBackendOrLs = async () => {\n    try {\n      const api = await fetchBackendList();\n      setFlows(api);\n    } catch {\n      setFlows(readLocalFlows());\n    }\n  };\n\n  // actions\n  const openFlow = id => navigate(`/journeys/builder?id=${id}`);\n  const exportFlow = f => {\n    const blob = new Blob([JSON.stringify({\n      id: f.id,\n      name: f.name,\n      nodes: f.nodes,\n      edges: f.edges\n    }, null, 2)], {\n      type: 'application/json'\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = `${(f.name || 'flow').toLowerCase().replace(/\\s+/g, '_')}.json`;\n    a.click();\n    URL.revokeObjectURL(a.href);\n  };\n  const duplicateFlow = async f => {\n    const newId = 'flow_' + Date.now();\n    const payload = {\n      id: newId,\n      name: `${f.name || 'Flow'} (cópia)`,\n      nodes: f.nodes || [],\n      edges: f.edges || [],\n      updatedAt: new Date().toISOString()\n    };\n    try {\n      const res = await fetch('/api/journeys', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error();\n    } catch {\n      localStorage.setItem(newId, JSON.stringify(payload));\n    }\n    await refreshFromBackendOrLs();\n  };\n  const deleteFlow = async f => {\n    const go = window.confirm(`Apagar \"${f.name}\"? Esta ação não pode ser desfeita.`);\n    if (!go) return;\n    try {\n      const res = await fetch(`/api/journeys/${encodeURIComponent(f.id)}`, {\n        method: 'DELETE'\n      });\n      if (!res.ok) throw new Error();\n    } catch {\n      // local\n      try {\n        localStorage.removeItem(f.id);\n      } catch {}\n    }\n    setFlows(arr => arr.filter(x => x.id !== f.id));\n  };\n  const startInlineRename = f => {\n    setEditingId(f.id);\n    setDraftName(f.name || '');\n  };\n  const cancelInlineRename = () => {\n    setEditingId(null);\n    setDraftName('');\n  };\n  const confirmInlineRename = async f => {\n    const name = draftName.trim() || 'Sem nome';\n    const updatedAt = new Date().toISOString();\n\n    // otimista\n    setFlows(arr => arr.map(x => x.id === f.id ? {\n      ...x,\n      name,\n      updatedAt\n    } : x));\n    setEditingId(null);\n    setDraftName('');\n\n    // persistência\n    try {\n      const res = await fetch(`/api/journeys/${encodeURIComponent(f.id)}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          ...f,\n          name,\n          updatedAt\n        })\n      });\n      if (!res.ok) throw new Error();\n    } catch {\n      // local\n      try {\n        const raw = localStorage.getItem(f.id);\n        if (raw) {\n          const obj = JSON.parse(raw);\n          obj.name = name;\n          obj.updatedAt = updatedAt;\n          localStorage.setItem(f.id, JSON.stringify(obj));\n        }\n      } catch {}\n    }\n  };\n  const handleKeyRename = (e, f) => {\n    if (e.key === 'Enter') confirmInlineRename(f);\n    if (e.key === 'Escape') cancelInlineRename();\n  };\n  const importFlow = () => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'application/json';\n    input.onchange = ev => {\n      var _ev$target$files;\n      const file = (_ev$target$files = ev.target.files) === null || _ev$target$files === void 0 ? void 0 : _ev$target$files[0];\n      if (!file) return;\n      const r = new FileReader();\n      r.onload = async () => {\n        try {\n          const data = JSON.parse(r.result);\n          if (!Array.isArray(data.nodes) || !Array.isArray(data.edges)) {\n            alert('JSON inválido: esperado { nodes, edges }.');\n            return;\n          }\n          const newId = 'flow_' + Date.now();\n          const payload = {\n            id: newId,\n            name: data.name || 'Flow importado',\n            nodes: data.nodes,\n            edges: data.edges,\n            updatedAt: new Date().toISOString()\n          };\n          try {\n            const res = await fetch('/api/journeys', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(payload)\n            });\n            if (!res.ok) throw new Error();\n          } catch {\n            localStorage.setItem(newId, JSON.stringify(payload));\n          }\n          await refreshFromBackendOrLs();\n        } catch {\n          alert('Falha ao ler o arquivo.');\n        }\n      };\n      r.readAsText(file);\n    };\n    input.click();\n  };\n  const newFlow = () => navigate('/journeys/builder?new=1');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 24\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: 0\n        },\n        children: \"Journeys\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: importFlow,\n          children: \"Importar Flow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn primary\",\n          onClick: newFlow,\n          children: \"+ Novo Flow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#64748b'\n      },\n      children: \"Carregando\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 9\n    }, this) : sorted.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#64748b'\n      },\n      children: [\"Nenhum flow ainda. Clique em \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"+ Novo Flow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 72\n      }, this), \" para come\\xE7ar.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #e5e7eb',\n        borderRadius: 12,\n        overflow: 'hidden'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: '1fr 220px 360px',\n          padding: '12px 16px',\n          background: '#f8fafc',\n          borderBottom: '1px solid #e5e7eb',\n          fontWeight: 600\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Nome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Atualizado em\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"A\\xE7\\xF5es\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), sorted.map(f => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: '1fr 220px 360px',\n          padding: '12px 16px',\n          borderBottom: '1px solid #f1f5f9',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: editingId === f.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 8,\n              alignItems: 'center',\n              maxWidth: 520\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              autoFocus: true,\n              value: draftName,\n              onChange: e => setDraftName(e.target.value),\n              onKeyDown: e => handleKeyRename(e, f),\n              style: {\n                flex: 1,\n                border: '1px solid #cbd5e1',\n                borderRadius: 8,\n                padding: '8px 10px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn\",\n              title: \"Confirmar\",\n              onClick: () => confirmInlineRename(f),\n              children: \"\\u2714\\uFE0E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn secondary\",\n              title: \"Cancelar\",\n              onClick: cancelInlineRename,\n              children: \"\\u2715\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => startInlineRename(f),\n            title: \"Clique para renomear\",\n            style: {\n              background: 'transparent',\n              border: 0,\n              padding: 0,\n              textAlign: 'left',\n              cursor: 'text',\n              color: '#0f172a',\n              fontWeight: 600\n            },\n            children: f.name || 'Sem nome'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#475569'\n          },\n          children: fmtDate(f.updatedAt)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn primary\",\n            onClick: () => openFlow(f.id),\n            children: \"Abrir\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: () => exportFlow(f),\n            children: \"Exportar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: () => duplicateFlow(f),\n            children: \"Duplicar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn danger\",\n            onClick: () => deleteFlow(f),\n            children: \"Apagar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-btn small\",\n            onClick: async () => {\n              const raw = window.prompt('Cole um JSON de audiência (opcional) ou deixe em branco para usar a amostra do nó Audiência.\\nEx: [{\"phone\":\"+551199...\",\"nome\":\"Ana\"}]');\n              let payload = {};\n              try {\n                if (raw && raw.trim()) payload.audience = JSON.parse(raw);\n              } catch {\n                alert('JSON inválido');\n                return;\n              }\n              const res = await fetch(`/api/journeys/${row.id}/launch`, {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(payload)\n              });\n              const j = await res.json();\n              if (!res.ok) return alert('Erro: ' + ((j === null || j === void 0 ? void 0 : j.error) || ''));\n              alert('Execução criada!\\nRun ID: ' + j.runId + '\\nVeja /api/runs no backend ou exporte o CSV.');\n            },\n            children: \"Disparar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 15\n        }, this)]\n      }, f.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 5\n  }, this);\n}\n_s(JourneysPage, \"CJJeeWFGgGW7eA8Mf1bXtHuVSHA=\", false, function () {\n  return [useNavigate];\n});\n_c = JourneysPage;\nvar _c;\n$RefreshReg$(_c, \"JourneysPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useNavigate","jsxDEV","_jsxDEV","lsPrefixGuess","k","startsWith","readLocalFlows","items","i","localStorage","length","key","val","JSON","parse","getItem","Array","isArray","nodes","edges","push","id","name","updatedAt","_source","fetchBackendList","res","fetch","ok","Error","arr","json","map","f","JourneysPage","_s","navigate","flows","setFlows","loading","setLoading","editingId","setEditingId","draftName","setDraftName","cancelled","api","ls","sorted","sort","a","b","ta","Date","getTime","tb","fmtDate","iso","toLocaleString","refreshFromBackendOrLs","openFlow","exportFlow","blob","Blob","stringify","type","document","createElement","href","URL","createObjectURL","download","toLowerCase","replace","click","revokeObjectURL","duplicateFlow","newId","now","payload","toISOString","method","headers","body","setItem","deleteFlow","go","window","confirm","encodeURIComponent","removeItem","filter","x","startInlineRename","cancelInlineRename","confirmInlineRename","trim","raw","obj","handleKeyRename","e","importFlow","input","accept","onchange","ev","_ev$target$files","file","target","files","r","FileReader","onload","data","result","alert","readAsText","newFlow","style","padding","children","display","justifyContent","alignItems","marginBottom","margin","fileName","_jsxFileName","lineNumber","columnNumber","gap","className","onClick","color","border","borderRadius","overflow","gridTemplateColumns","background","borderBottom","fontWeight","maxWidth","autoFocus","value","onChange","onKeyDown","flex","title","textAlign","cursor","prompt","audience","row","j","error","runId","_c","$RefreshReg$"],"sources":["/Users/gustsantos/Desktop/initucastt/frontend/src/pages/JourneysPage.jsx"],"sourcesContent":["// frontend/src/pages/JourneysPage.jsx\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst lsPrefixGuess = (k) => k.startsWith('flow_') || k.startsWith('journey_');\n\nfunction readLocalFlows() {\n  const items = [];\n  try {\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (!key) continue;\n      if (!lsPrefixGuess(key)) continue;\n      try {\n        const val = JSON.parse(localStorage.getItem(key));\n        if (val && Array.isArray(val.nodes) && Array.isArray(val.edges)) {\n          items.push({\n            id: val.id || key,\n            name: val.name || 'Sem nome',\n            updatedAt: val.updatedAt || null,\n            nodes: val.nodes,\n            edges: val.edges,\n            _source: 'ls',\n          });\n        }\n      } catch {}\n    }\n  } catch {}\n  return items;\n}\n\nasync function fetchBackendList() {\n  const res = await fetch('/api/journeys');\n  if (!res.ok) throw new Error('backend off');\n  const arr = await res.json();\n  // normaliza\n  return Array.isArray(arr)\n    ? arr.map((f) => ({\n        id: f.id,\n        name: f.name || 'Sem nome',\n        updatedAt: f.updatedAt || null,\n        nodes: f.nodes || [],\n        edges: f.edges || [],\n        _source: 'api',\n      }))\n    : [];\n}\n\nexport default function JourneysPage() {\n  const navigate = useNavigate();\n  const [flows, setFlows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingId, setEditingId] = useState(null);\n  const [draftName, setDraftName] = useState('');\n\n  // load list (backend → fallback LS)\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      setLoading(true);\n      try {\n        const api = await fetchBackendList();\n        if (!cancelled) setFlows(api);\n      } catch {\n        const ls = readLocalFlows();\n        if (!cancelled) setFlows(ls);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    })();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  const sorted = useMemo(() => {\n    return [...flows].sort((a, b) => {\n      const ta = a.updatedAt ? new Date(a.updatedAt).getTime() : 0;\n      const tb = b.updatedAt ? new Date(b.updatedAt).getTime() : 0;\n      return tb - ta;\n    });\n  }, [flows]);\n\n  const fmtDate = (iso) => {\n    if (!iso) return '—';\n    try {\n      return new Date(iso).toLocaleString();\n    } catch {\n      return iso;\n    }\n  };\n\n  const refreshFromBackendOrLs = async () => {\n    try {\n      const api = await fetchBackendList();\n      setFlows(api);\n    } catch {\n      setFlows(readLocalFlows());\n    }\n  };\n\n  // actions\n  const openFlow = (id) => navigate(`/journeys/builder?id=${id}`);\n\n  const exportFlow = (f) => {\n    const blob = new Blob([JSON.stringify({ id: f.id, name: f.name, nodes: f.nodes, edges: f.edges }, null, 2)], {\n      type: 'application/json',\n    });\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.download = `${(f.name || 'flow').toLowerCase().replace(/\\s+/g, '_')}.json`;\n    a.click();\n    URL.revokeObjectURL(a.href);\n  };\n\n  const duplicateFlow = async (f) => {\n    const newId = 'flow_' + Date.now();\n    const payload = {\n      id: newId,\n      name: `${f.name || 'Flow'} (cópia)`,\n      nodes: f.nodes || [],\n      edges: f.edges || [],\n      updatedAt: new Date().toISOString(),\n    };\n\n    try {\n      const res = await fetch('/api/journeys', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      if (!res.ok) throw new Error();\n    } catch {\n      localStorage.setItem(newId, JSON.stringify(payload));\n    }\n    await refreshFromBackendOrLs();\n  };\n\n  const deleteFlow = async (f) => {\n    const go = window.confirm(`Apagar \"${f.name}\"? Esta ação não pode ser desfeita.`);\n    if (!go) return;\n    try {\n      const res = await fetch(`/api/journeys/${encodeURIComponent(f.id)}`, { method: 'DELETE' });\n      if (!res.ok) throw new Error();\n    } catch {\n      // local\n      try {\n        localStorage.removeItem(f.id);\n      } catch {}\n    }\n    setFlows((arr) => arr.filter((x) => x.id !== f.id));\n  };\n\n  const startInlineRename = (f) => {\n    setEditingId(f.id);\n    setDraftName(f.name || '');\n  };\n\n  const cancelInlineRename = () => {\n    setEditingId(null);\n    setDraftName('');\n  };\n\n  const confirmInlineRename = async (f) => {\n    const name = draftName.trim() || 'Sem nome';\n    const updatedAt = new Date().toISOString();\n\n    // otimista\n    setFlows((arr) => arr.map((x) => (x.id === f.id ? { ...x, name, updatedAt } : x)));\n    setEditingId(null);\n    setDraftName('');\n\n    // persistência\n    try {\n      const res = await fetch(`/api/journeys/${encodeURIComponent(f.id)}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ ...f, name, updatedAt }),\n      });\n      if (!res.ok) throw new Error();\n    } catch {\n      // local\n      try {\n        const raw = localStorage.getItem(f.id);\n        if (raw) {\n          const obj = JSON.parse(raw);\n          obj.name = name;\n          obj.updatedAt = updatedAt;\n          localStorage.setItem(f.id, JSON.stringify(obj));\n        }\n      } catch {}\n    }\n  };\n\n  const handleKeyRename = (e, f) => {\n    if (e.key === 'Enter') confirmInlineRename(f);\n    if (e.key === 'Escape') cancelInlineRename();\n  };\n\n  const importFlow = () => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'application/json';\n    input.onchange = (ev) => {\n      const file = ev.target.files?.[0];\n      if (!file) return;\n      const r = new FileReader();\n      r.onload = async () => {\n        try {\n          const data = JSON.parse(r.result);\n          if (!Array.isArray(data.nodes) || !Array.isArray(data.edges)) {\n            alert('JSON inválido: esperado { nodes, edges }.');\n            return;\n          }\n          const newId = 'flow_' + Date.now();\n          const payload = {\n            id: newId,\n            name: data.name || 'Flow importado',\n            nodes: data.nodes,\n            edges: data.edges,\n            updatedAt: new Date().toISOString(),\n          };\n          try {\n            const res = await fetch('/api/journeys', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(payload),\n            });\n            if (!res.ok) throw new Error();\n          } catch {\n            localStorage.setItem(newId, JSON.stringify(payload));\n          }\n          await refreshFromBackendOrLs();\n        } catch {\n          alert('Falha ao ler o arquivo.');\n        }\n      };\n      r.readAsText(file);\n    };\n    input.click();\n  };\n\n  const newFlow = () => navigate('/journeys/builder?new=1');\n\n  return (\n    <div style={{ padding: 24 }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 16 }}>\n        <h2 style={{ margin: 0 }}>Journeys</h2>\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button className=\"btn\" onClick={importFlow}>Importar Flow</button>\n          <button className=\"btn primary\" onClick={newFlow}>+ Novo Flow</button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div style={{ color: '#64748b' }}>Carregando…</div>\n      ) : sorted.length === 0 ? (\n        <div style={{ color: '#64748b' }}>Nenhum flow ainda. Clique em <b>+ Novo Flow</b> para começar.</div>\n      ) : (\n        <div style={{ border: '1px solid #e5e7eb', borderRadius: 12, overflow: 'hidden' }}>\n          <div\n            style={{\n              display: 'grid',\n              gridTemplateColumns: '1fr 220px 360px',\n              padding: '12px 16px',\n              background: '#f8fafc',\n              borderBottom: '1px solid #e5e7eb',\n              fontWeight: 600,\n            }}\n          >\n            <div>Nome</div>\n            <div>Atualizado em</div>\n            <div>Ações</div>\n          </div>\n\n          {sorted.map((f) => (\n            <div\n              key={f.id}\n              style={{\n                display: 'grid',\n                gridTemplateColumns: '1fr 220px 360px',\n                padding: '12px 16px',\n                borderBottom: '1px solid #f1f5f9',\n                alignItems: 'center',\n              }}\n            >\n              <div>\n                {editingId === f.id ? (\n                  <div style={{ display: 'flex', gap: 8, alignItems: 'center', maxWidth: 520 }}>\n                    <input\n                      autoFocus\n                      value={draftName}\n                      onChange={(e) => setDraftName(e.target.value)}\n                      onKeyDown={(e) => handleKeyRename(e, f)}\n                      style={{ flex: 1, border: '1px solid #cbd5e1', borderRadius: 8, padding: '8px 10px' }}\n                    />\n                    <button className=\"btn\" title=\"Confirmar\" onClick={() => confirmInlineRename(f)}>✔︎</button>\n                    <button className=\"btn secondary\" title=\"Cancelar\" onClick={cancelInlineRename}>✕</button>\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => startInlineRename(f)}\n                    title=\"Clique para renomear\"\n                    style={{\n                      background: 'transparent',\n                      border: 0,\n                      padding: 0,\n                      textAlign: 'left',\n                      cursor: 'text',\n                      color: '#0f172a',\n                      fontWeight: 600,\n                    }}\n                  >\n                    {f.name || 'Sem nome'}\n                  </button>\n                )}\n              </div>\n\n              <div style={{ color: '#475569' }}>{fmtDate(f.updatedAt)}</div>\n\n              <div style={{ display: 'flex', gap: 8 }}>\n                <button className=\"btn primary\" onClick={() => openFlow(f.id)}>Abrir</button>\n                <button className=\"btn\" onClick={() => exportFlow(f)}>Exportar</button>\n                {/* Renomear removido — clique no nome para renomear */}\n                <button className=\"btn\" onClick={() => duplicateFlow(f)}>Duplicar</button>\n                <button className=\"btn danger\" onClick={() => deleteFlow(f)}>Apagar</button>\n                <button className=\"primary-btn small\"\n  onClick={async () => {\n    const raw = window.prompt(\n      'Cole um JSON de audiência (opcional) ou deixe em branco para usar a amostra do nó Audiência.\\nEx: [{\"phone\":\"+551199...\",\"nome\":\"Ana\"}]'\n    );\n    let payload = {};\n    try { if (raw && raw.trim()) payload.audience = JSON.parse(raw); } catch { alert('JSON inválido'); return; }\n    const res = await fetch(`/api/journeys/${row.id}/launch`, {\n      method: 'POST', headers: { 'Content-Type':'application/json' }, body: JSON.stringify(payload)\n    });\n    const j = await res.json();\n    if (!res.ok) return alert('Erro: ' + (j?.error || ''));\n    alert('Execução criada!\\nRun ID: ' + j.runId + '\\nVeja /api/runs no backend ou exporte o CSV.');\n  }}\n>Disparar</button>\n\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}