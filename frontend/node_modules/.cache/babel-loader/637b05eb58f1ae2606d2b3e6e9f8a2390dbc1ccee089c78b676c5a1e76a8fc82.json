{"ast":null,"code":"var _jsxFileName = \"/Users/gustsantos/Desktop/initucastt_old/frontend/src/pages/TemplatePage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/TemplatePage.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/TemplatePage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TemplatePage() {\n  _s();\n  var _compliance$ai_summar2;\n  // --------- Estado principal (form) ---------\n  const [formData, setFormData] = useState({\n    friendlyName: '',\n    language: 'pt_BR',\n    contentType: 'twilio/text',\n    // 'twilio/text' | 'twilio/media' | 'twilio/template'\n    body: '',\n    variables: [],\n    submitForWhatsApp: true,\n    category: 'UTILITY' // UTILITY | MARKETING | AUTH/TRANSACTIONAL\n  });\n\n  // --------- Contexto para IA (briefing) ---------\n  const [audienceOptions, setAudienceOptions] = useState({\n    region: 'br',\n    tone: '',\n    offerType: '',\n    psychologicalTrigger: '',\n    ageRange: '',\n    marketNiche: '',\n    customMarketNiche: ''\n  });\n\n  // --------- Preview & Compliance ---------\n  const [preview, setPreview] = useState('');\n  const [isSuggesting, setIsSuggesting] = useState(false);\n  const [isCreating, setIsCreating] = useState(false);\n  const [compliance, setCompliance] = useState(null);\n  const [validating, setValidating] = useState(false);\n\n  // --------- Opções auxiliares ---------\n  const psychologicalTriggers = ['escassez', 'urgência', 'prova social', 'autoridade', 'reciprocidade'];\n  const ageRanges = ['18 a 24 anos', '25 a 40 anos', '41 a 60 anos', '60+'];\n  const offerTypes = ['desconto exclusivo', 'frete grátis', 'combo especial', 'brinde na compra', 'cobrança'];\n  const marketNiches = ['cosméticos naturais', 'fitness', 'educação online', 'moda sustentável', 'tecnologia', 'outro'];\n\n  // --------- Util: extrair placeholders {{1}}, {{2}}... ---------\n  const extractVariables = bodyText => {\n    const regex = /\\{\\{(\\d+)\\}\\}/g;\n    const nums = new Set();\n    let m;\n    while ((m = regex.exec(String(bodyText))) !== null) nums.add(Number(m[1]));\n    const max = nums.size ? Math.max(...nums) : 0;\n    return Array.from({\n      length: max\n    }, (_, i) => formData.variables[i] || '');\n  };\n\n  // Atualiza vetor de variáveis ao editar o body\n  useEffect(() => {\n    setFormData(prev => ({\n      ...prev,\n      variables: extractVariables(prev.body)\n    }));\n  }, [formData.body]); // eslint-disable-line\n\n  // Gera preview substituindo {{n}} pelos valores digitados\n  useEffect(() => {\n    let msg = String(formData.body || '');\n    formData.variables.forEach((val, i) => {\n      const re = new RegExp(`\\\\{\\\\{${i + 1}\\\\}\\\\}`, 'g');\n      msg = msg.replace(re, val || `{{${i + 1}}}`);\n    });\n    setPreview(msg);\n  }, [formData.body, formData.variables]);\n\n  // --------- Handlers básicos ---------\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setCompliance(null); // qualquer alteração invalida análise anterior\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const handleVariableChange = (index, value) => {\n    const arr = [...formData.variables];\n    arr[index] = value;\n    setCompliance(null);\n    setFormData(prev => ({\n      ...prev,\n      variables: arr\n    }));\n  };\n  const handleAudienceChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAudienceOptions(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // region -> language\n    if (name === 'region') {\n      if (value === 'br') {\n        setFormData(prev => ({\n          ...prev,\n          language: 'pt_BR'\n        }));\n      } else if (['co', 'mx', 'pe', 'ar', 'cl'].includes(value)) {\n        setFormData(prev => ({\n          ...prev,\n          language: 'es_MX'\n        }));\n      } else {\n        setFormData(prev => ({\n          ...prev,\n          language: 'en_US'\n        }));\n      }\n    }\n  };\n\n  // --------- IA: sugerir copy (usa seed + briefing + categoria) ---------\n  const handleSuggestWithAI = async () => {\n    try {\n      setIsSuggesting(true);\n      setCompliance(null);\n      const payload = {\n        // texto que o usuário já começou a escrever\n        seedText: formData.body || '',\n        // briefing\n        region: audienceOptions.region || '',\n        tone: audienceOptions.tone || '',\n        offerType: audienceOptions.offerType || '',\n        psychologicalTrigger: audienceOptions.psychologicalTrigger || '',\n        ageRange: audienceOptions.ageRange || '',\n        marketNiche: audienceOptions.marketNiche === 'outro' ? audienceOptions.customMarketNiche || 'outro' : audienceOptions.marketNiche || '',\n        // categoria do template (p/ IA respeitar contexto de Meta)\n        category: (formData.category || 'UTILITY').toUpperCase(),\n        // linguagem alvo ajuda a IA com PT/ES/EN\n        language: formData.language || 'pt_BR'\n      };\n      const {\n        data\n      } = await axios.post('/api/ai/suggest-copy', payload);\n      if (!(data !== null && data !== void 0 && data.suggestion)) {\n        alert('A IA não retornou sugestão. Tente novamente.');\n        return;\n      }\n      setFormData(prev => ({\n        ...prev,\n        body: data.suggestion\n      }));\n    } catch (e) {\n      console.error(e);\n      alert('Erro ao gerar sugestão com IA.');\n    } finally {\n      setIsSuggesting(false);\n    }\n  };\n\n  // --------- Compliance: valida SOMENTE (category + preview) ---------\n  const validateCompliance = async () => {\n    try {\n      setValidating(true);\n      setCompliance(null);\n      const payload = {\n        category: (formData.category || 'UTILITY').toUpperCase(),\n        body: preview || ''\n      };\n      const {\n        data\n      } = await axios.post('/api/template-guard/validate-hybrid', payload);\n      setCompliance(data);\n    } catch (e) {\n      console.error(e);\n      alert('Falha ao validar compliance.');\n    } finally {\n      setValidating(false);\n    }\n  };\n  const applyRewriteFromCompliance = () => {\n    var _compliance$ai_summar;\n    const rewritten = compliance === null || compliance === void 0 ? void 0 : (_compliance$ai_summar = compliance.ai_summary) === null || _compliance$ai_summar === void 0 ? void 0 : _compliance$ai_summar.rewritten;\n    if (!rewritten) return;\n    setFormData(prev => ({\n      ...prev,\n      body: rewritten\n    }));\n    // preview atualizará via useEffect\n  };\n\n  // --------- Criar Template ---------\n  const handleSubmit = async () => {\n    try {\n      if (!formData.friendlyName.trim()) {\n        alert('Defina um Friendly Name.');\n        return;\n      }\n      if (!formData.body.trim()) {\n        alert('Escreva o Body da mensagem.');\n        return;\n      }\n\n      // map {{n}} -> valores default (apenas rótulos)\n      const variableMap = {};\n      formData.variables.forEach((val, idx) => {\n        variableMap[(idx + 1).toString()] = val || `{{${idx + 1}}}`;\n      });\n      const payload = {\n        name: formData.friendlyName,\n        language: formData.language,\n        // ex.: 'pt_BR'\n        variables: variableMap,\n        types: {\n          [formData.contentType]: {\n            body: formData.body\n          }\n        },\n        autoSubmit: Boolean(formData.submitForWhatsApp),\n        category: (formData.category || 'UTILITY').toUpperCase()\n      };\n      setIsCreating(true);\n      await axios.post('/api/templates/create', payload);\n      alert('Template criado com sucesso!');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      alert('Erro ao criar template: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message));\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  // --------- UI ---------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Criar Template (com IA + Compliance)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Friendly Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"friendlyName\",\n        value: formData.friendlyName,\n        onChange: handleChange,\n        placeholder: \"ex.: lembrete_pagamento_ago24\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Categoria\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"category\",\n            value: formData.category,\n            onChange: handleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"UTILITY\",\n              children: \"Utility\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"MARKETING\",\n              children: \"Marketing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"AUTH\",\n              children: \"Auth/Transactional\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Idioma\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"language\",\n            value: formData.language,\n            onChange: handleChange,\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Content Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"contentType\",\n            value: formData.contentType,\n            onChange: handleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"twilio/text\",\n              children: \"twilio/text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"twilio/media\",\n              children: \"twilio/media\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"twilio/template\",\n              children: \"twilio/template\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            alignSelf: 'end'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              gap: 8,\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"submitForWhatsApp\",\n              checked: formData.submitForWhatsApp,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this), \"Submeter para aprova\\xE7\\xE3o no WhatsApp\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Body\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"body\",\n        rows: 6,\n        value: formData.body,\n        onChange: handleChange,\n        placeholder: \"Use {{1}}, {{2}}... para vari\\xE1veis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), formData.variables.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vars-box\",\n        children: formData.variables.map((val, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: `Valor da variável {{${i + 1}}}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: val,\n            onChange: e => handleVariableChange(i, e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Briefing para IA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Regi\\xE3o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"region\",\n            value: audienceOptions.region,\n            onChange: handleAudienceChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"br\",\n              children: \"Brasil (pt_BR)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"co\",\n              children: \"Col\\xF4mbia (es_MX)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"mx\",\n              children: \"M\\xE9xico (es_MX)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pe\",\n              children: \"Peru (es_MX)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ar\",\n              children: \"Argentina (es_MX)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cl\",\n              children: \"Chile (es_MX)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"us\",\n              children: \"Estados Unidos (en_US)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"intl\",\n              children: \"Outro / Internacional (en_US)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Tom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"tone\",\n            value: audienceOptions.tone,\n            onChange: handleAudienceChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"--\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"informal\",\n              children: \"Informal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"urgente\",\n              children: \"Urgente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"profissional\",\n              children: \"Profissional\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"amistoso\",\n              children: \"Amistoso\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"s\\xE9rio\",\n              children: \"S\\xE9rio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Tipo de Oferta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"offerType\",\n            value: audienceOptions.offerType,\n            onChange: handleAudienceChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"--\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), offerTypes.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: opt,\n              children: opt\n            }, opt, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Gatilho Psicol\\xF3gico\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"psychologicalTrigger\",\n            value: audienceOptions.psychologicalTrigger,\n            onChange: handleAudienceChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"--\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), psychologicalTriggers.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: opt,\n              children: opt\n            }, opt, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Faixa Et\\xE1ria\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"ageRange\",\n            value: audienceOptions.ageRange,\n            onChange: handleAudienceChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"--\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), ageRanges.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: opt,\n              children: opt\n            }, opt, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nicho de Mercado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"marketNiche\",\n            value: audienceOptions.marketNiche,\n            onChange: handleAudienceChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"--\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), marketNiches.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: opt,\n              children: opt\n            }, opt, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), audienceOptions.marketNiche === 'outro' && /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"customMarketNiche\",\n            placeholder: \"Descreva seu nicho\",\n            value: audienceOptions.customMarketNiche,\n            onChange: handleAudienceChange,\n            style: {\n              marginTop: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSuggestWithAI,\n          disabled: isSuggesting,\n          children: isSuggesting ? 'Gerando...' : 'Gerar com IA (respeitando categoria)'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: validateCompliance,\n          disabled: validating,\n          children: validating ? 'Validando...' : 'Validar compliance (Meta)'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          disabled: isCreating,\n          children: isCreating ? 'Criando...' : 'Criar Template'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Message Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: 'pre-wrap',\n          wordBreak: 'break-word'\n        },\n        children: preview\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), compliance && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Compliance (Meta)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"OK?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 15\n          }, this), \" \", String(compliance.ok)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Issues:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), ' ', Array.isArray(compliance.issues) && compliance.issues.length ? compliance.issues.join(' | ') : 'nenhuma']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Sugest\\xF5es:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), ' ', Array.isArray(compliance.suggestions) && compliance.suggestions.length ? compliance.suggestions.join(' | ') : '—']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this), ((_compliance$ai_summar2 = compliance.ai_summary) === null || _compliance$ai_summar2 === void 0 ? void 0 : _compliance$ai_summar2.rewritten) && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Reescrita sugerida:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            style: {\n              whiteSpace: 'pre-wrap'\n            },\n            children: compliance.ai_summary.rewritten\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"small-btn\",\n            onClick: applyRewriteFromCompliance,\n            children: \"Aplicar reescrita ao Body\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n_s(TemplatePage, \"80LdqH4Z5pjyknnadm27TaFTfr0=\");\n_c = TemplatePage;\nvar _c;\n$RefreshReg$(_c, \"TemplatePage\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","TemplatePage","_s","_compliance$ai_summar2","formData","setFormData","friendlyName","language","contentType","body","variables","submitForWhatsApp","category","audienceOptions","setAudienceOptions","region","tone","offerType","psychologicalTrigger","ageRange","marketNiche","customMarketNiche","preview","setPreview","isSuggesting","setIsSuggesting","isCreating","setIsCreating","compliance","setCompliance","validating","setValidating","psychologicalTriggers","ageRanges","offerTypes","marketNiches","extractVariables","bodyText","regex","nums","Set","m","exec","String","add","Number","max","size","Math","Array","from","length","_","i","prev","msg","forEach","val","re","RegExp","replace","handleChange","e","name","value","type","checked","target","handleVariableChange","index","arr","handleAudienceChange","includes","handleSuggestWithAI","payload","seedText","toUpperCase","data","post","suggestion","alert","console","error","validateCompliance","applyRewriteFromCompliance","_compliance$ai_summar","rewritten","ai_summary","handleSubmit","trim","variableMap","idx","toString","types","autoSubmit","Boolean","err","_err$response","_err$response$data","response","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","placeholder","disabled","style","alignSelf","display","gap","alignItems","rows","map","opt","marginTop","onClick","whiteSpace","wordBreak","ok","isArray","issues","join","suggestions","_c","$RefreshReg$"],"sources":["/Users/gustsantos/Desktop/initucastt_old/frontend/src/pages/TemplatePage.js"],"sourcesContent":["// frontend/src/pages/TemplatePage.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/TemplatePage.css';\n\nexport default function TemplatePage() {\n  // --------- Estado principal (form) ---------\n  const [formData, setFormData] = useState({\n    friendlyName: '',\n    language: 'pt_BR',\n    contentType: 'twilio/text', // 'twilio/text' | 'twilio/media' | 'twilio/template'\n    body: '',\n    variables: [],\n    submitForWhatsApp: true,\n    category: 'UTILITY', // UTILITY | MARKETING | AUTH/TRANSACTIONAL\n  });\n\n  // --------- Contexto para IA (briefing) ---------\n  const [audienceOptions, setAudienceOptions] = useState({\n    region: 'br',\n    tone: '',\n    offerType: '',\n    psychologicalTrigger: '',\n    ageRange: '',\n    marketNiche: '',\n    customMarketNiche: '',\n  });\n\n  // --------- Preview & Compliance ---------\n  const [preview, setPreview] = useState('');\n  const [isSuggesting, setIsSuggesting] = useState(false);\n  const [isCreating, setIsCreating] = useState(false);\n  const [compliance, setCompliance] = useState(null);\n  const [validating, setValidating] = useState(false);\n\n  // --------- Opções auxiliares ---------\n  const psychologicalTriggers = ['escassez', 'urgência', 'prova social', 'autoridade', 'reciprocidade'];\n  const ageRanges = ['18 a 24 anos', '25 a 40 anos', '41 a 60 anos', '60+'];\n  const offerTypes = ['desconto exclusivo', 'frete grátis', 'combo especial', 'brinde na compra', 'cobrança'];\n  const marketNiches = ['cosméticos naturais', 'fitness', 'educação online', 'moda sustentável', 'tecnologia', 'outro'];\n\n  // --------- Util: extrair placeholders {{1}}, {{2}}... ---------\n  const extractVariables = (bodyText) => {\n    const regex = /\\{\\{(\\d+)\\}\\}/g;\n    const nums = new Set();\n    let m;\n    while ((m = regex.exec(String(bodyText))) !== null) nums.add(Number(m[1]));\n    const max = nums.size ? Math.max(...nums) : 0;\n    return Array.from({ length: max }, (_, i) => formData.variables[i] || '');\n  };\n\n  // Atualiza vetor de variáveis ao editar o body\n  useEffect(() => {\n    setFormData((prev) => ({ ...prev, variables: extractVariables(prev.body) }));\n  }, [formData.body]); // eslint-disable-line\n\n  // Gera preview substituindo {{n}} pelos valores digitados\n  useEffect(() => {\n    let msg = String(formData.body || '');\n    formData.variables.forEach((val, i) => {\n      const re = new RegExp(`\\\\{\\\\{${i + 1}\\\\}\\\\}`, 'g');\n      msg = msg.replace(re, val || `{{${i + 1}}}`);\n    });\n    setPreview(msg);\n  }, [formData.body, formData.variables]);\n\n  // --------- Handlers básicos ---------\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setCompliance(null); // qualquer alteração invalida análise anterior\n    setFormData((prev) => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));\n  };\n\n  const handleVariableChange = (index, value) => {\n    const arr = [...formData.variables];\n    arr[index] = value;\n    setCompliance(null);\n    setFormData((prev) => ({ ...prev, variables: arr }));\n  };\n\n  const handleAudienceChange = (e) => {\n    const { name, value } = e.target;\n    setAudienceOptions((prev) => ({ ...prev, [name]: value }));\n\n    // region -> language\n    if (name === 'region') {\n      if (value === 'br') {\n        setFormData((prev) => ({ ...prev, language: 'pt_BR' }));\n      } else if (['co', 'mx', 'pe', 'ar', 'cl'].includes(value)) {\n        setFormData((prev) => ({ ...prev, language: 'es_MX' }));\n      } else {\n        setFormData((prev) => ({ ...prev, language: 'en_US' }));\n      }\n    }\n  };\n\n  // --------- IA: sugerir copy (usa seed + briefing + categoria) ---------\n  const handleSuggestWithAI = async () => {\n    try {\n      setIsSuggesting(true);\n      setCompliance(null);\n\n      const payload = {\n        // texto que o usuário já começou a escrever\n        seedText: formData.body || '',\n        // briefing\n        region: audienceOptions.region || '',\n        tone: audienceOptions.tone || '',\n        offerType: audienceOptions.offerType || '',\n        psychologicalTrigger: audienceOptions.psychologicalTrigger || '',\n        ageRange: audienceOptions.ageRange || '',\n        marketNiche:\n          audienceOptions.marketNiche === 'outro'\n            ? audienceOptions.customMarketNiche || 'outro'\n            : audienceOptions.marketNiche || '',\n        // categoria do template (p/ IA respeitar contexto de Meta)\n        category: (formData.category || 'UTILITY').toUpperCase(),\n        // linguagem alvo ajuda a IA com PT/ES/EN\n        language: formData.language || 'pt_BR',\n      };\n\n      const { data } = await axios.post('/api/ai/suggest-copy', payload);\n      if (!data?.suggestion) {\n        alert('A IA não retornou sugestão. Tente novamente.');\n        return;\n      }\n      setFormData((prev) => ({ ...prev, body: data.suggestion }));\n    } catch (e) {\n      console.error(e);\n      alert('Erro ao gerar sugestão com IA.');\n    } finally {\n      setIsSuggesting(false);\n    }\n  };\n\n  // --------- Compliance: valida SOMENTE (category + preview) ---------\n  const validateCompliance = async () => {\n    try {\n      setValidating(true);\n      setCompliance(null);\n\n      const payload = {\n        category: (formData.category || 'UTILITY').toUpperCase(),\n        body: preview || '',\n      };\n\n      const { data } = await axios.post('/api/template-guard/validate-hybrid', payload);\n      setCompliance(data);\n    } catch (e) {\n      console.error(e);\n      alert('Falha ao validar compliance.');\n    } finally {\n      setValidating(false);\n    }\n  };\n\n  const applyRewriteFromCompliance = () => {\n    const rewritten = compliance?.ai_summary?.rewritten;\n    if (!rewritten) return;\n    setFormData((prev) => ({ ...prev, body: rewritten }));\n    // preview atualizará via useEffect\n  };\n\n  // --------- Criar Template ---------\n  const handleSubmit = async () => {\n    try {\n      if (!formData.friendlyName.trim()) {\n        alert('Defina um Friendly Name.');\n        return;\n      }\n      if (!formData.body.trim()) {\n        alert('Escreva o Body da mensagem.');\n        return;\n      }\n\n      // map {{n}} -> valores default (apenas rótulos)\n      const variableMap = {};\n      formData.variables.forEach((val, idx) => {\n        variableMap[(idx + 1).toString()] = val || `{{${idx + 1}}}`;\n      });\n\n      const payload = {\n        name: formData.friendlyName,\n        language: formData.language, // ex.: 'pt_BR'\n        variables: variableMap,\n        types: {\n          [formData.contentType]: {\n            body: formData.body,\n          },\n        },\n        autoSubmit: Boolean(formData.submitForWhatsApp),\n        category: (formData.category || 'UTILITY').toUpperCase(),\n      };\n\n      setIsCreating(true);\n      await axios.post('/api/templates/create', payload);\n      alert('Template criado com sucesso!');\n    } catch (err) {\n      console.error(err);\n      alert('Erro ao criar template: ' + (err.response?.data?.message || err.message));\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  // --------- UI ---------\n  return (\n    <div className=\"container\">\n      {/* Coluna esquerda: formulário */}\n      <div className=\"form\">\n        <h2>Criar Template (com IA + Compliance)</h2>\n\n        <label>Friendly Name</label>\n        <input\n          name=\"friendlyName\"\n          value={formData.friendlyName}\n          onChange={handleChange}\n          placeholder=\"ex.: lembrete_pagamento_ago24\"\n        />\n\n        <div className=\"grid-2\">\n          <div>\n            <label>Categoria</label>\n            <select name=\"category\" value={formData.category} onChange={handleChange}>\n              <option value=\"UTILITY\">Utility</option>\n              <option value=\"MARKETING\">Marketing</option>\n              <option value=\"AUTH\">Auth/Transactional</option>\n            </select>\n          </div>\n\n          <div>\n            <label>Idioma</label>\n            <input name=\"language\" value={formData.language} onChange={handleChange} disabled />\n          </div>\n        </div>\n\n        <div className=\"grid-2\">\n          <div>\n            <label>Content Type</label>\n            <select name=\"contentType\" value={formData.contentType} onChange={handleChange}>\n              <option value=\"twilio/text\">twilio/text</option>\n              <option value=\"twilio/media\">twilio/media</option>\n              <option value=\"twilio/template\">twilio/template</option>\n            </select>\n          </div>\n\n          <div style={{ alignSelf: 'end' }}>\n            <label style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n              <input\n                type=\"checkbox\"\n                name=\"submitForWhatsApp\"\n                checked={formData.submitForWhatsApp}\n                onChange={handleChange}\n              />\n              Submeter para aprovação no WhatsApp\n            </label>\n          </div>\n        </div>\n\n        <label>Body</label>\n        <textarea\n          name=\"body\"\n          rows={6}\n          value={formData.body}\n          onChange={handleChange}\n          placeholder=\"Use {{1}}, {{2}}... para variáveis\"\n        />\n\n        {/* Campos de variáveis detectadas */}\n        {formData.variables.length > 0 && (\n          <div className=\"vars-box\">\n            {formData.variables.map((val, i) => (\n              <div key={i}>\n                <label>{`Valor da variável {{${i + 1}}}`}</label>\n                <input value={val} onChange={(e) => handleVariableChange(i, e.target.value)} />\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Briefing para IA */}\n        <div className=\"divider\" />\n        <h4>Briefing para IA</h4>\n\n        <div className=\"grid-2\">\n          <div>\n            <label>Região</label>\n            <select name=\"region\" value={audienceOptions.region} onChange={handleAudienceChange}>\n              <option value=\"br\">Brasil (pt_BR)</option>\n              <option value=\"co\">Colômbia (es_MX)</option>\n              <option value=\"mx\">México (es_MX)</option>\n              <option value=\"pe\">Peru (es_MX)</option>\n              <option value=\"ar\">Argentina (es_MX)</option>\n              <option value=\"cl\">Chile (es_MX)</option>\n              <option value=\"us\">Estados Unidos (en_US)</option>\n              <option value=\"intl\">Outro / Internacional (en_US)</option>\n            </select>\n          </div>\n\n          <div>\n            <label>Tom</label>\n            <select name=\"tone\" value={audienceOptions.tone} onChange={handleAudienceChange}>\n              <option value=\"\">--</option>\n              <option value=\"informal\">Informal</option>\n              <option value=\"urgente\">Urgente</option>\n              <option value=\"profissional\">Profissional</option>\n              <option value=\"amistoso\">Amistoso</option>\n              <option value=\"sério\">Sério</option>\n            </select>\n          </div>\n\n          <div>\n            <label>Tipo de Oferta</label>\n            <select name=\"offerType\" value={audienceOptions.offerType} onChange={handleAudienceChange}>\n              <option value=\"\">--</option>\n              {offerTypes.map((opt) => (\n                <option key={opt} value={opt}>\n                  {opt}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label>Gatilho Psicológico</label>\n            <select\n              name=\"psychologicalTrigger\"\n              value={audienceOptions.psychologicalTrigger}\n              onChange={handleAudienceChange}\n            >\n              <option value=\"\">--</option>\n              {psychologicalTriggers.map((opt) => (\n                <option key={opt} value={opt}>\n                  {opt}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label>Faixa Etária</label>\n            <select name=\"ageRange\" value={audienceOptions.ageRange} onChange={handleAudienceChange}>\n              <option value=\"\">--</option>\n              {ageRanges.map((opt) => (\n                <option key={opt} value={opt}>\n                  {opt}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label>Nicho de Mercado</label>\n            <select name=\"marketNiche\" value={audienceOptions.marketNiche} onChange={handleAudienceChange}>\n              <option value=\"\">--</option>\n              {marketNiches.map((opt) => (\n                <option key={opt} value={opt}>\n                  {opt}\n                </option>\n              ))}\n            </select>\n\n            {audienceOptions.marketNiche === 'outro' && (\n              <input\n                name=\"customMarketNiche\"\n                placeholder=\"Descreva seu nicho\"\n                value={audienceOptions.customMarketNiche}\n                onChange={handleAudienceChange}\n                style={{ marginTop: 8 }}\n              />\n            )}\n          </div>\n        </div>\n\n        <div className=\"button-group\">\n          <button onClick={handleSuggestWithAI} disabled={isSuggesting}>\n            {isSuggesting ? 'Gerando...' : 'Gerar com IA (respeitando categoria)'}\n          </button>\n          <button onClick={validateCompliance} disabled={validating}>\n            {validating ? 'Validando...' : 'Validar compliance (Meta)'}\n          </button>\n          <button onClick={handleSubmit} disabled={isCreating}>\n            {isCreating ? 'Criando...' : 'Criar Template'}\n          </button>\n        </div>\n      </div>\n\n      {/* Coluna direita: Preview + Resultado da Compliance */}\n      <div className=\"preview\">\n        <h4>Message Preview</h4>\n        <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>{preview}</pre>\n\n        {compliance && (\n          <div style={{ marginTop: 16 }}>\n            <h4>Compliance (Meta)</h4>\n            <p>\n              <strong>OK?</strong> {String(compliance.ok)}\n            </p>\n            <p>\n              <strong>Issues:</strong>{' '}\n              {Array.isArray(compliance.issues) && compliance.issues.length\n                ? compliance.issues.join(' | ')\n                : 'nenhuma'}\n            </p>\n            <p>\n              <strong>Sugestões:</strong>{' '}\n              {Array.isArray(compliance.suggestions) && compliance.suggestions.length\n                ? compliance.suggestions.join(' | ')\n                : '—'}\n            </p>\n\n            {compliance.ai_summary?.rewritten && (\n              <>\n                <div className=\"divider\" />\n                <p>\n                  <strong>Reescrita sugerida:</strong>\n                </p>\n                <pre style={{ whiteSpace: 'pre-wrap' }}>{compliance.ai_summary.rewritten}</pre>\n                <button className=\"small-btn\" onClick={applyRewriteFromCompliance}>\n                  Aplicar reescrita ao Body\n                </button>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}