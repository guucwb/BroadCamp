{"ast":null,"code":"var _jsxFileName = \"/Users/gustsantos/Desktop/initucastt/frontend/src/pages/TemplatePage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/TemplatePage.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/TemplatePage.css';\n\n/**\n * Página unificada:\n * - Composer + IA (usa /api/ai/suggest-copy)\n * - Preview com substituição de {{1}}, {{2}}...\n * - Validação Meta (usa /api/template-guard/validate-hybrid)\n * - Criação de template (usa /api/templates/create)\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TemplatePage() {\n  _s();\n  var _compliance$ai_summar2, _compliance$ai_summar3, _compliance$issues, _compliance$suggestio, _compliance$ai_summar4;\n  // ========================\n  // Composer (seu estado original)\n  // ========================\n  const [formData, setFormData] = useState({\n    friendlyName: '',\n    language: 'pt_BR',\n    contentType: 'twilio/text',\n    body: '',\n    variables: [],\n    submitForWhatsApp: true,\n    category: 'UTILITY' // usado para criação (pode mapear p/ Meta abaixo)\n  });\n  const [preview, setPreview] = useState('');\n  const [audienceOptions, setAudienceOptions] = useState({\n    region: '',\n    tone: '',\n    offerType: '',\n    psychologicalTrigger: '',\n    ageRange: '',\n    marketNiche: '',\n    customMarketNiche: ''\n  });\n  const [isLoadingAI, setIsLoadingAI] = useState(false);\n  const psychologicalTriggers = ['escassez', 'urgência', 'prova social', 'autoridade', 'reciprocidade'];\n  const ageRanges = ['18 a 24 anos', '25 a 40 anos', '41 a 60 anos', '60+'];\n  const offerTypes = ['desconto exclusivo', 'frete grátis', 'combo especial', 'brinde na compra', 'cobrança'];\n  const marketNiches = ['cosméticos naturais', 'fitness', 'educação online', 'moda sustentável', 'tecnologia', 'outro'];\n\n  // ========================\n  // Compliance (Meta) embutido\n  // ========================\n  const [checking, setChecking] = useState(false);\n  const [compliance, setCompliance] = useState(null); // { ok, issues, suggestions, ai_summary: { risk_score, rewritten } }\n\n  // Extrai variáveis com formato {{1}}, {{2}}...\n  const extractVariables = bodyText => {\n    const regex = /\\{\\{(\\d+)\\}\\}/g;\n    const numbers = new Set();\n    let match;\n    while ((match = regex.exec(bodyText)) !== null) {\n      numbers.add(match[1]);\n    }\n    const max = Math.max(0, ...Array.from(numbers).map(n => parseInt(n, 10)));\n    return Array.from({\n      length: max\n    }, (_, i) => formData.variables[i] || '');\n  };\n\n  // Sempre que o body muda, refaz a lista de variáveis\n  useEffect(() => {\n    const vars = extractVariables(formData.body);\n    setFormData(prev => ({\n      ...prev,\n      variables: vars\n    }));\n  }, [formData.body]); // eslint-disable-line\n\n  // Atualiza preview quando body/variáveis mudam\n  useEffect(() => {\n    let msg = formData.body;\n    formData.variables.forEach((val, i) => {\n      msg = msg.replaceAll(`{{${i + 1}}}`, val || `{{${i + 1}}}`);\n    });\n    setPreview(msg);\n  }, [formData.body, formData.variables]);\n\n  // Handlers\n  const handleVariableChange = (index, value) => {\n    const updated = [...formData.variables];\n    updated[index] = value;\n    setFormData(prev => ({\n      ...prev,\n      variables: updated\n    }));\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const handleAudienceChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAudienceOptions(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === 'region') {\n      if (value === 'br') setFormData(prev => ({\n        ...prev,\n        language: 'pt_BR'\n      }));else if (['co', 'mx', 'pe', 'ar', 'cl'].includes(value)) setFormData(prev => ({\n        ...prev,\n        language: 'es_MX'\n      }));else setFormData(prev => ({\n        ...prev,\n        language: 'en_US'\n      }));\n    }\n  };\n\n  // ========================\n  // IA – gera sugestão\n  // ========================\n  // dentro de TemplatePage.js\n  const handleSuggestWithAI = async () => {\n    setIsLoadingAI(true);\n    try {\n      var _formData$body, _res$data;\n      // mapeia nicho \"outro\"\n      const marketNicheResolved = audienceOptions.marketNiche === 'outro' ? audienceOptions.customMarketNiche : audienceOptions.marketNiche;\n\n      // payload AGORA leva o texto que o usuário já escreveu (seed)\n      const payload = {\n        mode: (_formData$body = formData.body) !== null && _formData$body !== void 0 && _formData$body.trim() ? 'refine' : 'generate',\n        // dica p/ backend\n        bodySeed: formData.body || '',\n        // <- AQUI O SEED\n        language: formData.language || 'pt_BR',\n        category: String(formData.category || '').toUpperCase(),\n        // contexto de público/estratégia\n        region: audienceOptions.region || '',\n        tone: audienceOptions.tone || '',\n        offerType: audienceOptions.offerType || '',\n        psychologicalTrigger: audienceOptions.psychologicalTrigger || '',\n        ageRange: audienceOptions.ageRange || '',\n        marketNiche: marketNicheResolved || ''\n      };\n      const res = await axios.post('/api/ai/suggest-copy', payload);\n      const suggestion = (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.suggestion) || '';\n      if (suggestion) {\n        setFormData(prev => ({\n          ...prev,\n          body: suggestion\n        }));\n      } else {\n        alert('IA não retornou sugestão.');\n      }\n    } catch (err) {\n      alert('Erro ao gerar sugestão com IA');\n    } finally {\n      setIsLoadingAI(false);\n    }\n  };\n\n  // ========================\n  // Compliance – valida Meta\n  // ========================\n  // Mapa simples para categorias Meta do seu guard: MARKETING | UTILITY | AUTH\n  const mapToMetaCategory = cat => {\n    const up = String(cat || '').toUpperCase();\n    if (up === 'MARKETING') return 'MARKETING';\n    if (up === 'UTILITY' || up === 'TRANSACTIONAL') return 'UTILITY';\n    if (up === 'AUTH' || up === 'AUTHENTICATION') return 'AUTH';\n    return 'MARKETING';\n    // Ajuste se seu /validate-hybrid espera outro set.\n  };\n  const validateCompliance = async () => {\n    var _formData$body2;\n    if (!((_formData$body2 = formData.body) !== null && _formData$body2 !== void 0 && _formData$body2.trim())) {\n      alert('Escreva o corpo do template antes de validar.');\n      return;\n    }\n    setChecking(true);\n    setCompliance(null);\n    try {\n      const payload = {\n        category: mapToMetaCategory(formData.category),\n        language: formData.language || 'pt_BR',\n        body: formData.body,\n        audience: audienceOptions.marketNiche || audienceOptions.region || 'leads',\n        tone: audienceOptions.tone || 'neutral',\n        offerType: audienceOptions.offerType || '',\n        triggers: audienceOptions.psychologicalTrigger ? [audienceOptions.psychologicalTrigger] : []\n      };\n      const res = await fetch('/api/template-guard/validate-hybrid', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const json = await res.json();\n      setCompliance(json);\n    } catch (e) {\n      alert('Falha ao validar template.');\n    } finally {\n      setChecking(false);\n    }\n  };\n  const applyRewrite = () => {\n    var _compliance$ai_summar;\n    const txt = compliance === null || compliance === void 0 ? void 0 : (_compliance$ai_summar = compliance.ai_summary) === null || _compliance$ai_summar === void 0 ? void 0 : _compliance$ai_summar.rewritten;\n    if (txt) setFormData(prev => ({\n      ...prev,\n      body: txt\n    }));\n  };\n\n  // ========================\n  // Criar Template\n  // ========================\n  const handleSubmit = async () => {\n    const variableMap = {};\n    formData.variables.forEach((val, idx) => {\n      variableMap[(idx + 1).toString()] = val;\n    });\n    const payload = {\n      name: formData.friendlyName,\n      language: formData.language,\n      variables: variableMap,\n      types: {\n        [formData.contentType]: {\n          body: formData.body\n        }\n      },\n      autoSubmit: formData.submitForWhatsApp,\n      category: String(formData.category || '').toUpperCase()\n    };\n    try {\n      await axios.post('/api/templates/create', payload);\n      alert('Template criado com sucesso!');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert('Erro ao criar template: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message));\n    }\n  };\n\n  // ========================\n  // UI\n  // ========================\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Criar Template\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Friendly Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"friendlyName\",\n        value: formData.friendlyName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Language\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"language\",\n        value: formData.language,\n        onChange: handleChange,\n        disabled: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Content Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"contentType\",\n        value: formData.contentType,\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"twilio/text\",\n          children: \"twilio/text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"twilio/media\",\n          children: \"twilio/media\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"twilio/template\",\n          children: \"twilio/template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Body\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"body\",\n        value: formData.body,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), formData.variables.map((val, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: `Valor da variável ${index + 1}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: val,\n          onChange: e => handleVariableChange(index, e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSuggestWithAI,\n        style: {\n          backgroundColor: '#007bff'\n        },\n        disabled: isLoadingAI,\n        children: isLoadingAI ? 'Gerando...' : 'Gerar com IA'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Regi\\xE3o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"region\",\n        value: audienceOptions.region,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"br\",\n          children: \"Brasil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"co\",\n          children: \"Col\\xF4mbia\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"mx\",\n          children: \"M\\xE9xico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"pe\",\n          children: \"Peru\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"ar\",\n          children: \"Argentina\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"cl\",\n          children: \"Chile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"us\",\n          children: \"Estados Unidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"intl\",\n          children: \"Outro / Internacional\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tom\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"tone\",\n        value: audienceOptions.tone,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"informal\",\n          children: \"Informal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"urgente\",\n          children: \"Urgente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"profissional\",\n          children: \"Profissional\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"amistoso\",\n          children: \"Amistoso\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"s\\xE9rio\",\n          children: \"S\\xE9rio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tipo de Oferta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"offerType\",\n        value: audienceOptions.offerType,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), offerTypes.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Gatilho Psicol\\xF3gico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"psychologicalTrigger\",\n        value: audienceOptions.psychologicalTrigger,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), psychologicalTriggers.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Faixa Et\\xE1ria\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"ageRange\",\n        value: audienceOptions.ageRange,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), ageRanges.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nicho de Mercado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"marketNiche\",\n        value: audienceOptions.marketNiche,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), marketNiches.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), audienceOptions.marketNiche === 'outro' && /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"customMarketNiche\",\n        placeholder: \"Descreva seu nicho\",\n        value: audienceOptions.customMarketNiche,\n        onChange: handleAudienceChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          name: \"submitForWhatsApp\",\n          checked: formData.submitForWhatsApp,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), \" Submeter para aprova\\xE7\\xE3o no WhatsApp\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Categoria\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"category\",\n        value: formData.category,\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"UTILITY\",\n          children: \"Utility\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"MARKETING\",\n          children: \"Marketing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"TRANSACTIONAL\",\n          children: \"Transactional\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          children: \"Criar Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Message Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: 'pre-wrap',\n          wordBreak: 'break-word'\n        },\n        children: preview || '—'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 16,\n          borderTop: '1px solid #e5e7eb',\n          paddingTop: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: 0\n            },\n            children: \"Template Compliance (Meta)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-btn\",\n            onClick: validateCompliance,\n            disabled: checking,\n            children: checking ? 'Analisando...' : 'Validar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), !compliance && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#64748b',\n            marginTop: 8,\n            fontSize: 14\n          },\n          children: [\"Preencha o corpo e clique em \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Validar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 44\n          }, this), \" para ver riscos, issues e reescrita sugerida.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), compliance && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"OK?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 18\n            }, this), \" \", String(compliance.ok)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"AI Risk:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 18\n            }, this), \" \", (_compliance$ai_summar2 = (_compliance$ai_summar3 = compliance.ai_summary) === null || _compliance$ai_summar3 === void 0 ? void 0 : _compliance$ai_summar3.risk_score) !== null && _compliance$ai_summar2 !== void 0 ? _compliance$ai_summar2 : '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Issues:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this), ' ', (_compliance$issues = compliance.issues) !== null && _compliance$issues !== void 0 && _compliance$issues.length ? compliance.issues.join(' | ') : 'nenhuma']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Sugest\\xF5es:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), ' ', (_compliance$suggestio = compliance.suggestions) !== null && _compliance$suggestio !== void 0 && _compliance$suggestio.length ? compliance.suggestions.join(' | ') : '—']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this), ((_compliance$ai_summar4 = compliance.ai_summary) === null || _compliance$ai_summar4 === void 0 ? void 0 : _compliance$ai_summar4.rewritten) && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Reescrita Sugerida:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n              style: {\n                whiteSpace: 'pre-wrap'\n              },\n              children: compliance.ai_summary.rewritten\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"primary-btn small\",\n              onClick: applyRewrite,\n              children: \"Aplicar reescrita\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 5\n  }, this);\n}\n_s(TemplatePage, \"39cZSjskpLt8RSpJrThjJ/AlGiQ=\");\n_c = TemplatePage;\nvar _c;\n$RefreshReg$(_c, \"TemplatePage\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","TemplatePage","_s","_compliance$ai_summar2","_compliance$ai_summar3","_compliance$issues","_compliance$suggestio","_compliance$ai_summar4","formData","setFormData","friendlyName","language","contentType","body","variables","submitForWhatsApp","category","preview","setPreview","audienceOptions","setAudienceOptions","region","tone","offerType","psychologicalTrigger","ageRange","marketNiche","customMarketNiche","isLoadingAI","setIsLoadingAI","psychologicalTriggers","ageRanges","offerTypes","marketNiches","checking","setChecking","compliance","setCompliance","extractVariables","bodyText","regex","numbers","Set","match","exec","add","max","Math","Array","from","map","n","parseInt","length","_","i","vars","prev","msg","forEach","val","replaceAll","handleVariableChange","index","value","updated","handleChange","e","name","type","checked","target","handleAudienceChange","includes","handleSuggestWithAI","_formData$body","_res$data","marketNicheResolved","payload","mode","trim","bodySeed","String","toUpperCase","res","post","suggestion","data","alert","err","mapToMetaCategory","cat","up","validateCompliance","_formData$body2","audience","triggers","fetch","method","headers","JSON","stringify","json","applyRewrite","_compliance$ai_summar","txt","ai_summary","rewritten","handleSubmit","variableMap","idx","toString","types","autoSubmit","_err$response","_err$response$data","response","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","disabled","onClick","style","backgroundColor","opt","placeholder","whiteSpace","wordBreak","marginTop","borderTop","paddingTop","display","justifyContent","alignItems","margin","color","fontSize","ok","risk_score","issues","join","suggestions","_c","$RefreshReg$"],"sources":["/Users/gustsantos/Desktop/initucastt/frontend/src/pages/TemplatePage.js"],"sourcesContent":["// frontend/src/pages/TemplatePage.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/TemplatePage.css';\n\n/**\n * Página unificada:\n * - Composer + IA (usa /api/ai/suggest-copy)\n * - Preview com substituição de {{1}}, {{2}}...\n * - Validação Meta (usa /api/template-guard/validate-hybrid)\n * - Criação de template (usa /api/templates/create)\n */\nexport default function TemplatePage() {\n  // ========================\n  // Composer (seu estado original)\n  // ========================\n  const [formData, setFormData] = useState({\n    friendlyName: '',\n    language: 'pt_BR',\n    contentType: 'twilio/text',\n    body: '',\n    variables: [],\n    submitForWhatsApp: true,\n    category: 'UTILITY', // usado para criação (pode mapear p/ Meta abaixo)\n  });\n\n  const [preview, setPreview] = useState('');\n  const [audienceOptions, setAudienceOptions] = useState({\n    region: '',\n    tone: '',\n    offerType: '',\n    psychologicalTrigger: '',\n    ageRange: '',\n    marketNiche: '',\n    customMarketNiche: ''\n  });\n\n  const [isLoadingAI, setIsLoadingAI] = useState(false);\n\n  const psychologicalTriggers = ['escassez', 'urgência', 'prova social', 'autoridade', 'reciprocidade'];\n  const ageRanges = ['18 a 24 anos', '25 a 40 anos', '41 a 60 anos', '60+'];\n  const offerTypes = ['desconto exclusivo', 'frete grátis', 'combo especial', 'brinde na compra', 'cobrança'];\n  const marketNiches = ['cosméticos naturais', 'fitness', 'educação online', 'moda sustentável', 'tecnologia', 'outro'];\n\n  // ========================\n  // Compliance (Meta) embutido\n  // ========================\n  const [checking, setChecking] = useState(false);\n  const [compliance, setCompliance] = useState(null); // { ok, issues, suggestions, ai_summary: { risk_score, rewritten } }\n\n  // Extrai variáveis com formato {{1}}, {{2}}...\n  const extractVariables = (bodyText) => {\n    const regex = /\\{\\{(\\d+)\\}\\}/g;\n    const numbers = new Set();\n    let match;\n    while ((match = regex.exec(bodyText)) !== null) {\n      numbers.add(match[1]);\n    }\n    const max = Math.max(0, ...Array.from(numbers).map(n => parseInt(n, 10)));\n    return Array.from({ length: max }, (_, i) => formData.variables[i] || '');\n  };\n\n  // Sempre que o body muda, refaz a lista de variáveis\n  useEffect(() => {\n    const vars = extractVariables(formData.body);\n    setFormData(prev => ({ ...prev, variables: vars }));\n  }, [formData.body]); // eslint-disable-line\n\n  // Atualiza preview quando body/variáveis mudam\n  useEffect(() => {\n    let msg = formData.body;\n    formData.variables.forEach((val, i) => {\n      msg = msg.replaceAll(`{{${i + 1}}}`, val || `{{${i + 1}}}`);\n    });\n    setPreview(msg);\n  }, [formData.body, formData.variables]);\n\n  // Handlers\n  const handleVariableChange = (index, value) => {\n    const updated = [...formData.variables];\n    updated[index] = value;\n    setFormData(prev => ({ ...prev, variables: updated }));\n  };\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleAudienceChange = (e) => {\n    const { name, value } = e.target;\n    setAudienceOptions(prev => ({ ...prev, [name]: value }));\n\n    if (name === 'region') {\n      if (value === 'br') setFormData(prev => ({ ...prev, language: 'pt_BR' }));\n      else if (['co', 'mx', 'pe', 'ar', 'cl'].includes(value)) setFormData(prev => ({ ...prev, language: 'es_MX' }));\n      else setFormData(prev => ({ ...prev, language: 'en_US' }));\n    }\n  };\n\n  // ========================\n  // IA – gera sugestão\n  // ========================\n// dentro de TemplatePage.js\nconst handleSuggestWithAI = async () => {\n  setIsLoadingAI(true);\n  try {\n    // mapeia nicho \"outro\"\n    const marketNicheResolved =\n      audienceOptions.marketNiche === 'outro'\n        ? audienceOptions.customMarketNiche\n        : audienceOptions.marketNiche;\n\n    // payload AGORA leva o texto que o usuário já escreveu (seed)\n    const payload = {\n      mode: formData.body?.trim() ? 'refine' : 'generate', // dica p/ backend\n      bodySeed: formData.body || '',                       // <- AQUI O SEED\n      language: formData.language || 'pt_BR',\n      category: String(formData.category || '').toUpperCase(),\n\n      // contexto de público/estratégia\n      region: audienceOptions.region || '',\n      tone: audienceOptions.tone || '',\n      offerType: audienceOptions.offerType || '',\n      psychologicalTrigger: audienceOptions.psychologicalTrigger || '',\n      ageRange: audienceOptions.ageRange || '',\n      marketNiche: marketNicheResolved || ''\n    };\n\n    const res = await axios.post('/api/ai/suggest-copy', payload);\n    const suggestion = res?.data?.suggestion || '';\n    if (suggestion) {\n      setFormData(prev => ({ ...prev, body: suggestion }));\n    } else {\n      alert('IA não retornou sugestão.');\n    }\n  } catch (err) {\n    alert('Erro ao gerar sugestão com IA');\n  } finally {\n    setIsLoadingAI(false);\n  }\n};\n\n\n  // ========================\n  // Compliance – valida Meta\n  // ========================\n  // Mapa simples para categorias Meta do seu guard: MARKETING | UTILITY | AUTH\n  const mapToMetaCategory = (cat) => {\n    const up = String(cat || '').toUpperCase();\n    if (up === 'MARKETING') return 'MARKETING';\n    if (up === 'UTILITY' || up === 'TRANSACTIONAL') return 'UTILITY';\n    if (up === 'AUTH' || up === 'AUTHENTICATION') return 'AUTH';\n    return 'MARKETING';\n    // Ajuste se seu /validate-hybrid espera outro set.\n  };\n\n  const validateCompliance = async () => {\n    if (!formData.body?.trim()) {\n      alert('Escreva o corpo do template antes de validar.');\n      return;\n    }\n    setChecking(true);\n    setCompliance(null);\n    try {\n      const payload = {\n        category: mapToMetaCategory(formData.category),\n        language: formData.language || 'pt_BR',\n        body: formData.body,\n        audience: audienceOptions.marketNiche || audienceOptions.region || 'leads',\n        tone: audienceOptions.tone || 'neutral',\n        offerType: audienceOptions.offerType || '',\n        triggers: audienceOptions.psychologicalTrigger\n          ? [audienceOptions.psychologicalTrigger]\n          : []\n      };\n      const res = await fetch('/api/template-guard/validate-hybrid', {\n        method: 'POST',\n        headers: { 'Content-Type':'application/json' },\n        body: JSON.stringify(payload)\n      });\n      const json = await res.json();\n      setCompliance(json);\n    } catch (e) {\n      alert('Falha ao validar template.');\n    } finally {\n      setChecking(false);\n    }\n  };\n\n  const applyRewrite = () => {\n    const txt = compliance?.ai_summary?.rewritten;\n    if (txt) setFormData(prev => ({ ...prev, body: txt }));\n  };\n\n  // ========================\n  // Criar Template\n  // ========================\n  const handleSubmit = async () => {\n    const variableMap = {};\n    formData.variables.forEach((val, idx) => {\n      variableMap[(idx + 1).toString()] = val;\n    });\n\n    const payload = {\n      name: formData.friendlyName,\n      language: formData.language,\n      variables: variableMap,\n      types: {\n        [formData.contentType]: { body: formData.body }\n      },\n      autoSubmit: formData.submitForWhatsApp,\n      category: String(formData.category || '').toUpperCase()\n    };\n\n    try {\n      await axios.post('/api/templates/create', payload);\n      alert('Template criado com sucesso!');\n    } catch (err) {\n      alert('Erro ao criar template: ' + (err.response?.data?.message || err.message));\n    }\n  };\n\n  // ========================\n  // UI\n  // ========================\n  return (\n    <div className=\"container\">\n      {/* Coluna esquerda: Composer */}\n      <div className=\"form\">\n        <h2>Criar Template</h2>\n\n        <label>Friendly Name</label>\n        <input name=\"friendlyName\" value={formData.friendlyName} onChange={handleChange} />\n\n        <label>Language</label>\n        <input name=\"language\" value={formData.language} onChange={handleChange} disabled />\n\n        <label>Content Type</label>\n        <select name=\"contentType\" value={formData.contentType} onChange={handleChange}>\n          <option value=\"twilio/text\">twilio/text</option>\n          <option value=\"twilio/media\">twilio/media</option>\n          <option value=\"twilio/template\">twilio/template</option>\n        </select>\n\n        <label>Body</label>\n        <textarea name=\"body\" value={formData.body} onChange={handleChange} />\n\n        {/* variáveis */}\n        {formData.variables.map((val, index) => (\n          <div key={index}>\n            <label>{`Valor da variável ${index + 1}`}</label>\n            <input value={val} onChange={e => handleVariableChange(index, e.target.value)} />\n          </div>\n        ))}\n\n        <button\n          onClick={handleSuggestWithAI}\n          style={{ backgroundColor: '#007bff' }}\n          disabled={isLoadingAI}\n        >\n          {isLoadingAI ? 'Gerando...' : 'Gerar com IA'}\n        </button>\n\n        {/* Público/tonalidade/segmentação que alimentam IA + Compliance */}\n        <label>Região</label>\n        <select name=\"region\" value={audienceOptions.region} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          <option value=\"br\">Brasil</option>\n          <option value=\"co\">Colômbia</option>\n          <option value=\"mx\">México</option>\n          <option value=\"pe\">Peru</option>\n          <option value=\"ar\">Argentina</option>\n          <option value=\"cl\">Chile</option>\n          <option value=\"us\">Estados Unidos</option>\n          <option value=\"intl\">Outro / Internacional</option>\n        </select>\n\n        <label>Tom</label>\n        <select name=\"tone\" value={audienceOptions.tone} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          <option value=\"informal\">Informal</option>\n          <option value=\"urgente\">Urgente</option>\n          <option value=\"profissional\">Profissional</option>\n          <option value=\"amistoso\">Amistoso</option>\n          <option value=\"sério\">Sério</option>\n        </select>\n\n        <label>Tipo de Oferta</label>\n        <select name=\"offerType\" value={audienceOptions.offerType} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          {offerTypes.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        <label>Gatilho Psicológico</label>\n        <select\n          name=\"psychologicalTrigger\"\n          value={audienceOptions.psychologicalTrigger}\n          onChange={handleAudienceChange}\n        >\n          <option value=\"\">--</option>\n          {psychologicalTriggers.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        <label>Faixa Etária</label>\n        <select name=\"ageRange\" value={audienceOptions.ageRange} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          {ageRanges.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        <label>Nicho de Mercado</label>\n        <select name=\"marketNiche\" value={audienceOptions.marketNiche} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          {marketNiches.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        {audienceOptions.marketNiche === 'outro' && (\n          <input\n            name=\"customMarketNiche\"\n            placeholder=\"Descreva seu nicho\"\n            value={audienceOptions.customMarketNiche}\n            onChange={handleAudienceChange}\n          />\n        )}\n\n        <label>\n          <input\n            type=\"checkbox\"\n            name=\"submitForWhatsApp\"\n            checked={formData.submitForWhatsApp}\n            onChange={handleChange}\n          /> Submeter para aprovação no WhatsApp\n        </label>\n\n        <label>Categoria</label>\n        <select name=\"category\" value={formData.category} onChange={handleChange}>\n          <option value=\"UTILITY\">Utility</option>\n          <option value=\"MARKETING\">Marketing</option>\n          <option value=\"TRANSACTIONAL\">Transactional</option>\n        </select>\n\n        <div className=\"button-group\">\n          <button onClick={handleSubmit}>Criar Template</button>\n        </div>\n      </div>\n\n      {/* Coluna direita: Preview + Compliance */}\n      <div className=\"preview\">\n        <h4>Message Preview</h4>\n        <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>{preview || '—'}</pre>\n\n        <div style={{ marginTop: 16, borderTop: '1px solid #e5e7eb', paddingTop: 12 }}>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <h4 style={{ margin: 0 }}>Template Compliance (Meta)</h4>\n            <button className=\"primary-btn\" onClick={validateCompliance} disabled={checking}>\n              {checking ? 'Analisando...' : 'Validar'}\n            </button>\n          </div>\n\n          {!compliance && (\n            <div style={{ color: '#64748b', marginTop: 8, fontSize: 14 }}>\n              Preencha o corpo e clique em <b>Validar</b> para ver riscos, issues e reescrita sugerida.\n            </div>\n          )}\n\n          {compliance && (\n            <div style={{ marginTop: 12 }}>\n              <p><strong>OK?</strong> {String(compliance.ok)}</p>\n              <p><strong>AI Risk:</strong> {compliance.ai_summary?.risk_score ?? '-'}</p>\n              <p>\n                <strong>Issues:</strong>{' '}\n                {compliance.issues?.length ? compliance.issues.join(' | ') : 'nenhuma'}\n              </p>\n              <p>\n                <strong>Sugestões:</strong>{' '}\n                {compliance.suggestions?.length ? compliance.suggestions.join(' | ') : '—'}\n              </p>\n\n              {compliance.ai_summary?.rewritten && (\n                <>\n                  <hr />\n                  <p><strong>Reescrita Sugerida:</strong></p>\n                  <pre style={{ whiteSpace: 'pre-wrap' }}>{compliance.ai_summary.rewritten}</pre>\n                  <button className=\"primary-btn small\" onClick={applyRewrite}>\n                    Aplicar reescrita\n                  </button>\n                </>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,4BAA4B;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AANA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAOA,eAAe,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,sBAAA,EAAAC,sBAAA,EAAAC,kBAAA,EAAAC,qBAAA,EAAAC,sBAAA;EACrC;EACA;EACA;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC;IACvCe,YAAY,EAAE,EAAE;IAChBC,QAAQ,EAAE,OAAO;IACjBC,WAAW,EAAE,aAAa;IAC1BC,IAAI,EAAE,EAAE;IACRC,SAAS,EAAE,EAAE;IACbC,iBAAiB,EAAE,IAAI;IACvBC,QAAQ,EAAE,SAAS,CAAE;EACvB,CAAC,CAAC;EAEF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACwB,eAAe,EAAEC,kBAAkB,CAAC,GAAGzB,QAAQ,CAAC;IACrD0B,MAAM,EAAE,EAAE;IACVC,IAAI,EAAE,EAAE;IACRC,SAAS,EAAE,EAAE;IACbC,oBAAoB,EAAE,EAAE;IACxBC,QAAQ,EAAE,EAAE;IACZC,WAAW,EAAE,EAAE;IACfC,iBAAiB,EAAE;EACrB,CAAC,CAAC;EAEF,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGlC,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAMmC,qBAAqB,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,cAAc,EAAE,YAAY,EAAE,eAAe,CAAC;EACrG,MAAMC,SAAS,GAAG,CAAC,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE,KAAK,CAAC;EACzE,MAAMC,UAAU,GAAG,CAAC,oBAAoB,EAAE,cAAc,EAAE,gBAAgB,EAAE,kBAAkB,EAAE,UAAU,CAAC;EAC3G,MAAMC,YAAY,GAAG,CAAC,qBAAqB,EAAE,SAAS,EAAE,iBAAiB,EAAE,kBAAkB,EAAE,YAAY,EAAE,OAAO,CAAC;;EAErH;EACA;EACA;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACyC,UAAU,EAAEC,aAAa,CAAC,GAAG1C,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAEpD;EACA,MAAM2C,gBAAgB,GAAIC,QAAQ,IAAK;IACrC,MAAMC,KAAK,GAAG,gBAAgB;IAC9B,MAAMC,OAAO,GAAG,IAAIC,GAAG,CAAC,CAAC;IACzB,IAAIC,KAAK;IACT,OAAO,CAACA,KAAK,GAAGH,KAAK,CAACI,IAAI,CAACL,QAAQ,CAAC,MAAM,IAAI,EAAE;MAC9CE,OAAO,CAACI,GAAG,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC;IACvB;IACA,MAAMG,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC,EAAE,GAAGE,KAAK,CAACC,IAAI,CAACR,OAAO,CAAC,CAACS,GAAG,CAACC,CAAC,IAAIC,QAAQ,CAACD,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IACzE,OAAOH,KAAK,CAACC,IAAI,CAAC;MAAEI,MAAM,EAAEP;IAAI,CAAC,EAAE,CAACQ,CAAC,EAAEC,CAAC,KAAK/C,QAAQ,CAACM,SAAS,CAACyC,CAAC,CAAC,IAAI,EAAE,CAAC;EAC3E,CAAC;;EAED;EACA7D,SAAS,CAAC,MAAM;IACd,MAAM8D,IAAI,GAAGlB,gBAAgB,CAAC9B,QAAQ,CAACK,IAAI,CAAC;IAC5CJ,WAAW,CAACgD,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE3C,SAAS,EAAE0C;IAAK,CAAC,CAAC,CAAC;EACrD,CAAC,EAAE,CAAChD,QAAQ,CAACK,IAAI,CAAC,CAAC,CAAC,CAAC;;EAErB;EACAnB,SAAS,CAAC,MAAM;IACd,IAAIgE,GAAG,GAAGlD,QAAQ,CAACK,IAAI;IACvBL,QAAQ,CAACM,SAAS,CAAC6C,OAAO,CAAC,CAACC,GAAG,EAAEL,CAAC,KAAK;MACrCG,GAAG,GAAGA,GAAG,CAACG,UAAU,CAAC,KAAKN,CAAC,GAAG,CAAC,IAAI,EAAEK,GAAG,IAAI,KAAKL,CAAC,GAAG,CAAC,IAAI,CAAC;IAC7D,CAAC,CAAC;IACFrC,UAAU,CAACwC,GAAG,CAAC;EACjB,CAAC,EAAE,CAAClD,QAAQ,CAACK,IAAI,EAAEL,QAAQ,CAACM,SAAS,CAAC,CAAC;;EAEvC;EACA,MAAMgD,oBAAoB,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IAC7C,MAAMC,OAAO,GAAG,CAAC,GAAGzD,QAAQ,CAACM,SAAS,CAAC;IACvCmD,OAAO,CAACF,KAAK,CAAC,GAAGC,KAAK;IACtBvD,WAAW,CAACgD,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE3C,SAAS,EAAEmD;IAAQ,CAAC,CAAC,CAAC;EACxD,CAAC;EAED,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,IAAI;MAAEJ,KAAK;MAAEK,IAAI;MAAEC;IAAQ,CAAC,GAAGH,CAAC,CAACI,MAAM;IAC/C9D,WAAW,CAACgD,IAAI,KAAK;MACnB,GAAGA,IAAI;MACP,CAACW,IAAI,GAAGC,IAAI,KAAK,UAAU,GAAGC,OAAO,GAAGN;IAC1C,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMQ,oBAAoB,GAAIL,CAAC,IAAK;IAClC,MAAM;MAAEC,IAAI;MAAEJ;IAAM,CAAC,GAAGG,CAAC,CAACI,MAAM;IAChCnD,kBAAkB,CAACqC,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE,CAACW,IAAI,GAAGJ;IAAM,CAAC,CAAC,CAAC;IAExD,IAAII,IAAI,KAAK,QAAQ,EAAE;MACrB,IAAIJ,KAAK,KAAK,IAAI,EAAEvD,WAAW,CAACgD,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE9C,QAAQ,EAAE;MAAQ,CAAC,CAAC,CAAC,CAAC,KACrE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC8D,QAAQ,CAACT,KAAK,CAAC,EAAEvD,WAAW,CAACgD,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE9C,QAAQ,EAAE;MAAQ,CAAC,CAAC,CAAC,CAAC,KAC1GF,WAAW,CAACgD,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE9C,QAAQ,EAAE;MAAQ,CAAC,CAAC,CAAC;IAC5D;EACF,CAAC;;EAED;EACA;EACA;EACF;EACA,MAAM+D,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC7C,cAAc,CAAC,IAAI,CAAC;IACpB,IAAI;MAAA,IAAA8C,cAAA,EAAAC,SAAA;MACF;MACA,MAAMC,mBAAmB,GACvB1D,eAAe,CAACO,WAAW,KAAK,OAAO,GACnCP,eAAe,CAACQ,iBAAiB,GACjCR,eAAe,CAACO,WAAW;;MAEjC;MACA,MAAMoD,OAAO,GAAG;QACdC,IAAI,EAAE,CAAAJ,cAAA,GAAAnE,QAAQ,CAACK,IAAI,cAAA8D,cAAA,eAAbA,cAAA,CAAeK,IAAI,CAAC,CAAC,GAAG,QAAQ,GAAG,UAAU;QAAE;QACrDC,QAAQ,EAAEzE,QAAQ,CAACK,IAAI,IAAI,EAAE;QAAwB;QACrDF,QAAQ,EAAEH,QAAQ,CAACG,QAAQ,IAAI,OAAO;QACtCK,QAAQ,EAAEkE,MAAM,CAAC1E,QAAQ,CAACQ,QAAQ,IAAI,EAAE,CAAC,CAACmE,WAAW,CAAC,CAAC;QAEvD;QACA9D,MAAM,EAAEF,eAAe,CAACE,MAAM,IAAI,EAAE;QACpCC,IAAI,EAAEH,eAAe,CAACG,IAAI,IAAI,EAAE;QAChCC,SAAS,EAAEJ,eAAe,CAACI,SAAS,IAAI,EAAE;QAC1CC,oBAAoB,EAAEL,eAAe,CAACK,oBAAoB,IAAI,EAAE;QAChEC,QAAQ,EAAEN,eAAe,CAACM,QAAQ,IAAI,EAAE;QACxCC,WAAW,EAAEmD,mBAAmB,IAAI;MACtC,CAAC;MAED,MAAMO,GAAG,GAAG,MAAMxF,KAAK,CAACyF,IAAI,CAAC,sBAAsB,EAAEP,OAAO,CAAC;MAC7D,MAAMQ,UAAU,GAAG,CAAAF,GAAG,aAAHA,GAAG,wBAAAR,SAAA,GAAHQ,GAAG,CAAEG,IAAI,cAAAX,SAAA,uBAATA,SAAA,CAAWU,UAAU,KAAI,EAAE;MAC9C,IAAIA,UAAU,EAAE;QACd7E,WAAW,CAACgD,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAE5C,IAAI,EAAEyE;QAAW,CAAC,CAAC,CAAC;MACtD,CAAC,MAAM;QACLE,KAAK,CAAC,2BAA2B,CAAC;MACpC;IACF,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZD,KAAK,CAAC,+BAA+B,CAAC;IACxC,CAAC,SAAS;MACR3D,cAAc,CAAC,KAAK,CAAC;IACvB;EACF,CAAC;;EAGC;EACA;EACA;EACA;EACA,MAAM6D,iBAAiB,GAAIC,GAAG,IAAK;IACjC,MAAMC,EAAE,GAAGV,MAAM,CAACS,GAAG,IAAI,EAAE,CAAC,CAACR,WAAW,CAAC,CAAC;IAC1C,IAAIS,EAAE,KAAK,WAAW,EAAE,OAAO,WAAW;IAC1C,IAAIA,EAAE,KAAK,SAAS,IAAIA,EAAE,KAAK,eAAe,EAAE,OAAO,SAAS;IAChE,IAAIA,EAAE,KAAK,MAAM,IAAIA,EAAE,KAAK,gBAAgB,EAAE,OAAO,MAAM;IAC3D,OAAO,WAAW;IAClB;EACF,CAAC;EAED,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IAAA,IAAAC,eAAA;IACrC,IAAI,GAAAA,eAAA,GAACtF,QAAQ,CAACK,IAAI,cAAAiF,eAAA,eAAbA,eAAA,CAAed,IAAI,CAAC,CAAC,GAAE;MAC1BQ,KAAK,CAAC,+CAA+C,CAAC;MACtD;IACF;IACArD,WAAW,CAAC,IAAI,CAAC;IACjBE,aAAa,CAAC,IAAI,CAAC;IACnB,IAAI;MACF,MAAMyC,OAAO,GAAG;QACd9D,QAAQ,EAAE0E,iBAAiB,CAAClF,QAAQ,CAACQ,QAAQ,CAAC;QAC9CL,QAAQ,EAAEH,QAAQ,CAACG,QAAQ,IAAI,OAAO;QACtCE,IAAI,EAAEL,QAAQ,CAACK,IAAI;QACnBkF,QAAQ,EAAE5E,eAAe,CAACO,WAAW,IAAIP,eAAe,CAACE,MAAM,IAAI,OAAO;QAC1EC,IAAI,EAAEH,eAAe,CAACG,IAAI,IAAI,SAAS;QACvCC,SAAS,EAAEJ,eAAe,CAACI,SAAS,IAAI,EAAE;QAC1CyE,QAAQ,EAAE7E,eAAe,CAACK,oBAAoB,GAC1C,CAACL,eAAe,CAACK,oBAAoB,CAAC,GACtC;MACN,CAAC;MACD,MAAM4D,GAAG,GAAG,MAAMa,KAAK,CAAC,qCAAqC,EAAE;QAC7DC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAC;QAAmB,CAAC;QAC9CtF,IAAI,EAAEuF,IAAI,CAACC,SAAS,CAACvB,OAAO;MAC9B,CAAC,CAAC;MACF,MAAMwB,IAAI,GAAG,MAAMlB,GAAG,CAACkB,IAAI,CAAC,CAAC;MAC7BjE,aAAa,CAACiE,IAAI,CAAC;IACrB,CAAC,CAAC,OAAOnC,CAAC,EAAE;MACVqB,KAAK,CAAC,4BAA4B,CAAC;IACrC,CAAC,SAAS;MACRrD,WAAW,CAAC,KAAK,CAAC;IACpB;EACF,CAAC;EAED,MAAMoE,YAAY,GAAGA,CAAA,KAAM;IAAA,IAAAC,qBAAA;IACzB,MAAMC,GAAG,GAAGrE,UAAU,aAAVA,UAAU,wBAAAoE,qBAAA,GAAVpE,UAAU,CAAEsE,UAAU,cAAAF,qBAAA,uBAAtBA,qBAAA,CAAwBG,SAAS;IAC7C,IAAIF,GAAG,EAAEhG,WAAW,CAACgD,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAE5C,IAAI,EAAE4F;IAAI,CAAC,CAAC,CAAC;EACxD,CAAC;;EAED;EACA;EACA;EACA,MAAMG,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,MAAMC,WAAW,GAAG,CAAC,CAAC;IACtBrG,QAAQ,CAACM,SAAS,CAAC6C,OAAO,CAAC,CAACC,GAAG,EAAEkD,GAAG,KAAK;MACvCD,WAAW,CAAC,CAACC,GAAG,GAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC,CAAC,GAAGnD,GAAG;IACzC,CAAC,CAAC;IAEF,MAAMkB,OAAO,GAAG;MACdV,IAAI,EAAE5D,QAAQ,CAACE,YAAY;MAC3BC,QAAQ,EAAEH,QAAQ,CAACG,QAAQ;MAC3BG,SAAS,EAAE+F,WAAW;MACtBG,KAAK,EAAE;QACL,CAACxG,QAAQ,CAACI,WAAW,GAAG;UAAEC,IAAI,EAAEL,QAAQ,CAACK;QAAK;MAChD,CAAC;MACDoG,UAAU,EAAEzG,QAAQ,CAACO,iBAAiB;MACtCC,QAAQ,EAAEkE,MAAM,CAAC1E,QAAQ,CAACQ,QAAQ,IAAI,EAAE,CAAC,CAACmE,WAAW,CAAC;IACxD,CAAC;IAED,IAAI;MACF,MAAMvF,KAAK,CAACyF,IAAI,CAAC,uBAAuB,EAAEP,OAAO,CAAC;MAClDU,KAAK,CAAC,8BAA8B,CAAC;IACvC,CAAC,CAAC,OAAOC,GAAG,EAAE;MAAA,IAAAyB,aAAA,EAAAC,kBAAA;MACZ3B,KAAK,CAAC,0BAA0B,IAAI,EAAA0B,aAAA,GAAAzB,GAAG,CAAC2B,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAc3B,IAAI,cAAA4B,kBAAA,uBAAlBA,kBAAA,CAAoBE,OAAO,KAAI5B,GAAG,CAAC4B,OAAO,CAAC,CAAC;IAClF;EACF,CAAC;;EAED;EACA;EACA;EACA,oBACEvH,OAAA;IAAKwH,SAAS,EAAC,WAAW;IAAAC,QAAA,gBAExBzH,OAAA;MAAKwH,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBzH,OAAA;QAAAyH,QAAA,EAAI;MAAc;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAEvB7H,OAAA;QAAAyH,QAAA,EAAO;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC5B7H,OAAA;QAAOsE,IAAI,EAAC,cAAc;QAACJ,KAAK,EAAExD,QAAQ,CAACE,YAAa;QAACkH,QAAQ,EAAE1D;MAAa;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEnF7H,OAAA;QAAAyH,QAAA,EAAO;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACvB7H,OAAA;QAAOsE,IAAI,EAAC,UAAU;QAACJ,KAAK,EAAExD,QAAQ,CAACG,QAAS;QAACiH,QAAQ,EAAE1D,YAAa;QAAC2D,QAAQ;MAAA;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEpF7H,OAAA;QAAAyH,QAAA,EAAO;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC3B7H,OAAA;QAAQsE,IAAI,EAAC,aAAa;QAACJ,KAAK,EAAExD,QAAQ,CAACI,WAAY;QAACgH,QAAQ,EAAE1D,YAAa;QAAAqD,QAAA,gBAC7EzH,OAAA;UAAQkE,KAAK,EAAC,aAAa;UAAAuD,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAChD7H,OAAA;UAAQkE,KAAK,EAAC,cAAc;UAAAuD,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAClD7H,OAAA;UAAQkE,KAAK,EAAC,iBAAiB;UAAAuD,QAAA,EAAC;QAAe;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClD,CAAC,eAET7H,OAAA;QAAAyH,QAAA,EAAO;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACnB7H,OAAA;QAAUsE,IAAI,EAAC,MAAM;QAACJ,KAAK,EAAExD,QAAQ,CAACK,IAAK;QAAC+G,QAAQ,EAAE1D;MAAa;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAGrEnH,QAAQ,CAACM,SAAS,CAACoC,GAAG,CAAC,CAACU,GAAG,EAAEG,KAAK,kBACjCjE,OAAA;QAAAyH,QAAA,gBACEzH,OAAA;UAAAyH,QAAA,EAAQ,qBAAqBxD,KAAK,GAAG,CAAC;QAAE;UAAAyD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACjD7H,OAAA;UAAOkE,KAAK,EAAEJ,GAAI;UAACgE,QAAQ,EAAEzD,CAAC,IAAIL,oBAAoB,CAACC,KAAK,EAAEI,CAAC,CAACI,MAAM,CAACP,KAAK;QAAE;UAAAwD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA,GAFzE5D,KAAK;QAAAyD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGV,CACN,CAAC,eAEF7H,OAAA;QACEgI,OAAO,EAAEpD,mBAAoB;QAC7BqD,KAAK,EAAE;UAAEC,eAAe,EAAE;QAAU,CAAE;QACtCH,QAAQ,EAAEjG,WAAY;QAAA2F,QAAA,EAErB3F,WAAW,GAAG,YAAY,GAAG;MAAc;QAAA4F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtC,CAAC,eAGT7H,OAAA;QAAAyH,QAAA,EAAO;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACrB7H,OAAA;QAAQsE,IAAI,EAAC,QAAQ;QAACJ,KAAK,EAAE7C,eAAe,CAACE,MAAO;QAACuG,QAAQ,EAAEpD,oBAAqB;QAAA+C,QAAA,gBAClFzH,OAAA;UAAQkE,KAAK,EAAC,EAAE;UAAAuD,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC5B7H,OAAA;UAAQkE,KAAK,EAAC,IAAI;UAAAuD,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAClC7H,OAAA;UAAQkE,KAAK,EAAC,IAAI;UAAAuD,QAAA,EAAC;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACpC7H,OAAA;UAAQkE,KAAK,EAAC,IAAI;UAAAuD,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAClC7H,OAAA;UAAQkE,KAAK,EAAC,IAAI;UAAAuD,QAAA,EAAC;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAChC7H,OAAA;UAAQkE,KAAK,EAAC,IAAI;UAAAuD,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACrC7H,OAAA;UAAQkE,KAAK,EAAC,IAAI;UAAAuD,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACjC7H,OAAA;UAAQkE,KAAK,EAAC,IAAI;UAAAuD,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC1C7H,OAAA;UAAQkE,KAAK,EAAC,MAAM;UAAAuD,QAAA,EAAC;QAAqB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,eAET7H,OAAA;QAAAyH,QAAA,EAAO;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAClB7H,OAAA;QAAQsE,IAAI,EAAC,MAAM;QAACJ,KAAK,EAAE7C,eAAe,CAACG,IAAK;QAACsG,QAAQ,EAAEpD,oBAAqB;QAAA+C,QAAA,gBAC9EzH,OAAA;UAAQkE,KAAK,EAAC,EAAE;UAAAuD,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC5B7H,OAAA;UAAQkE,KAAK,EAAC,UAAU;UAAAuD,QAAA,EAAC;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC1C7H,OAAA;UAAQkE,KAAK,EAAC,SAAS;UAAAuD,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACxC7H,OAAA;UAAQkE,KAAK,EAAC,cAAc;UAAAuD,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAClD7H,OAAA;UAAQkE,KAAK,EAAC,UAAU;UAAAuD,QAAA,EAAC;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC1C7H,OAAA;UAAQkE,KAAK,EAAC,UAAO;UAAAuD,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC,eAET7H,OAAA;QAAAyH,QAAA,EAAO;MAAc;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC7B7H,OAAA;QAAQsE,IAAI,EAAC,WAAW;QAACJ,KAAK,EAAE7C,eAAe,CAACI,SAAU;QAACqG,QAAQ,EAAEpD,oBAAqB;QAAA+C,QAAA,gBACxFzH,OAAA;UAAQkE,KAAK,EAAC,EAAE;UAAAuD,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAC3B3F,UAAU,CAACkB,GAAG,CAAC,CAAC+E,GAAG,EAAE1E,CAAC,kBACrBzD,OAAA;UAAgBkE,KAAK,EAAEiE,GAAI;UAAAV,QAAA,EAAEU;QAAG,GAAnB1E,CAAC;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA2B,CAC1C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eAET7H,OAAA;QAAAyH,QAAA,EAAO;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAClC7H,OAAA;QACEsE,IAAI,EAAC,sBAAsB;QAC3BJ,KAAK,EAAE7C,eAAe,CAACK,oBAAqB;QAC5CoG,QAAQ,EAAEpD,oBAAqB;QAAA+C,QAAA,gBAE/BzH,OAAA;UAAQkE,KAAK,EAAC,EAAE;UAAAuD,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAC3B7F,qBAAqB,CAACoB,GAAG,CAAC,CAAC+E,GAAG,EAAE1E,CAAC,kBAChCzD,OAAA;UAAgBkE,KAAK,EAAEiE,GAAI;UAAAV,QAAA,EAAEU;QAAG,GAAnB1E,CAAC;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA2B,CAC1C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eAET7H,OAAA;QAAAyH,QAAA,EAAO;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC3B7H,OAAA;QAAQsE,IAAI,EAAC,UAAU;QAACJ,KAAK,EAAE7C,eAAe,CAACM,QAAS;QAACmG,QAAQ,EAAEpD,oBAAqB;QAAA+C,QAAA,gBACtFzH,OAAA;UAAQkE,KAAK,EAAC,EAAE;UAAAuD,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAC3B5F,SAAS,CAACmB,GAAG,CAAC,CAAC+E,GAAG,EAAE1E,CAAC,kBACpBzD,OAAA;UAAgBkE,KAAK,EAAEiE,GAAI;UAAAV,QAAA,EAAEU;QAAG,GAAnB1E,CAAC;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA2B,CAC1C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eAET7H,OAAA;QAAAyH,QAAA,EAAO;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC/B7H,OAAA;QAAQsE,IAAI,EAAC,aAAa;QAACJ,KAAK,EAAE7C,eAAe,CAACO,WAAY;QAACkG,QAAQ,EAAEpD,oBAAqB;QAAA+C,QAAA,gBAC5FzH,OAAA;UAAQkE,KAAK,EAAC,EAAE;UAAAuD,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAC3B1F,YAAY,CAACiB,GAAG,CAAC,CAAC+E,GAAG,EAAE1E,CAAC,kBACvBzD,OAAA;UAAgBkE,KAAK,EAAEiE,GAAI;UAAAV,QAAA,EAAEU;QAAG,GAAnB1E,CAAC;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA2B,CAC1C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,EAERxG,eAAe,CAACO,WAAW,KAAK,OAAO,iBACtC5B,OAAA;QACEsE,IAAI,EAAC,mBAAmB;QACxB8D,WAAW,EAAC,oBAAoB;QAChClE,KAAK,EAAE7C,eAAe,CAACQ,iBAAkB;QACzCiG,QAAQ,EAAEpD;MAAqB;QAAAgD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CACF,eAED7H,OAAA;QAAAyH,QAAA,gBACEzH,OAAA;UACEuE,IAAI,EAAC,UAAU;UACfD,IAAI,EAAC,mBAAmB;UACxBE,OAAO,EAAE9D,QAAQ,CAACO,iBAAkB;UACpC6G,QAAQ,EAAE1D;QAAa;UAAAsD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxB,CAAC,8CACJ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAER7H,OAAA;QAAAyH,QAAA,EAAO;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACxB7H,OAAA;QAAQsE,IAAI,EAAC,UAAU;QAACJ,KAAK,EAAExD,QAAQ,CAACQ,QAAS;QAAC4G,QAAQ,EAAE1D,YAAa;QAAAqD,QAAA,gBACvEzH,OAAA;UAAQkE,KAAK,EAAC,SAAS;UAAAuD,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACxC7H,OAAA;UAAQkE,KAAK,EAAC,WAAW;UAAAuD,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC5C7H,OAAA;UAAQkE,KAAK,EAAC,eAAe;UAAAuD,QAAA,EAAC;QAAa;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9C,CAAC,eAET7H,OAAA;QAAKwH,SAAS,EAAC,cAAc;QAAAC,QAAA,eAC3BzH,OAAA;UAAQgI,OAAO,EAAElB,YAAa;UAAAW,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGN7H,OAAA;MAAKwH,SAAS,EAAC,SAAS;MAAAC,QAAA,gBACtBzH,OAAA;QAAAyH,QAAA,EAAI;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACxB7H,OAAA;QAAKiI,KAAK,EAAE;UAAEI,UAAU,EAAE,UAAU;UAAEC,SAAS,EAAE;QAAa,CAAE;QAAAb,QAAA,EAAEtG,OAAO,IAAI;MAAG;QAAAuG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAEvF7H,OAAA;QAAKiI,KAAK,EAAE;UAAEM,SAAS,EAAE,EAAE;UAAEC,SAAS,EAAE,mBAAmB;UAAEC,UAAU,EAAE;QAAG,CAAE;QAAAhB,QAAA,gBAC5EzH,OAAA;UAAKiI,KAAK,EAAE;YAAES,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE,eAAe;YAAEC,UAAU,EAAE;UAAS,CAAE;UAAAnB,QAAA,gBACrFzH,OAAA;YAAIiI,KAAK,EAAE;cAAEY,MAAM,EAAE;YAAE,CAAE;YAAApB,QAAA,EAAC;UAA0B;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACzD7H,OAAA;YAAQwH,SAAS,EAAC,aAAa;YAACQ,OAAO,EAAEjC,kBAAmB;YAACgC,QAAQ,EAAE3F,QAAS;YAAAqF,QAAA,EAC7ErF,QAAQ,GAAG,eAAe,GAAG;UAAS;YAAAsF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,EAEL,CAACvF,UAAU,iBACVtC,OAAA;UAAKiI,KAAK,EAAE;YAAEa,KAAK,EAAE,SAAS;YAAEP,SAAS,EAAE,CAAC;YAAEQ,QAAQ,EAAE;UAAG,CAAE;UAAAtB,QAAA,GAAC,+BAC/B,eAAAzH,OAAA;YAAAyH,QAAA,EAAG;UAAO;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,kDAC7C;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACN,EAEAvF,UAAU,iBACTtC,OAAA;UAAKiI,KAAK,EAAE;YAAEM,SAAS,EAAE;UAAG,CAAE;UAAAd,QAAA,gBAC5BzH,OAAA;YAAAyH,QAAA,gBAAGzH,OAAA;cAAAyH,QAAA,EAAQ;YAAG;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACzC,MAAM,CAAC9C,UAAU,CAAC0G,EAAE,CAAC;UAAA;YAAAtB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACnD7H,OAAA;YAAAyH,QAAA,gBAAGzH,OAAA;cAAAyH,QAAA,EAAQ;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,GAAAxH,sBAAA,IAAAC,sBAAA,GAACgC,UAAU,CAACsE,UAAU,cAAAtG,sBAAA,uBAArBA,sBAAA,CAAuB2I,UAAU,cAAA5I,sBAAA,cAAAA,sBAAA,GAAI,GAAG;UAAA;YAAAqH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC3E7H,OAAA;YAAAyH,QAAA,gBACEzH,OAAA;cAAAyH,QAAA,EAAQ;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAAC,GAAG,EAC3B,CAAAtH,kBAAA,GAAA+B,UAAU,CAAC4G,MAAM,cAAA3I,kBAAA,eAAjBA,kBAAA,CAAmBgD,MAAM,GAAGjB,UAAU,CAAC4G,MAAM,CAACC,IAAI,CAAC,KAAK,CAAC,GAAG,SAAS;UAAA;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrE,CAAC,eACJ7H,OAAA;YAAAyH,QAAA,gBACEzH,OAAA;cAAAyH,QAAA,EAAQ;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAAC,GAAG,EAC9B,CAAArH,qBAAA,GAAA8B,UAAU,CAAC8G,WAAW,cAAA5I,qBAAA,eAAtBA,qBAAA,CAAwB+C,MAAM,GAAGjB,UAAU,CAAC8G,WAAW,CAACD,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG;UAAA;YAAAzB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzE,CAAC,EAEH,EAAApH,sBAAA,GAAA6B,UAAU,CAACsE,UAAU,cAAAnG,sBAAA,uBAArBA,sBAAA,CAAuBoG,SAAS,kBAC/B7G,OAAA,CAAAE,SAAA;YAAAuH,QAAA,gBACEzH,OAAA;cAAA0H,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACN7H,OAAA;cAAAyH,QAAA,eAAGzH,OAAA;gBAAAyH,QAAA,EAAQ;cAAmB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAC3C7H,OAAA;cAAKiI,KAAK,EAAE;gBAAEI,UAAU,EAAE;cAAW,CAAE;cAAAZ,QAAA,EAAEnF,UAAU,CAACsE,UAAU,CAACC;YAAS;cAAAa,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC/E7H,OAAA;cAAQwH,SAAS,EAAC,mBAAmB;cAACQ,OAAO,EAAEvB,YAAa;cAAAgB,QAAA,EAAC;YAE7D;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA,eACT,CACH;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACzH,EAAA,CAzYuBD,YAAY;AAAAkJ,EAAA,GAAZlJ,YAAY;AAAA,IAAAkJ,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}