{"ast":null,"code":"var _jsxFileName = \"/Users/gustsantos/Desktop/initucastt/frontend/src/pages/JourneyBuilder.jsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactFlow, { Background, Controls, MiniMap, addEdge, applyEdgeChanges, applyNodeChanges, useEdgesState, useNodesState } from 'reactflow';\nimport 'reactflow/dist/style.css';\n\n// ---------- Helpers\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STORAGE_KEY = 'flows_v1';\nconst sanitizeNodes = list => (list || []).filter(Boolean).map((n, idx) => {\n  var _n$position, _n$position2, _n$id;\n  const x = Number(n === null || n === void 0 ? void 0 : (_n$position = n.position) === null || _n$position === void 0 ? void 0 : _n$position.x);\n  const y = Number(n === null || n === void 0 ? void 0 : (_n$position2 = n.position) === null || _n$position2 === void 0 ? void 0 : _n$position2.y);\n  return {\n    id: String((_n$id = n === null || n === void 0 ? void 0 : n.id) !== null && _n$id !== void 0 ? _n$id : `n_${idx}`),\n    type: (n === null || n === void 0 ? void 0 : n.type) || 'default',\n    data: (n === null || n === void 0 ? void 0 : n.data) || {\n      label: ''\n    },\n    position: Number.isFinite(x) && Number.isFinite(y) ? {\n      x,\n      y\n    } : {\n      x: 100 + idx * 40,\n      y: 100\n    }\n  };\n});\nconst sanitizeEdges = list => (list || []).filter(Boolean).map((e, idx) => {\n  var _e$id;\n  return {\n    id: String((_e$id = e === null || e === void 0 ? void 0 : e.id) !== null && _e$id !== void 0 ? _e$id : `e_${idx}`),\n    source: String(e === null || e === void 0 ? void 0 : e.source),\n    target: String(e === null || e === void 0 ? void 0 : e.target),\n    label: e === null || e === void 0 ? void 0 : e.label,\n    animated: !!(e !== null && e !== void 0 && e.animated)\n  };\n});\nconst sampleFlow = {\n  id: 'flow_welcome',\n  name: 'Welcome + Nudge',\n  nodes: sanitizeNodes([{\n    id: 'start',\n    type: 'input',\n    position: {\n      x: 80,\n      y: 80\n    },\n    data: {\n      label: 'Start'\n    }\n  }, {\n    id: 'msg1',\n    type: 'default',\n    position: {\n      x: 360,\n      y: 70\n    },\n    data: {\n      label: 'Send: Welcome',\n      templateSid: '',\n      channel: 'sms'\n    }\n  }, {\n    id: 'wait1',\n    type: 'default',\n    position: {\n      x: 640,\n      y: 70\n    },\n    data: {\n      label: 'Wait 2 days',\n      wait: {\n        days: 2\n      }\n    }\n  }, {\n    id: 'decide1',\n    type: 'default',\n    position: {\n      x: 920,\n      y: 70\n    },\n    data: {\n      label: 'Replied?'\n    }\n  }, {\n    id: 'msg2',\n    type: 'default',\n    position: {\n      x: 920,\n      y: 220\n    },\n    data: {\n      label: 'Send: Reminder',\n      templateSid: '',\n      channel: 'sms'\n    }\n  }, {\n    id: 'end',\n    type: 'output',\n    position: {\n      x: 1200,\n      y: 70\n    },\n    data: {\n      label: 'End'\n    }\n  }]),\n  edges: sanitizeEdges([{\n    id: 'e1',\n    source: 'start',\n    target: 'msg1',\n    animated: true\n  }, {\n    id: 'e2',\n    source: 'msg1',\n    target: 'wait1'\n  }, {\n    id: 'e3',\n    source: 'wait1',\n    target: 'decide1'\n  }, {\n    id: 'e4',\n    source: 'decide1',\n    target: 'end',\n    label: 'Yes'\n  }, {\n    id: 'e5',\n    source: 'decide1',\n    target: 'msg2',\n    label: 'No'\n  }])\n};\nfunction loadFlows() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify([sampleFlow]));\n      return [sampleFlow];\n    }\n    const parsed = JSON.parse(raw);\n    if (!Array.isArray(parsed) || parsed.length === 0) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify([sampleFlow]));\n      return [sampleFlow];\n    }\n    // sanitize on load\n    return parsed.map(f => ({\n      ...f,\n      nodes: sanitizeNodes(f.nodes),\n      edges: sanitizeEdges(f.edges)\n    }));\n  } catch {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify([sampleFlow]));\n    return [sampleFlow];\n  }\n}\nfunction saveFlow(flow) {\n  const all = loadFlows();\n  const idx = all.findIndex(f => f.id === flow.id);\n  if (idx >= 0) {\n    all[idx] = {\n      ...flow,\n      nodes: sanitizeNodes(flow.nodes),\n      edges: sanitizeEdges(flow.edges)\n    };\n  } else {\n    all.push({\n      ...flow,\n      nodes: sanitizeNodes(flow.nodes),\n      edges: sanitizeEdges(flow.edges)\n    });\n  }\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(all));\n  return all;\n}\n\n// ---------- Component\nexport default function JourneyBuilder() {\n  _s();\n  var _selectedNode$data, _selectedNode$data2, _selectedNode$data$wa, _selectedNode$data3;\n  const [flows, setFlows] = useState(() => loadFlows());\n  const [flowId, setFlowId] = useState(() => {\n    var _flows$;\n    return (_flows$ = flows[0]) === null || _flows$ === void 0 ? void 0 : _flows$.id;\n  });\n  const current = useMemo(() => flows.find(f => f.id === flowId) || flows[0], [flows, flowId]);\n  const [nodes, setNodes, onNodesChange] = useNodesState(sanitizeNodes(current === null || current === void 0 ? void 0 : current.nodes));\n  const [edges, setEdges, onEdgesChange] = useEdgesState(sanitizeEdges(current === null || current === void 0 ? void 0 : current.edges));\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n\n  // reset nodes/edges when trocar o flow\n  useEffect(() => {\n    setNodes(sanitizeNodes(current === null || current === void 0 ? void 0 : current.nodes));\n    setEdges(sanitizeEdges(current === null || current === void 0 ? void 0 : current.edges));\n    setSelectedNodeId(null);\n  }, [current === null || current === void 0 ? void 0 : current.id]); // eslint-disable-line\n\n  const onConnect = useCallback(params => setEdges(eds => addEdge({\n    ...params\n  }, eds)), []);\n  const onSelectionChange = useCallback(({\n    nodes: selNodes\n  }) => {\n    var _selNodes$0$id, _selNodes$;\n    setSelectedNodeId((_selNodes$0$id = selNodes === null || selNodes === void 0 ? void 0 : (_selNodes$ = selNodes[0]) === null || _selNodes$ === void 0 ? void 0 : _selNodes$.id) !== null && _selNodes$0$id !== void 0 ? _selNodes$0$id : null);\n  }, []);\n  const selectedNode = useMemo(() => nodes.find(n => n.id === selectedNodeId), [nodes, selectedNodeId]);\n\n  // ------------- Actions\n  const persist = useCallback(() => {\n    const updated = {\n      ...current,\n      nodes: sanitizeNodes(nodes),\n      edges: sanitizeEdges(edges)\n    };\n    const all = saveFlow(updated);\n    setFlows(all);\n  }, [current, nodes, edges]);\n  const addNode = useCallback(kind => {\n    const base = (selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.position) || {\n      x: 100,\n      y: 100\n    };\n    const newId = `n_${Date.now()}`;\n    const type = kind === 'start' ? 'input' : kind === 'end' ? 'output' : 'default';\n    const label = kind === 'message' ? 'Send: Message' : kind === 'wait' ? 'Wait (days)' : kind === 'decision' ? 'Replied?' : kind === 'end' ? 'End' : 'Node';\n    const newNode = {\n      id: newId,\n      type,\n      position: {\n        x: base.x + 260,\n        y: base.y + (kind === 'decision' ? 120 : 0)\n      },\n      data: {\n        label,\n        ...(kind === 'wait' ? {\n          wait: {\n            days: 1\n          }\n        } : {})\n      }\n    };\n    setNodes(nds => [...nds, newNode]);\n    if (selectedNode) {\n      setEdges(eds => [...eds, {\n        id: `e_${Date.now()}`,\n        source: selectedNode.id,\n        target: newId\n      }]);\n    }\n  }, [selectedNode, setNodes, setEdges]);\n  const updateNodeData = useCallback(patch => {\n    if (!selectedNode) return;\n    setNodes(nds => nds.map(n => n.id === selectedNode.id ? {\n      ...n,\n      data: {\n        ...n.data,\n        ...patch\n      }\n    } : n));\n  }, [selectedNode, setNodes]);\n\n  // ------------- Render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'grid',\n      gridTemplateColumns: '1fr 360px',\n      gap: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Journey Builder (MVP)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8,\n          alignItems: 'center',\n          marginBottom: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontWeight: 600\n          },\n          children: \"Flow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: flowId,\n          onChange: e => setFlowId(e.target.value),\n          style: {\n            padding: 8,\n            minWidth: 320\n          },\n          children: flows.map(f => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: f.id,\n            children: [f.name, \" (\", f.id, \")\"]\n          }, f.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginLeft: 'auto'\n          },\n          onClick: persist,\n          children: \"Salvar Fluxo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: '70vh',\n          border: '1px solid #e5e7eb',\n          borderRadius: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n          nodes: nodes,\n          edges: edges,\n          onNodesChange: changes => setNodes(nds => applyNodeChanges(changes, nds)),\n          onEdgesChange: changes => setEdges(eds => applyEdgeChanges(changes, eds)),\n          onConnect: onConnect,\n          onSelectionChange: onSelectionChange,\n          fitView: true,\n          children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Background, {\n            gap: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8,\n          marginTop: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addNode('message'),\n          children: \"+ Message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addNode('wait'),\n          children: \"+ Wait\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addNode('decision'),\n          children: \"+ Decision\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addNode('end'),\n          children: \"+ End\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: '1px solid #e5e7eb',\n        borderRadius: 8,\n        padding: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Propriedades do N\\xF3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), !selectedNode && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#6b7280'\n        },\n        children: \"Selecione um n\\xF3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 27\n      }, this), selectedNode && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              fontWeight: 600\n            },\n            children: \"Label\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: (selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data = selectedNode.data) === null || _selectedNode$data === void 0 ? void 0 : _selectedNode$data.label) || '',\n            onChange: e => updateNodeData({\n              label: e.target.value\n            }),\n            style: {\n              width: '100%',\n              padding: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), selectedNode.type === 'default' && ((_selectedNode$data2 = selectedNode.data) === null || _selectedNode$data2 === void 0 ? void 0 : _selectedNode$data2.wait) && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              fontWeight: 600\n            },\n            children: \"Wait (days)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: 0,\n            value: (_selectedNode$data$wa = selectedNode.data.wait.days) !== null && _selectedNode$data$wa !== void 0 ? _selectedNode$data$wa : 0,\n            onChange: e => updateNodeData({\n              wait: {\n                days: Number(e.target.value)\n              }\n            }),\n            style: {\n              width: '100%',\n              padding: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 15\n        }, this), selectedNode.type === 'default' && !((_selectedNode$data3 = selectedNode.data) !== null && _selectedNode$data3 !== void 0 && _selectedNode$data3.wait) && selectedNode.id !== 'decide1' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontWeight: 600\n              },\n              children: \"Channel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedNode.data.channel || 'sms',\n              onChange: e => updateNodeData({\n                channel: e.target.value\n              }),\n              style: {\n                width: '100%',\n                padding: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"sms\",\n                children: \"SMS\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"whatsapp\",\n                children: \"WhatsApp\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontWeight: 600\n              },\n              children: \"Template SID (opcional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: selectedNode.data.templateSid || '',\n              onChange: e => updateNodeData({\n                templateSid: e.target.value\n              }),\n              style: {\n                width: '100%',\n                padding: 8\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n}\n_s(JourneyBuilder, \"vtOcsFZ8UTim7VPRVEgxdBhDIto=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c = JourneyBuilder;\nvar _c;\n$RefreshReg$(_c, \"JourneyBuilder\");","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","ReactFlow","Background","Controls","MiniMap","addEdge","applyEdgeChanges","applyNodeChanges","useEdgesState","useNodesState","jsxDEV","_jsxDEV","Fragment","_Fragment","STORAGE_KEY","sanitizeNodes","list","filter","Boolean","map","n","idx","_n$position","_n$position2","_n$id","x","Number","position","y","id","String","type","data","label","isFinite","sanitizeEdges","e","_e$id","source","target","animated","sampleFlow","name","nodes","templateSid","channel","wait","days","edges","loadFlows","raw","localStorage","getItem","setItem","JSON","stringify","parsed","parse","Array","isArray","length","f","saveFlow","flow","all","findIndex","push","JourneyBuilder","_s","_selectedNode$data","_selectedNode$data2","_selectedNode$data$wa","_selectedNode$data3","flows","setFlows","flowId","setFlowId","_flows$","current","find","setNodes","onNodesChange","setEdges","onEdgesChange","selectedNodeId","setSelectedNodeId","onConnect","params","eds","onSelectionChange","selNodes","_selNodes$0$id","_selNodes$","selectedNode","persist","updated","addNode","kind","base","newId","Date","now","newNode","nds","updateNodeData","patch","style","display","gridTemplateColumns","gap","children","fileName","_jsxFileName","lineNumber","columnNumber","alignItems","marginBottom","fontWeight","value","onChange","padding","minWidth","marginLeft","onClick","height","border","borderRadius","changes","fitView","marginTop","color","width","min","_c","$RefreshReg$"],"sources":["/Users/gustsantos/Desktop/initucastt/frontend/src/pages/JourneyBuilder.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactFlow, {\n  Background,\n  Controls,\n  MiniMap,\n  addEdge,\n  applyEdgeChanges,\n  applyNodeChanges,\n  useEdgesState,\n  useNodesState,\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\n\n// ---------- Helpers\nconst STORAGE_KEY = 'flows_v1';\n\nconst sanitizeNodes = (list) =>\n  (list || [])\n    .filter(Boolean)\n    .map((n, idx) => {\n      const x = Number(n?.position?.x);\n      const y = Number(n?.position?.y);\n      return {\n        id: String(n?.id ?? `n_${idx}`),\n        type: n?.type || 'default',\n        data: n?.data || { label: '' },\n        position: Number.isFinite(x) && Number.isFinite(y) ? { x, y } : { x: 100 + idx * 40, y: 100 },\n      };\n    });\n\nconst sanitizeEdges = (list) =>\n  (list || [])\n    .filter(Boolean)\n    .map((e, idx) => ({\n      id: String(e?.id ?? `e_${idx}`),\n      source: String(e?.source),\n      target: String(e?.target),\n      label: e?.label,\n      animated: !!e?.animated,\n    }));\n\nconst sampleFlow = {\n  id: 'flow_welcome',\n  name: 'Welcome + Nudge',\n  nodes: sanitizeNodes([\n    { id: 'start', type: 'input', position: { x: 80, y: 80 }, data: { label: 'Start' } },\n    { id: 'msg1', type: 'default', position: { x: 360, y: 70 }, data: { label: 'Send: Welcome', templateSid: '', channel: 'sms' } },\n    { id: 'wait1', type: 'default', position: { x: 640, y: 70 }, data: { label: 'Wait 2 days', wait: { days: 2 } } },\n    { id: 'decide1', type: 'default', position: { x: 920, y: 70 }, data: { label: 'Replied?' } },\n    { id: 'msg2', type: 'default', position: { x: 920, y: 220 }, data: { label: 'Send: Reminder', templateSid: '', channel: 'sms' } },\n    { id: 'end', type: 'output', position: { x: 1200, y: 70 }, data: { label: 'End' } },\n  ]),\n  edges: sanitizeEdges([\n    { id: 'e1', source: 'start', target: 'msg1', animated: true },\n    { id: 'e2', source: 'msg1', target: 'wait1' },\n    { id: 'e3', source: 'wait1', target: 'decide1' },\n    { id: 'e4', source: 'decide1', target: 'end', label: 'Yes' },\n    { id: 'e5', source: 'decide1', target: 'msg2', label: 'No' },\n  ]),\n};\n\nfunction loadFlows() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (!raw) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify([sampleFlow]));\n      return [sampleFlow];\n    }\n    const parsed = JSON.parse(raw);\n    if (!Array.isArray(parsed) || parsed.length === 0) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify([sampleFlow]));\n      return [sampleFlow];\n    }\n    // sanitize on load\n    return parsed.map((f) => ({\n      ...f,\n      nodes: sanitizeNodes(f.nodes),\n      edges: sanitizeEdges(f.edges),\n    }));\n  } catch {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify([sampleFlow]));\n    return [sampleFlow];\n  }\n}\n\nfunction saveFlow(flow) {\n  const all = loadFlows();\n  const idx = all.findIndex((f) => f.id === flow.id);\n  if (idx >= 0) {\n    all[idx] = {\n      ...flow,\n      nodes: sanitizeNodes(flow.nodes),\n      edges: sanitizeEdges(flow.edges),\n    };\n  } else {\n    all.push({\n      ...flow,\n      nodes: sanitizeNodes(flow.nodes),\n      edges: sanitizeEdges(flow.edges),\n    });\n  }\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(all));\n  return all;\n}\n\n// ---------- Component\nexport default function JourneyBuilder() {\n  const [flows, setFlows] = useState(() => loadFlows());\n  const [flowId, setFlowId] = useState(() => flows[0]?.id);\n  const current = useMemo(() => flows.find((f) => f.id === flowId) || flows[0], [flows, flowId]);\n\n  const [nodes, setNodes, onNodesChange] = useNodesState(sanitizeNodes(current?.nodes));\n  const [edges, setEdges, onEdgesChange] = useEdgesState(sanitizeEdges(current?.edges));\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n\n  // reset nodes/edges when trocar o flow\n  useEffect(() => {\n    setNodes(sanitizeNodes(current?.nodes));\n    setEdges(sanitizeEdges(current?.edges));\n    setSelectedNodeId(null);\n  }, [current?.id]); // eslint-disable-line\n\n  const onConnect = useCallback(\n    (params) => setEdges((eds) => addEdge({ ...params }, eds)),\n    []\n  );\n\n  const onSelectionChange = useCallback(({ nodes: selNodes }) => {\n    setSelectedNodeId(selNodes?.[0]?.id ?? null);\n  }, []);\n\n  const selectedNode = useMemo(() => nodes.find((n) => n.id === selectedNodeId), [nodes, selectedNodeId]);\n\n  // ------------- Actions\n  const persist = useCallback(() => {\n    const updated = {\n      ...current,\n      nodes: sanitizeNodes(nodes),\n      edges: sanitizeEdges(edges),\n    };\n    const all = saveFlow(updated);\n    setFlows(all);\n  }, [current, nodes, edges]);\n\n  const addNode = useCallback(\n    (kind) => {\n      const base = selectedNode?.position || { x: 100, y: 100 };\n      const newId = `n_${Date.now()}`;\n      const type = kind === 'start' ? 'input' : kind === 'end' ? 'output' : 'default';\n      const label =\n        kind === 'message' ? 'Send: Message' :\n        kind === 'wait' ? 'Wait (days)' :\n        kind === 'decision' ? 'Replied?' :\n        kind === 'end' ? 'End' : 'Node';\n\n      const newNode = {\n        id: newId,\n        type,\n        position: { x: base.x + 260, y: base.y + (kind === 'decision' ? 120 : 0) },\n        data: { label, ...(kind === 'wait' ? { wait: { days: 1 } } : {}) },\n      };\n\n      setNodes((nds) => [...nds, newNode]);\n      if (selectedNode) {\n        setEdges((eds) => [...eds, { id: `e_${Date.now()}`, source: selectedNode.id, target: newId }]);\n      }\n    },\n    [selectedNode, setNodes, setEdges]\n  );\n\n  const updateNodeData = useCallback(\n    (patch) => {\n      if (!selectedNode) return;\n      setNodes((nds) =>\n        nds.map((n) => (n.id === selectedNode.id ? { ...n, data: { ...n.data, ...patch } } : n))\n      );\n    },\n    [selectedNode, setNodes]\n  );\n\n  // ------------- Render\n  return (\n    <div style={{ display: 'grid', gridTemplateColumns: '1fr 360px', gap: 16 }}>\n      <div>\n        <h2>Journey Builder (MVP)</h2>\n\n        <div style={{ display: 'flex', gap: 8, alignItems: 'center', marginBottom: 12 }}>\n          <label style={{ fontWeight: 600 }}>Flow</label>\n          <select\n            value={flowId}\n            onChange={(e) => setFlowId(e.target.value)}\n            style={{ padding: 8, minWidth: 320 }}\n          >\n            {flows.map((f) => (\n              <option key={f.id} value={f.id}>\n                {f.name} ({f.id})\n              </option>\n            ))}\n          </select>\n          <button style={{ marginLeft: 'auto' }} onClick={persist}>Salvar Fluxo</button>\n        </div>\n\n        <div style={{ height: '70vh', border: '1px solid #e5e7eb', borderRadius: 8 }}>\n          <ReactFlow\n            nodes={nodes}\n            edges={edges}\n            onNodesChange={(changes) => setNodes((nds) => applyNodeChanges(changes, nds))}\n            onEdgesChange={(changes) => setEdges((eds) => applyEdgeChanges(changes, eds))}\n            onConnect={onConnect}\n            onSelectionChange={onSelectionChange}\n            fitView\n          >\n            <MiniMap />\n            <Controls />\n            <Background gap={16} />\n          </ReactFlow>\n        </div>\n\n        <div style={{ display: 'flex', gap: 8, marginTop: 10 }}>\n          <button onClick={() => addNode('message')}>+ Message</button>\n          <button onClick={() => addNode('wait')}>+ Wait</button>\n          <button onClick={() => addNode('decision')}>+ Decision</button>\n          <button onClick={() => addNode('end')}>+ End</button>\n        </div>\n      </div>\n\n      {/* Painel de Propriedades */}\n      <div style={{ border: '1px solid #e5e7eb', borderRadius: 8, padding: 12 }}>\n        <h3>Propriedades do Nó</h3>\n        {!selectedNode && <div style={{ color: '#6b7280' }}>Selecione um nó</div>}\n        {selectedNode && (\n          <>\n            <div style={{ marginBottom: 8 }}>\n              <label style={{ display: 'block', fontWeight: 600 }}>Label</label>\n              <input\n                type=\"text\"\n                value={selectedNode?.data?.label || ''}\n                onChange={(e) => updateNodeData({ label: e.target.value })}\n                style={{ width: '100%', padding: 8 }}\n              />\n            </div>\n\n            {/* Propriedades específicas */}\n            {selectedNode.type === 'default' && selectedNode.data?.wait && (\n              <div style={{ marginBottom: 8 }}>\n                <label style={{ display: 'block', fontWeight: 600 }}>Wait (days)</label>\n                <input\n                  type=\"number\"\n                  min={0}\n                  value={selectedNode.data.wait.days ?? 0}\n                  onChange={(e) => updateNodeData({ wait: { days: Number(e.target.value) } })}\n                  style={{ width: '100%', padding: 8 }}\n                />\n              </div>\n            )}\n\n            {selectedNode.type === 'default' && !selectedNode.data?.wait && selectedNode.id !== 'decide1' && (\n              <>\n                <div style={{ marginBottom: 8 }}>\n                  <label style={{ display: 'block', fontWeight: 600 }}>Channel</label>\n                  <select\n                    value={selectedNode.data.channel || 'sms'}\n                    onChange={(e) => updateNodeData({ channel: e.target.value })}\n                    style={{ width: '100%', padding: 8 }}\n                  >\n                    <option value=\"sms\">SMS</option>\n                    <option value=\"whatsapp\">WhatsApp</option>\n                  </select>\n                </div>\n                <div style={{ marginBottom: 8 }}>\n                  <label style={{ display: 'block', fontWeight: 600 }}>Template SID (opcional)</label>\n                  <input\n                    type=\"text\"\n                    value={selectedNode.data.templateSid || ''}\n                    onChange={(e) => updateNodeData({ templateSid: e.target.value })}\n                    style={{ width: '100%', padding: 8 }}\n                  />\n                </div>\n              </>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}