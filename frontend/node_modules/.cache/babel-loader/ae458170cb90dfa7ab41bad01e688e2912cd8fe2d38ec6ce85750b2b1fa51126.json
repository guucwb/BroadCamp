{"ast":null,"code":"var _jsxFileName = \"/Users/gustsantos/Desktop/initucastt/frontend/src/pages/TemplatePage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/TemplatePage.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/TemplatePage.css';\n\n/**\n * Página unificada:\n * - Composer + IA (usa /api/ai/suggest-copy)\n * - Preview com substituição de {{1}}, {{2}}...\n * - Validação Meta (usa /api/template-guard/validate-hybrid)\n * - Criação de template (usa /api/templates/create)\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TemplatePage() {\n  _s();\n  var _compliance$ai_summar2, _compliance$ai_summar3, _compliance$issues, _compliance$suggestio, _compliance$ai_summar4;\n  // ========================\n  // Composer (seu estado original)\n  // ========================\n  const [formData, setFormData] = useState({\n    friendlyName: '',\n    language: 'pt_BR',\n    contentType: 'twilio/text',\n    body: '',\n    variables: [],\n    submitForWhatsApp: true,\n    category: 'UTILITY' // usado para criação (pode mapear p/ Meta abaixo)\n  });\n  const [preview, setPreview] = useState('');\n  const [audienceOptions, setAudienceOptions] = useState({\n    region: '',\n    tone: '',\n    offerType: '',\n    psychologicalTrigger: '',\n    ageRange: '',\n    marketNiche: '',\n    customMarketNiche: ''\n  });\n  const [isLoadingAI, setIsLoadingAI] = useState(false);\n  const psychologicalTriggers = ['escassez', 'urgência', 'prova social', 'autoridade', 'reciprocidade'];\n  const ageRanges = ['18 a 24 anos', '25 a 40 anos', '41 a 60 anos', '60+'];\n  const offerTypes = ['desconto exclusivo', 'frete grátis', 'combo especial', 'brinde na compra', 'cobrança'];\n  const marketNiches = ['cosméticos naturais', 'fitness', 'educação online', 'moda sustentável', 'tecnologia', 'outro'];\n\n  // ========================\n  // Compliance (Meta) embutido\n  // ========================\n  const [checking, setChecking] = useState(false);\n  const [compliance, setCompliance] = useState(null); // { ok, issues, suggestions, ai_summary: { risk_score, rewritten } }\n\n  // Extrai variáveis com formato {{1}}, {{2}}...\n  const extractVariables = bodyText => {\n    const regex = /\\{\\{(\\d+)\\}\\}/g;\n    const numbers = new Set();\n    let match;\n    while ((match = regex.exec(bodyText)) !== null) {\n      numbers.add(match[1]);\n    }\n    const max = Math.max(0, ...Array.from(numbers).map(n => parseInt(n, 10)));\n    return Array.from({\n      length: max\n    }, (_, i) => formData.variables[i] || '');\n  };\n\n  // Sempre que o body muda, refaz a lista de variáveis\n  useEffect(() => {\n    const vars = extractVariables(formData.body);\n    setFormData(prev => ({\n      ...prev,\n      variables: vars\n    }));\n  }, [formData.body]); // eslint-disable-line\n\n  // Atualiza preview quando body/variáveis mudam\n  useEffect(() => {\n    let msg = formData.body;\n    formData.variables.forEach((val, i) => {\n      msg = msg.replaceAll(`{{${i + 1}}}`, val || `{{${i + 1}}}`);\n    });\n    setPreview(msg);\n  }, [formData.body, formData.variables]);\n\n  // Handlers\n  const handleVariableChange = (index, value) => {\n    const updated = [...formData.variables];\n    updated[index] = value;\n    setFormData(prev => ({\n      ...prev,\n      variables: updated\n    }));\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const handleAudienceChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setAudienceOptions(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === 'region') {\n      if (value === 'br') setFormData(prev => ({\n        ...prev,\n        language: 'pt_BR'\n      }));else if (['co', 'mx', 'pe', 'ar', 'cl'].includes(value)) setFormData(prev => ({\n        ...prev,\n        language: 'es_MX'\n      }));else setFormData(prev => ({\n        ...prev,\n        language: 'en_US'\n      }));\n    }\n  };\n\n  // ========================\n  // IA – gera sugestão\n  // ========================\n  const handleSuggestWithAI = async () => {\n    setIsLoadingAI(true);\n    try {\n      var _res$data;\n      const payload = {\n        ...audienceOptions,\n        marketNiche: audienceOptions.marketNiche === 'outro' ? audienceOptions.customMarketNiche : audienceOptions.marketNiche\n      };\n      const res = await axios.post('/api/ai/suggest-copy', payload);\n      const suggestion = (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.suggestion) || '';\n      if (suggestion) {\n        setFormData(prev => ({\n          ...prev,\n          body: suggestion\n        }));\n      } else {\n        alert('IA não retornou sugestão.');\n      }\n    } catch (err) {\n      alert('Erro ao gerar sugestão com IA');\n    } finally {\n      setIsLoadingAI(false);\n    }\n  };\n\n  // ========================\n  // Compliance – valida Meta\n  // ========================\n  // Mapa simples para categorias Meta do seu guard: MARKETING | UTILITY | AUTH\n  const mapToMetaCategory = cat => {\n    const up = String(cat || '').toUpperCase();\n    if (up === 'MARKETING') return 'MARKETING';\n    if (up === 'UTILITY' || up === 'TRANSACTIONAL') return 'UTILITY';\n    if (up === 'AUTH' || up === 'AUTHENTICATION') return 'AUTH';\n    return 'MARKETING';\n    // Ajuste se seu /validate-hybrid espera outro set.\n  };\n  const validateCompliance = async () => {\n    var _formData$body;\n    if (!((_formData$body = formData.body) !== null && _formData$body !== void 0 && _formData$body.trim())) {\n      alert('Escreva o corpo do template antes de validar.');\n      return;\n    }\n    setChecking(true);\n    setCompliance(null);\n    try {\n      const payload = {\n        category: mapToMetaCategory(formData.category),\n        language: formData.language || 'pt_BR',\n        body: formData.body,\n        audience: audienceOptions.marketNiche || audienceOptions.region || 'leads',\n        tone: audienceOptions.tone || 'neutral',\n        offerType: audienceOptions.offerType || '',\n        triggers: audienceOptions.psychologicalTrigger ? [audienceOptions.psychologicalTrigger] : []\n      };\n      const res = await fetch('/api/template-guard/validate-hybrid', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const json = await res.json();\n      setCompliance(json);\n    } catch (e) {\n      alert('Falha ao validar template.');\n    } finally {\n      setChecking(false);\n    }\n  };\n  const applyRewrite = () => {\n    var _compliance$ai_summar;\n    const txt = compliance === null || compliance === void 0 ? void 0 : (_compliance$ai_summar = compliance.ai_summary) === null || _compliance$ai_summar === void 0 ? void 0 : _compliance$ai_summar.rewritten;\n    if (txt) setFormData(prev => ({\n      ...prev,\n      body: txt\n    }));\n  };\n\n  // ========================\n  // Criar Template\n  // ========================\n  const handleSubmit = async () => {\n    const variableMap = {};\n    formData.variables.forEach((val, idx) => {\n      variableMap[(idx + 1).toString()] = val;\n    });\n    const payload = {\n      name: formData.friendlyName,\n      language: formData.language,\n      variables: variableMap,\n      types: {\n        [formData.contentType]: {\n          body: formData.body\n        }\n      },\n      autoSubmit: formData.submitForWhatsApp,\n      category: String(formData.category || '').toUpperCase()\n    };\n    try {\n      await axios.post('/api/templates/create', payload);\n      alert('Template criado com sucesso!');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert('Erro ao criar template: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message));\n    }\n  };\n\n  // ========================\n  // UI\n  // ========================\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Criar Template\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Friendly Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"friendlyName\",\n        value: formData.friendlyName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Language\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"language\",\n        value: formData.language,\n        onChange: handleChange,\n        disabled: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Content Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"contentType\",\n        value: formData.contentType,\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"twilio/text\",\n          children: \"twilio/text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"twilio/media\",\n          children: \"twilio/media\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"twilio/template\",\n          children: \"twilio/template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Body\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"body\",\n        value: formData.body,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), formData.variables.map((val, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: `Valor da variável ${index + 1}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: val,\n          onChange: e => handleVariableChange(index, e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSuggestWithAI,\n        style: {\n          backgroundColor: '#007bff'\n        },\n        disabled: isLoadingAI,\n        children: isLoadingAI ? 'Gerando...' : 'Gerar com IA'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Regi\\xE3o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"region\",\n        value: audienceOptions.region,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"br\",\n          children: \"Brasil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"co\",\n          children: \"Col\\xF4mbia\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"mx\",\n          children: \"M\\xE9xico\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"pe\",\n          children: \"Peru\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"ar\",\n          children: \"Argentina\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"cl\",\n          children: \"Chile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"us\",\n          children: \"Estados Unidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"intl\",\n          children: \"Outro / Internacional\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tom\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"tone\",\n        value: audienceOptions.tone,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"informal\",\n          children: \"Informal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"urgente\",\n          children: \"Urgente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"profissional\",\n          children: \"Profissional\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"amistoso\",\n          children: \"Amistoso\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"s\\xE9rio\",\n          children: \"S\\xE9rio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tipo de Oferta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"offerType\",\n        value: audienceOptions.offerType,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), offerTypes.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Gatilho Psicol\\xF3gico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"psychologicalTrigger\",\n        value: audienceOptions.psychologicalTrigger,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), psychologicalTriggers.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Faixa Et\\xE1ria\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"ageRange\",\n        value: audienceOptions.ageRange,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), ageRanges.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nicho de Mercado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"marketNiche\",\n        value: audienceOptions.marketNiche,\n        onChange: handleAudienceChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"--\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), marketNiches.map((opt, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: opt,\n          children: opt\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), audienceOptions.marketNiche === 'outro' && /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"customMarketNiche\",\n        placeholder: \"Descreva seu nicho\",\n        value: audienceOptions.customMarketNiche,\n        onChange: handleAudienceChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          name: \"submitForWhatsApp\",\n          checked: formData.submitForWhatsApp,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), \" Submeter para aprova\\xE7\\xE3o no WhatsApp\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Categoria\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"category\",\n        value: formData.category,\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"UTILITY\",\n          children: \"Utility\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"MARKETING\",\n          children: \"Marketing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"TRANSACTIONAL\",\n          children: \"Transactional\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          children: \"Criar Template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Message Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: 'pre-wrap',\n          wordBreak: 'break-word'\n        },\n        children: preview || '—'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 16,\n          borderTop: '1px solid #e5e7eb',\n          paddingTop: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              margin: 0\n            },\n            children: \"Template Compliance (Meta)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-btn\",\n            onClick: validateCompliance,\n            disabled: checking,\n            children: checking ? 'Analisando...' : 'Validar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), !compliance && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#64748b',\n            marginTop: 8,\n            fontSize: 14\n          },\n          children: [\"Preencha o corpo e clique em \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Validar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 44\n          }, this), \" para ver riscos, issues e reescrita sugerida.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this), compliance && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"OK?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 18\n            }, this), \" \", String(compliance.ok)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"AI Risk:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 18\n            }, this), \" \", (_compliance$ai_summar2 = (_compliance$ai_summar3 = compliance.ai_summary) === null || _compliance$ai_summar3 === void 0 ? void 0 : _compliance$ai_summar3.risk_score) !== null && _compliance$ai_summar2 !== void 0 ? _compliance$ai_summar2 : '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Issues:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 17\n            }, this), ' ', (_compliance$issues = compliance.issues) !== null && _compliance$issues !== void 0 && _compliance$issues.length ? compliance.issues.join(' | ') : 'nenhuma']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Sugest\\xF5es:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), ' ', (_compliance$suggestio = compliance.suggestions) !== null && _compliance$suggestio !== void 0 && _compliance$suggestio.length ? compliance.suggestions.join(' | ') : '—']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this), ((_compliance$ai_summar4 = compliance.ai_summary) === null || _compliance$ai_summar4 === void 0 ? void 0 : _compliance$ai_summar4.rewritten) && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Reescrita Sugerida:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n              style: {\n                whiteSpace: 'pre-wrap'\n              },\n              children: compliance.ai_summary.rewritten\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"primary-btn small\",\n              onClick: applyRewrite,\n              children: \"Aplicar reescrita\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n}\n_s(TemplatePage, \"39cZSjskpLt8RSpJrThjJ/AlGiQ=\");\n_c = TemplatePage;\nvar _c;\n$RefreshReg$(_c, \"TemplatePage\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","TemplatePage","_s","_compliance$ai_summar2","_compliance$ai_summar3","_compliance$issues","_compliance$suggestio","_compliance$ai_summar4","formData","setFormData","friendlyName","language","contentType","body","variables","submitForWhatsApp","category","preview","setPreview","audienceOptions","setAudienceOptions","region","tone","offerType","psychologicalTrigger","ageRange","marketNiche","customMarketNiche","isLoadingAI","setIsLoadingAI","psychologicalTriggers","ageRanges","offerTypes","marketNiches","checking","setChecking","compliance","setCompliance","extractVariables","bodyText","regex","numbers","Set","match","exec","add","max","Math","Array","from","map","n","parseInt","length","_","i","vars","prev","msg","forEach","val","replaceAll","handleVariableChange","index","value","updated","handleChange","e","name","type","checked","target","handleAudienceChange","includes","handleSuggestWithAI","_res$data","payload","res","post","suggestion","data","alert","err","mapToMetaCategory","cat","up","String","toUpperCase","validateCompliance","_formData$body","trim","audience","triggers","fetch","method","headers","JSON","stringify","json","applyRewrite","_compliance$ai_summar","txt","ai_summary","rewritten","handleSubmit","variableMap","idx","toString","types","autoSubmit","_err$response","_err$response$data","response","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","disabled","onClick","style","backgroundColor","opt","placeholder","whiteSpace","wordBreak","marginTop","borderTop","paddingTop","display","justifyContent","alignItems","margin","color","fontSize","ok","risk_score","issues","join","suggestions","_c","$RefreshReg$"],"sources":["/Users/gustsantos/Desktop/initucastt/frontend/src/pages/TemplatePage.js"],"sourcesContent":["// frontend/src/pages/TemplatePage.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport '../styles/TemplatePage.css';\n\n/**\n * Página unificada:\n * - Composer + IA (usa /api/ai/suggest-copy)\n * - Preview com substituição de {{1}}, {{2}}...\n * - Validação Meta (usa /api/template-guard/validate-hybrid)\n * - Criação de template (usa /api/templates/create)\n */\nexport default function TemplatePage() {\n  // ========================\n  // Composer (seu estado original)\n  // ========================\n  const [formData, setFormData] = useState({\n    friendlyName: '',\n    language: 'pt_BR',\n    contentType: 'twilio/text',\n    body: '',\n    variables: [],\n    submitForWhatsApp: true,\n    category: 'UTILITY', // usado para criação (pode mapear p/ Meta abaixo)\n  });\n\n  const [preview, setPreview] = useState('');\n  const [audienceOptions, setAudienceOptions] = useState({\n    region: '',\n    tone: '',\n    offerType: '',\n    psychologicalTrigger: '',\n    ageRange: '',\n    marketNiche: '',\n    customMarketNiche: ''\n  });\n\n  const [isLoadingAI, setIsLoadingAI] = useState(false);\n\n  const psychologicalTriggers = ['escassez', 'urgência', 'prova social', 'autoridade', 'reciprocidade'];\n  const ageRanges = ['18 a 24 anos', '25 a 40 anos', '41 a 60 anos', '60+'];\n  const offerTypes = ['desconto exclusivo', 'frete grátis', 'combo especial', 'brinde na compra', 'cobrança'];\n  const marketNiches = ['cosméticos naturais', 'fitness', 'educação online', 'moda sustentável', 'tecnologia', 'outro'];\n\n  // ========================\n  // Compliance (Meta) embutido\n  // ========================\n  const [checking, setChecking] = useState(false);\n  const [compliance, setCompliance] = useState(null); // { ok, issues, suggestions, ai_summary: { risk_score, rewritten } }\n\n  // Extrai variáveis com formato {{1}}, {{2}}...\n  const extractVariables = (bodyText) => {\n    const regex = /\\{\\{(\\d+)\\}\\}/g;\n    const numbers = new Set();\n    let match;\n    while ((match = regex.exec(bodyText)) !== null) {\n      numbers.add(match[1]);\n    }\n    const max = Math.max(0, ...Array.from(numbers).map(n => parseInt(n, 10)));\n    return Array.from({ length: max }, (_, i) => formData.variables[i] || '');\n  };\n\n  // Sempre que o body muda, refaz a lista de variáveis\n  useEffect(() => {\n    const vars = extractVariables(formData.body);\n    setFormData(prev => ({ ...prev, variables: vars }));\n  }, [formData.body]); // eslint-disable-line\n\n  // Atualiza preview quando body/variáveis mudam\n  useEffect(() => {\n    let msg = formData.body;\n    formData.variables.forEach((val, i) => {\n      msg = msg.replaceAll(`{{${i + 1}}}`, val || `{{${i + 1}}}`);\n    });\n    setPreview(msg);\n  }, [formData.body, formData.variables]);\n\n  // Handlers\n  const handleVariableChange = (index, value) => {\n    const updated = [...formData.variables];\n    updated[index] = value;\n    setFormData(prev => ({ ...prev, variables: updated }));\n  };\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleAudienceChange = (e) => {\n    const { name, value } = e.target;\n    setAudienceOptions(prev => ({ ...prev, [name]: value }));\n\n    if (name === 'region') {\n      if (value === 'br') setFormData(prev => ({ ...prev, language: 'pt_BR' }));\n      else if (['co', 'mx', 'pe', 'ar', 'cl'].includes(value)) setFormData(prev => ({ ...prev, language: 'es_MX' }));\n      else setFormData(prev => ({ ...prev, language: 'en_US' }));\n    }\n  };\n\n  // ========================\n  // IA – gera sugestão\n  // ========================\n  const handleSuggestWithAI = async () => {\n    setIsLoadingAI(true);\n    try {\n      const payload = {\n        ...audienceOptions,\n        marketNiche:\n          audienceOptions.marketNiche === 'outro'\n            ? audienceOptions.customMarketNiche\n            : audienceOptions.marketNiche\n      };\n      const res = await axios.post('/api/ai/suggest-copy', payload);\n      const suggestion = res?.data?.suggestion || '';\n      if (suggestion) {\n        setFormData(prev => ({ ...prev, body: suggestion }));\n      } else {\n        alert('IA não retornou sugestão.');\n      }\n    } catch (err) {\n      alert('Erro ao gerar sugestão com IA');\n    } finally {\n      setIsLoadingAI(false);\n    }\n  };\n\n  // ========================\n  // Compliance – valida Meta\n  // ========================\n  // Mapa simples para categorias Meta do seu guard: MARKETING | UTILITY | AUTH\n  const mapToMetaCategory = (cat) => {\n    const up = String(cat || '').toUpperCase();\n    if (up === 'MARKETING') return 'MARKETING';\n    if (up === 'UTILITY' || up === 'TRANSACTIONAL') return 'UTILITY';\n    if (up === 'AUTH' || up === 'AUTHENTICATION') return 'AUTH';\n    return 'MARKETING';\n    // Ajuste se seu /validate-hybrid espera outro set.\n  };\n\n  const validateCompliance = async () => {\n    if (!formData.body?.trim()) {\n      alert('Escreva o corpo do template antes de validar.');\n      return;\n    }\n    setChecking(true);\n    setCompliance(null);\n    try {\n      const payload = {\n        category: mapToMetaCategory(formData.category),\n        language: formData.language || 'pt_BR',\n        body: formData.body,\n        audience: audienceOptions.marketNiche || audienceOptions.region || 'leads',\n        tone: audienceOptions.tone || 'neutral',\n        offerType: audienceOptions.offerType || '',\n        triggers: audienceOptions.psychologicalTrigger\n          ? [audienceOptions.psychologicalTrigger]\n          : []\n      };\n      const res = await fetch('/api/template-guard/validate-hybrid', {\n        method: 'POST',\n        headers: { 'Content-Type':'application/json' },\n        body: JSON.stringify(payload)\n      });\n      const json = await res.json();\n      setCompliance(json);\n    } catch (e) {\n      alert('Falha ao validar template.');\n    } finally {\n      setChecking(false);\n    }\n  };\n\n  const applyRewrite = () => {\n    const txt = compliance?.ai_summary?.rewritten;\n    if (txt) setFormData(prev => ({ ...prev, body: txt }));\n  };\n\n  // ========================\n  // Criar Template\n  // ========================\n  const handleSubmit = async () => {\n    const variableMap = {};\n    formData.variables.forEach((val, idx) => {\n      variableMap[(idx + 1).toString()] = val;\n    });\n\n    const payload = {\n      name: formData.friendlyName,\n      language: formData.language,\n      variables: variableMap,\n      types: {\n        [formData.contentType]: { body: formData.body }\n      },\n      autoSubmit: formData.submitForWhatsApp,\n      category: String(formData.category || '').toUpperCase()\n    };\n\n    try {\n      await axios.post('/api/templates/create', payload);\n      alert('Template criado com sucesso!');\n    } catch (err) {\n      alert('Erro ao criar template: ' + (err.response?.data?.message || err.message));\n    }\n  };\n\n  // ========================\n  // UI\n  // ========================\n  return (\n    <div className=\"container\">\n      {/* Coluna esquerda: Composer */}\n      <div className=\"form\">\n        <h2>Criar Template</h2>\n\n        <label>Friendly Name</label>\n        <input name=\"friendlyName\" value={formData.friendlyName} onChange={handleChange} />\n\n        <label>Language</label>\n        <input name=\"language\" value={formData.language} onChange={handleChange} disabled />\n\n        <label>Content Type</label>\n        <select name=\"contentType\" value={formData.contentType} onChange={handleChange}>\n          <option value=\"twilio/text\">twilio/text</option>\n          <option value=\"twilio/media\">twilio/media</option>\n          <option value=\"twilio/template\">twilio/template</option>\n        </select>\n\n        <label>Body</label>\n        <textarea name=\"body\" value={formData.body} onChange={handleChange} />\n\n        {/* variáveis */}\n        {formData.variables.map((val, index) => (\n          <div key={index}>\n            <label>{`Valor da variável ${index + 1}`}</label>\n            <input value={val} onChange={e => handleVariableChange(index, e.target.value)} />\n          </div>\n        ))}\n\n        <button\n          onClick={handleSuggestWithAI}\n          style={{ backgroundColor: '#007bff' }}\n          disabled={isLoadingAI}\n        >\n          {isLoadingAI ? 'Gerando...' : 'Gerar com IA'}\n        </button>\n\n        {/* Público/tonalidade/segmentação que alimentam IA + Compliance */}\n        <label>Região</label>\n        <select name=\"region\" value={audienceOptions.region} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          <option value=\"br\">Brasil</option>\n          <option value=\"co\">Colômbia</option>\n          <option value=\"mx\">México</option>\n          <option value=\"pe\">Peru</option>\n          <option value=\"ar\">Argentina</option>\n          <option value=\"cl\">Chile</option>\n          <option value=\"us\">Estados Unidos</option>\n          <option value=\"intl\">Outro / Internacional</option>\n        </select>\n\n        <label>Tom</label>\n        <select name=\"tone\" value={audienceOptions.tone} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          <option value=\"informal\">Informal</option>\n          <option value=\"urgente\">Urgente</option>\n          <option value=\"profissional\">Profissional</option>\n          <option value=\"amistoso\">Amistoso</option>\n          <option value=\"sério\">Sério</option>\n        </select>\n\n        <label>Tipo de Oferta</label>\n        <select name=\"offerType\" value={audienceOptions.offerType} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          {offerTypes.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        <label>Gatilho Psicológico</label>\n        <select\n          name=\"psychologicalTrigger\"\n          value={audienceOptions.psychologicalTrigger}\n          onChange={handleAudienceChange}\n        >\n          <option value=\"\">--</option>\n          {psychologicalTriggers.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        <label>Faixa Etária</label>\n        <select name=\"ageRange\" value={audienceOptions.ageRange} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          {ageRanges.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        <label>Nicho de Mercado</label>\n        <select name=\"marketNiche\" value={audienceOptions.marketNiche} onChange={handleAudienceChange}>\n          <option value=\"\">--</option>\n          {marketNiches.map((opt, i) => (\n            <option key={i} value={opt}>{opt}</option>\n          ))}\n        </select>\n\n        {audienceOptions.marketNiche === 'outro' && (\n          <input\n            name=\"customMarketNiche\"\n            placeholder=\"Descreva seu nicho\"\n            value={audienceOptions.customMarketNiche}\n            onChange={handleAudienceChange}\n          />\n        )}\n\n        <label>\n          <input\n            type=\"checkbox\"\n            name=\"submitForWhatsApp\"\n            checked={formData.submitForWhatsApp}\n            onChange={handleChange}\n          /> Submeter para aprovação no WhatsApp\n        </label>\n\n        <label>Categoria</label>\n        <select name=\"category\" value={formData.category} onChange={handleChange}>\n          <option value=\"UTILITY\">Utility</option>\n          <option value=\"MARKETING\">Marketing</option>\n          <option value=\"TRANSACTIONAL\">Transactional</option>\n        </select>\n\n        <div className=\"button-group\">\n          <button onClick={handleSubmit}>Criar Template</button>\n        </div>\n      </div>\n\n      {/* Coluna direita: Preview + Compliance */}\n      <div className=\"preview\">\n        <h4>Message Preview</h4>\n        <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>{preview || '—'}</pre>\n\n        <div style={{ marginTop: 16, borderTop: '1px solid #e5e7eb', paddingTop: 12 }}>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <h4 style={{ margin: 0 }}>Template Compliance (Meta)</h4>\n            <button className=\"primary-btn\" onClick={validateCompliance} disabled={checking}>\n              {checking ? 'Analisando...' : 'Validar'}\n            </button>\n          </div>\n\n          {!compliance && (\n            <div style={{ color: '#64748b', marginTop: 8, fontSize: 14 }}>\n              Preencha o corpo e clique em <b>Validar</b> para ver riscos, issues e reescrita sugerida.\n            </div>\n          )}\n\n          {compliance && (\n            <div style={{ marginTop: 12 }}>\n              <p><strong>OK?</strong> {String(compliance.ok)}</p>\n              <p><strong>AI Risk:</strong> {compliance.ai_summary?.risk_score ?? '-'}</p>\n              <p>\n                <strong>Issues:</strong>{' '}\n                {compliance.issues?.length ? compliance.issues.join(' | ') : 'nenhuma'}\n              </p>\n              <p>\n                <strong>Sugestões:</strong>{' '}\n                {compliance.suggestions?.length ? compliance.suggestions.join(' | ') : '—'}\n              </p>\n\n              {compliance.ai_summary?.rewritten && (\n                <>\n                  <hr />\n                  <p><strong>Reescrita Sugerida:</strong></p>\n                  <pre style={{ whiteSpace: 'pre-wrap' }}>{compliance.ai_summary.rewritten}</pre>\n                  <button className=\"primary-btn small\" onClick={applyRewrite}>\n                    Aplicar reescrita\n                  </button>\n                </>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}