{"ast":null,"code":"var _jsxFileName = \"/Users/gustsantos/Desktop/initucastt/frontend/src/pages/JourneyBuilder.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/pages/JourneyBuilder.jsx\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactFlow, { addEdge, applyEdgeChanges, applyNodeChanges, Background, Controls, MiniMap, Position, Handle } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STORAGE_KEY = 'flows_v2';\nconst CURRENT_KEY = 'flows_current_v2';\n\n/* ------------------ Persistência e utils ------------------ */\nconst sanitizeNodes = list => (list || []).filter(Boolean).map((n, i) => {\n  var _n$position, _n$position2, _n$id;\n  const x = Number(n === null || n === void 0 ? void 0 : (_n$position = n.position) === null || _n$position === void 0 ? void 0 : _n$position.x);\n  const y = Number(n === null || n === void 0 ? void 0 : (_n$position2 = n.position) === null || _n$position2 === void 0 ? void 0 : _n$position2.y);\n  return {\n    id: String((_n$id = n === null || n === void 0 ? void 0 : n.id) !== null && _n$id !== void 0 ? _n$id : `n_${i}`),\n    type: (n === null || n === void 0 ? void 0 : n.type) || 'message',\n    data: (n === null || n === void 0 ? void 0 : n.data) || {\n      label: 'Step'\n    },\n    position: Number.isFinite(x) && Number.isFinite(y) ? {\n      x,\n      y\n    } : {\n      x: 140 + i % 4 * 220,\n      y: 140 + Math.floor(i / 4) * 160\n    },\n    draggable: true,\n    selectable: true\n  };\n});\nconst sanitizeEdges = list => (list || []).filter(Boolean).map((e, i) => {\n  var _e$id;\n  return {\n    id: String((_e$id = e === null || e === void 0 ? void 0 : e.id) !== null && _e$id !== void 0 ? _e$id : `e_${i}`),\n    source: String(e === null || e === void 0 ? void 0 : e.source),\n    target: String(e === null || e === void 0 ? void 0 : e.target),\n    animated: !!(e !== null && e !== void 0 && e.animated),\n    label: e === null || e === void 0 ? void 0 : e.label,\n    selectable: true\n  };\n});\nfunction loadFlows() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    const arr = raw ? JSON.parse(raw) : [];\n    if (!Array.isArray(arr)) return [];\n    return arr.map(f => ({\n      ...f,\n      nodes: sanitizeNodes(f.nodes),\n      edges: sanitizeEdges(f.edges)\n    }));\n  } catch {\n    return [];\n  }\n}\nfunction saveFlows(flows) {\n  const safe = (flows || []).map(f => ({\n    ...f,\n    nodes: sanitizeNodes(f.nodes),\n    edges: sanitizeEdges(f.edges)\n  }));\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(safe));\n  return safe;\n}\nconst ensureStartEnd = flow => {\n  if (!flow) return flow;\n  const hasStart = (flow.nodes || []).some(n => n.type === 'start');\n  const hasEnd = (flow.nodes || []).some(n => n.type === 'end');\n  const extra = [];\n  if (!hasStart) extra.push({\n    id: `start_${Date.now()}`,\n    type: 'start',\n    data: {\n      label: 'Start'\n    },\n    position: {\n      x: 160,\n      y: 100\n    }\n  });\n  if (!hasEnd) extra.push({\n    id: `end_${Date.now() + 1}`,\n    type: 'end',\n    data: {\n      label: 'End'\n    },\n    position: {\n      x: 700,\n      y: 100\n    }\n  });\n  return extra.length ? {\n    ...flow,\n    nodes: [...(flow.nodes || []), ...extra]\n  } : flow;\n};\n\n// flatten JSON → { \"a.b[0].c\": value }\nfunction flattenJSON(value, path = '') {\n  const out = {};\n  const set = (p, v) => {\n    if (p) out[p] = v;\n  };\n  if (Array.isArray(value)) {\n    value.forEach((v, i) => Object.assign(out, flattenJSON(v, path ? `${path}.${i}` : `${i}`)));\n  } else if (value && typeof value === 'object') {\n    for (const [k, v] of Object.entries(value)) {\n      const p = path ? `${path}.${k}` : k;\n      Object.assign(out, flattenJSON(v, p));\n    }\n  } else {\n    set(path, value);\n  }\n  return out;\n}\n\n/* ---------------------- Estilos dos handles ---------------------- */\nconst HANDLE_COMMON = {\n  width: 16,\n  height: 16,\n  borderRadius: '50%',\n  border: '2px solid #fff',\n  boxShadow: '0 0 0 2px rgba(0,0,0,0.07)',\n  cursor: 'crosshair'\n};\nconst HANDLE_SRC = {\n  ...HANDLE_COMMON,\n  background: '#3b82f6'\n};\nconst HANDLE_TGT = {\n  ...HANDLE_COMMON,\n  background: '#94a3b8'\n};\nconst HANDLE_START = {\n  ...HANDLE_COMMON,\n  background: '#22c55e'\n};\nconst HANDLE_END = {\n  ...HANDLE_COMMON,\n  background: '#ef4444'\n};\n\n/* ---------------------- Node Components ---------------------- */\nconst card = {\n  padding: 12,\n  border: '1px solid #e5e7eb',\n  borderRadius: 10,\n  background: '#fff',\n  minWidth: 220,\n  boxShadow: '0 1px 2px rgba(0,0,0,0.06)',\n  textAlign: 'center'\n};\nfunction StartNode() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      ...card\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 800,\n        fontSize: 18\n      },\n      children: \"Start\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#6b7280'\n      },\n      children: \"in\\xEDcio do fluxo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"source\",\n      position: Position.Right,\n      style: HANDLE_START\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}\n_c = StartNode;\nfunction EndNode() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      ...card\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 800,\n        fontSize: 18\n      },\n      children: \"End\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#6b7280'\n      },\n      children: \"t\\xE9rmino do fluxo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"target\",\n      position: Position.Left,\n      style: HANDLE_END\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n}\n_c2 = EndNode;\nfunction MessageNode({\n  data\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      ...card,\n      textAlign: 'left'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 700,\n        fontSize: 16,\n        marginBottom: 6\n      },\n      children: (data === null || data === void 0 ? void 0 : data.label) || 'Message'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#6b7280'\n      },\n      children: [\"Template: \", (data === null || data === void 0 ? void 0 : data.templateName) || '—']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"target\",\n      position: Position.Left,\n      style: HANDLE_TGT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"source\",\n      position: Position.Right,\n      style: HANDLE_SRC\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n_c3 = MessageNode;\nfunction ApiNode({\n  data\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      ...card,\n      textAlign: 'left'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 700,\n        fontSize: 16,\n        marginBottom: 6\n      },\n      children: (data === null || data === void 0 ? void 0 : data.label) || 'API Call'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#6b7280'\n      },\n      children: [(data === null || data === void 0 ? void 0 : data.method) || 'GET', \" \", data !== null && data !== void 0 && data.url ? (() => {\n        try {\n          return new URL(data.url).hostname;\n        } catch {\n          return '';\n        }\n      })() : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"target\",\n      position: Position.Left,\n      style: HANDLE_TGT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"source\",\n      position: Position.Right,\n      style: HANDLE_SRC\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n}\n_c4 = ApiNode;\nfunction CodeNode({\n  data\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      ...card,\n      textAlign: 'left'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 700,\n        fontSize: 16,\n        marginBottom: 6\n      },\n      children: (data === null || data === void 0 ? void 0 : data.label) || 'Code (JS)'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#6b7280'\n      },\n      children: [\"retorna vari\\xE1veis de \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: [\"return \", '{ ... }']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"target\",\n      position: Position.Left,\n      style: HANDLE_TGT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Handle, {\n      type: \"source\",\n      position: Position.Right,\n      style: HANDLE_SRC\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n}\n_c5 = CodeNode;\nconst nodeTypes = {\n  start: StartNode,\n  end: EndNode,\n  message: MessageNode,\n  api: ApiNode,\n  code: CodeNode\n};\n\n/* ---------------------- Página ---------------------- */\nexport default function JourneyBuilder() {\n  _s();\n  var _selectedNode$data2, _selectedNode$data3, _selectedNode$data4, _selectedNode$data5, _selectedNode$data6, _selectedNode$data$he, _selectedNode$data7, _selectedNode$data$bo, _selectedNode$data8, _apiTest$suggestions, _selectedNode$data0, _selectedNode$data13;\n  const [flows, setFlows] = useState(() => loadFlows());\n  const [flowId, setFlowId] = useState(() => {\n    var _list$;\n    const curr = localStorage.getItem(CURRENT_KEY);\n    const list = loadFlows();\n    return curr && list.some(f => f.id === curr) ? curr : ((_list$ = list[0]) === null || _list$ === void 0 ? void 0 : _list$.id) || '';\n  });\n  const currentFlow = useMemo(() => ensureStartEnd(flows.find(f => f.id === flowId)), [flows, flowId]);\n  const [nodes, setNodes] = useState(() => sanitizeNodes((currentFlow === null || currentFlow === void 0 ? void 0 : currentFlow.nodes) || []));\n  const [edges, setEdges] = useState(() => sanitizeEdges((currentFlow === null || currentFlow === void 0 ? void 0 : currentFlow.edges) || []));\n  const [selection, setSelection] = useState({\n    nodes: [],\n    edges: []\n  });\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n\n  // Twilio templates\n  const [templates, setTemplates] = useState([]);\n  const [templatesLoading, setTemplatesLoading] = useState(false);\n  const [templatesError, setTemplatesError] = useState(null);\n\n  // Teste de API\n  const [apiTest, setApiTest] = useState({\n    loading: false,\n    status: null,\n    ok: null,\n    text: '',\n    json: null,\n    suggestions: []\n  });\n  useEffect(() => {\n    let live = true;\n    setTemplatesLoading(true);\n    fetch('/api/templates/list').then(r => r.json()).then(data => {\n      if (!live) return;\n      const list = ((data === null || data === void 0 ? void 0 : data.contents) || []).map(t => {\n        const firstType = t !== null && t !== void 0 && t.types ? Object.values(t.types)[0] : null;\n        return {\n          sid: t === null || t === void 0 ? void 0 : t.sid,\n          friendlyName: (t === null || t === void 0 ? void 0 : t.friendly_name) || (t === null || t === void 0 ? void 0 : t.friendlyName) || (t === null || t === void 0 ? void 0 : t.sid),\n          body: (firstType === null || firstType === void 0 ? void 0 : firstType.body) || '',\n          type: (firstType === null || firstType === void 0 ? void 0 : firstType.type) || ''\n        };\n      });\n      setTemplates(list);\n      setTemplatesError(null);\n    }).catch(e => setTemplatesError((e === null || e === void 0 ? void 0 : e.message) || 'Erro ao buscar templates')).finally(() => setTemplatesLoading(false));\n    return () => {\n      live = false;\n    };\n  }, []);\n  useEffect(() => {\n    const f = ensureStartEnd(flows.find(x => x.id === flowId));\n    setNodes(sanitizeNodes((f === null || f === void 0 ? void 0 : f.nodes) || []));\n    setEdges(sanitizeEdges((f === null || f === void 0 ? void 0 : f.edges) || []));\n    setSelectedNodeId(null);\n    setApiTest({\n      loading: false,\n      status: null,\n      ok: null,\n      text: '',\n      json: null,\n      suggestions: []\n    });\n    if (flowId) localStorage.setItem(CURRENT_KEY, flowId);\n  }, [flowId, flows]);\n  const onNodesChange = useCallback(changes => setNodes(nds => sanitizeNodes(applyNodeChanges(changes, nds))), []);\n  const onEdgesChange = useCallback(changes => setEdges(eds => sanitizeEdges(applyEdgeChanges(changes, eds))), []);\n\n  // 1 saída por nó\n  const onConnect = useCallback(connection => {\n    setEdges(eds => {\n      const filtered = eds.filter(e => e.source !== connection.source);\n      return sanitizeEdges(addEdge({\n        ...connection,\n        id: `e_${Date.now()}`\n      }, filtered));\n    });\n  }, []);\n  const onSelectionChange = useCallback(({\n    nodes: ns,\n    edges: es\n  }) => {\n    setSelection({\n      nodes: ns || [],\n      edges: es || []\n    });\n  }, []);\n  const onNodeClick = useCallback((_, node) => setSelectedNodeId((node === null || node === void 0 ? void 0 : node.id) || null), []);\n  const selectedNode = useMemo(() => nodes.find(n => n.id === selectedNodeId), [nodes, selectedNodeId]);\n\n  // Delete com teclado\n  useEffect(() => {\n    const h = e => {\n      if ((e.key === 'Delete' || e.key === 'Backspace') && !/input|textarea|select/i.test(e.target.tagName)) {\n        e.preventDefault();\n        handleDeleteSelected();\n      }\n    };\n    document.addEventListener('keydown', h);\n    return () => document.removeEventListener('keydown', h);\n  }, [selection]);\n  const handleDeleteSelected = () => {\n    const nodeIds = new Set(selection.nodes.map(n => n.id));\n    const edgeIds = new Set(selection.edges.map(e => e.id));\n    setNodes(nds => nds.filter(n => !nodeIds.has(n.id)));\n    setEdges(eds => eds.filter(e => !edgeIds.has(e.id) && !nodeIds.has(e.source) && !nodeIds.has(e.target)));\n    if (selectedNodeId && nodeIds.has(selectedNodeId)) setSelectedNodeId(null);\n  };\n  const saveCurrentFlow = () => {\n    if (!currentFlow) return;\n    const updated = flows.map(f => f.id === currentFlow.id ? {\n      ...f,\n      nodes: sanitizeNodes(nodes),\n      edges: sanitizeEdges(edges)\n    } : f);\n    setFlows(saveFlows(updated));\n  };\n  const newFlow = () => {\n    const id = `flow_${Date.now()}`;\n    const f = ensureStartEnd({\n      id,\n      name: 'Novo Flow',\n      nodes: [],\n      edges: []\n    });\n    const updated = [...flows, f];\n    setFlows(saveFlows(updated));\n    setFlowId(id);\n  };\n  const duplicateFlow = () => {\n    if (!currentFlow) return;\n    const id = `copy_${Date.now()}`;\n    const copy = {\n      ...currentFlow,\n      id,\n      name: `${currentFlow.name || currentFlow.id} (copy)`,\n      nodes: sanitizeNodes(nodes),\n      edges: sanitizeEdges(edges)\n    };\n    const updated = [...flows, copy];\n    setFlows(saveFlows(updated));\n    setFlowId(id);\n  };\n  const addNode = type => {\n    const id = `n_${Date.now()}`;\n    const baseX = 200 + nodes.length % 4 * 240;\n    const baseY = 160 + Math.floor(nodes.length / 4) * 160;\n    let data = {\n      label: ''\n    };\n    if (type === 'message') data = {\n      label: 'Message',\n      templateSid: '',\n      templateName: '',\n      templateBody: '',\n      templateType: ''\n    };\n    if (type === 'api') data = {\n      label: 'API Call',\n      method: 'GET',\n      url: '',\n      headers: '{}',\n      body: '',\n      mappings: [{\n        path: 'data.id',\n        var: 'userId'\n      }]\n    };\n    if (type === 'code') data = {\n      label: 'Code (JS)',\n      code: `// recebe objeto \"vars\" com variáveis anteriores\n// retorne um objeto com novas variáveis\nconst fullName = (vars.firstName || '') + ' ' + (vars.lastName || '');\nreturn { fullName };`\n    };\n    setNodes(nds => sanitizeNodes([...nds, {\n      id,\n      type,\n      position: {\n        x: baseX,\n        y: baseY\n      },\n      data\n    }]));\n  };\n  const goToList = () => window.location.href = '/journeys';\n  const updateNodeData = patch => {\n    if (!selectedNode) return;\n    const nid = selectedNode.id;\n    setNodes(nds => sanitizeNodes(nds.map(n => n.id === nid ? {\n      ...n,\n      data: {\n        ...n.data,\n        ...patch\n      }\n    } : n)));\n  };\n  const selectedTemplate = useMemo(() => {\n    var _selectedNode$data;\n    const sid = selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data = selectedNode.data) === null || _selectedNode$data === void 0 ? void 0 : _selectedNode$data.templateSid;\n    return templates.find(t => t.sid === sid);\n  }, [selectedNode, templates]);\n  const isMessage = (selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.type) === 'message';\n  const isApi = (selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.type) === 'api';\n  const isCode = (selectedNode === null || selectedNode === void 0 ? void 0 : selectedNode.type) === 'code';\n\n  // -------- Test API ----------\n  const testApi = async () => {\n    if (!isApi) return;\n    const method = selectedNode.data.method || 'GET';\n    const url = selectedNode.data.url || '';\n    let headers = {};\n    try {\n      headers = JSON.parse(selectedNode.data.headers || '{}') || {};\n    } catch {}\n    const init = {\n      method,\n      headers\n    };\n    if (['POST', 'PUT', 'PATCH', 'DELETE'].includes(method.toUpperCase()) && selectedNode.data.body) {\n      init.body = selectedNode.data.body;\n      if (!headers['Content-Type']) init.headers['Content-Type'] = 'application/json';\n    }\n    setApiTest({\n      loading: true,\n      status: null,\n      ok: null,\n      text: '',\n      json: null,\n      suggestions: []\n    });\n    try {\n      const res = await fetch(url, init);\n      const text = await res.text();\n      let json = null;\n      try {\n        json = JSON.parse(text);\n      } catch {}\n      const suggestions = json ? Object.keys(flattenJSON(json)).slice(0, 12).map(path => ({\n        path,\n        var: path.split('.').slice(-1)[0].replace(/\\W+/g, '')\n      })) : [];\n      setApiTest({\n        loading: false,\n        status: res.status,\n        ok: res.ok,\n        text,\n        json,\n        suggestions\n      });\n    } catch (e) {\n      setApiTest({\n        loading: false,\n        status: null,\n        ok: null,\n        text: String((e === null || e === void 0 ? void 0 : e.message) || e),\n        json: null,\n        suggestions: []\n      });\n    }\n  };\n  if (!flows.length) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Journey Builder (MVP)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#6b7280'\n        },\n        children: [\"Nenhum flow. Clique em \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Novo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 64\n        }, this), \" para come\\xE7ar.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: newFlow,\n        children: \"+ Novo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Journey Builder (MVP)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 8,\n        alignItems: 'center',\n        marginBottom: 12,\n        flexWrap: 'wrap'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontSize: 12,\n            color: '#6b7280'\n          },\n          children: \"Flow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: flowId,\n          onChange: e => setFlowId(e.target.value),\n          style: {\n            marginLeft: 8,\n            padding: 6\n          },\n          children: flows.map(f => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: f.id,\n            children: [f.name || f.id, \" (\", f.id, \")\"]\n          }, f.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: newFlow,\n        children: \"+ Novo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: duplicateFlow,\n        children: \"Duplicar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => addNode('message'),\n        children: \"+ Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => addNode('api'),\n        children: \"+ API\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => addNode('code'),\n        children: \"+ Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveCurrentFlow,\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDeleteSelected,\n        disabled: !selection.nodes.length && !selection.edges.length,\n        children: \"Delete selected\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goToList,\n        style: {\n          marginLeft: 'auto'\n        },\n        children: \"Voltar p/ lista\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: 12,\n        color: '#6b7280',\n        marginBottom: 10\n      },\n      children: [\"Regras: cada n\\xF3 tem no m\\xE1ximo \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"1 sa\\xEDda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 39\n      }, this), \". Arraste das bolinhas para conectar. Selecione e use \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 107\n      }, this), \" para remover.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 420px',\n        gap: 16,\n        minHeight: 560\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #e5e7eb',\n          borderRadius: 8,\n          overflow: 'hidden',\n          background: '#fff'\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n          nodes: nodes,\n          edges: edges,\n          nodeTypes: nodeTypes,\n          onNodesChange: onNodesChange,\n          onEdgesChange: onEdgesChange,\n          onConnect: onConnect,\n          onSelectionChange: onSelectionChange,\n          onNodeClick: onNodeClick,\n          fitView: true,\n          panOnDrag: [2] // só botão direito\n          ,\n          connectionRadius: 28 // mira maior para conectar\n          ,\n          defaultEdgeOptions: {\n            type: 'smoothstep'\n          },\n          children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Background, {\n            gap: 16,\n            size: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #e5e7eb',\n          borderRadius: 8,\n          padding: 12,\n          background: '#fff'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: '4px 0 12px'\n          },\n          children: \"Propriedades do N\\xF3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), !selectedNode ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#6b7280'\n          },\n          children: \"Selecione um n\\xF3.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                fontSize: 12,\n                color: '#6b7280'\n              },\n              children: \"Label\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: (selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data2 = selectedNode.data) === null || _selectedNode$data2 === void 0 ? void 0 : _selectedNode$data2.label) || '',\n              onChange: e => updateNodeData({\n                label: e.target.value\n              }),\n              style: {\n                width: '100%',\n                padding: 8,\n                marginTop: 6\n              },\n              placeholder: \"Ex.: Send Welcome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 15\n          }, this), selectedNode.type === 'message' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Template (Twilio)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: (selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data3 = selectedNode.data) === null || _selectedNode$data3 === void 0 ? void 0 : _selectedNode$data3.templateSid) || '',\n                onChange: e => {\n                  const sid = e.target.value;\n                  const tpl = templates.find(t => t.sid === sid);\n                  updateNodeData({\n                    templateSid: sid || '',\n                    templateName: (tpl === null || tpl === void 0 ? void 0 : tpl.friendlyName) || '',\n                    templateBody: (tpl === null || tpl === void 0 ? void 0 : tpl.body) || '',\n                    templateType: (tpl === null || tpl === void 0 ? void 0 : tpl.type) || ''\n                  });\n                },\n                style: {\n                  width: '100%',\n                  padding: 8,\n                  marginTop: 6\n                },\n                disabled: templatesLoading || !!templatesError,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"\\u2014 selecione \\u2014\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 23\n                }, this), templates.map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: t.sid,\n                  children: t.friendlyName\n                }, t.sid, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 25\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 21\n              }, this), templatesLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6,\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Buscando templates\\u2026\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 42\n              }, this), templatesError && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6,\n                  fontSize: 12,\n                  color: '#ef4444'\n                },\n                children: templatesError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 40\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6,\n                  padding: 10,\n                  border: '1px solid #e5e7eb',\n                  borderRadius: 6,\n                  background: '#f8fafc',\n                  minHeight: 100,\n                  whiteSpace: 'pre-wrap',\n                  fontFamily: 'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Courier New\", monospace',\n                  fontSize: 12\n                },\n                children: (selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data4 = selectedNode.data) === null || _selectedNode$data4 === void 0 ? void 0 : _selectedNode$data4.templateBody) || 'Selecione um template para ver o preview.'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), selectedNode.type === 'api' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: '120px 1fr',\n                gap: 8,\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    fontSize: 12,\n                    color: '#6b7280'\n                  },\n                  children: \"Method\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: (selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data5 = selectedNode.data) === null || _selectedNode$data5 === void 0 ? void 0 : _selectedNode$data5.method) || 'GET',\n                  onChange: e => updateNodeData({\n                    method: e.target.value\n                  }),\n                  style: {\n                    width: '100%',\n                    padding: 8,\n                    marginTop: 6\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"GET\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"POST\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"PUT\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 66\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"PATCH\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 86\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"DELETE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 108\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    fontSize: 12,\n                    color: '#6b7280'\n                  },\n                  children: \"URL\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: (selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data6 = selectedNode.data) === null || _selectedNode$data6 === void 0 ? void 0 : _selectedNode$data6.url) || '',\n                  onChange: e => updateNodeData({\n                    url: e.target.value\n                  }),\n                  style: {\n                    width: '100%',\n                    padding: 8,\n                    marginTop: 6\n                  },\n                  placeholder: \"https://api.meuservico.com/users/1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Headers (JSON)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: (_selectedNode$data$he = selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data7 = selectedNode.data) === null || _selectedNode$data7 === void 0 ? void 0 : _selectedNode$data7.headers) !== null && _selectedNode$data$he !== void 0 ? _selectedNode$data$he : '{}',\n                onChange: e => updateNodeData({\n                  headers: e.target.value\n                }),\n                style: {\n                  width: '100%',\n                  padding: 8,\n                  marginTop: 6,\n                  minHeight: 70,\n                  fontFamily: 'monospace'\n                },\n                placeholder: \"{\\\"Authorization\\\":\\\"Bearer ...\\\"}\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 547,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Body\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: (_selectedNode$data$bo = selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data8 = selectedNode.data) === null || _selectedNode$data8 === void 0 ? void 0 : _selectedNode$data8.body) !== null && _selectedNode$data$bo !== void 0 ? _selectedNode$data$bo : '',\n                onChange: e => updateNodeData({\n                  body: e.target.value\n                }),\n                style: {\n                  width: '100%',\n                  padding: 8,\n                  marginTop: 6,\n                  minHeight: 70,\n                  fontFamily: 'monospace'\n                },\n                placeholder: \"{\\\"name\\\":\\\"Ada\\\"}  (enviado em POST/PUT/PATCH)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8,\n                display: 'flex',\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: testApi,\n                disabled: apiTest.loading,\n                children: \"Testar API\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 21\n              }, this), apiTest.loading && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"executando\\u2026\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 41\n              }, this), apiTest.status !== null && !apiTest.loading && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: 12,\n                  color: apiTest.ok ? '#16a34a' : '#ef4444'\n                },\n                children: [\"status \", apiTest.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 19\n            }, this), apiTest.text && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Resposta (preview)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                readOnly: true,\n                value: apiTest.json ? JSON.stringify(apiTest.json, null, 2) : apiTest.text,\n                style: {\n                  width: '100%',\n                  padding: 8,\n                  marginTop: 6,\n                  minHeight: 120,\n                  fontFamily: 'monospace',\n                  background: '#f8fafc'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 21\n            }, this), !!((_apiTest$suggestions = apiTest.suggestions) !== null && _apiTest$suggestions !== void 0 && _apiTest$suggestions.length) && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Sugest\\xF5es de mapeamento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6,\n                  display: 'grid',\n                  gap: 6\n                },\n                children: apiTest.suggestions.map((sug, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'grid',\n                    gridTemplateColumns: '1fr 1fr auto',\n                    gap: 6\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    value: sug.path,\n                    readOnly: true,\n                    style: {\n                      padding: 8,\n                      fontFamily: 'monospace'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 592,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: sug.var,\n                    readOnly: true,\n                    style: {\n                      padding: 8\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 593,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      var _selectedNode$data9;\n                      const arr = [...((selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data9 = selectedNode.data) === null || _selectedNode$data9 === void 0 ? void 0 : _selectedNode$data9.mappings) || [])];\n                      if (!arr.some(m => m.path === sug.path && m.var === sug.var)) {\n                        arr.push(sug);\n                        updateNodeData({\n                          mappings: arr\n                        });\n                      }\n                    },\n                    children: \"+ adicionar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 594,\n                    columnNumber: 29\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"Mapeamentos JSON \\u2192 Vari\\xE1veis\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 21\n              }, this), ((selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data0 = selectedNode.data) === null || _selectedNode$data0 === void 0 ? void 0 : _selectedNode$data0.mappings) || []).map((m, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'grid',\n                  gridTemplateColumns: '1fr 1fr auto',\n                  gap: 6,\n                  marginTop: 6\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  value: m.path,\n                  onChange: e => {\n                    var _selectedNode$data1;\n                    const arr = [...((selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data1 = selectedNode.data) === null || _selectedNode$data1 === void 0 ? void 0 : _selectedNode$data1.mappings) || [])];\n                    arr[idx] = {\n                      ...arr[idx],\n                      path: e.target.value\n                    };\n                    updateNodeData({\n                      mappings: arr\n                    });\n                  },\n                  placeholder: \"ex.: data.user.id\",\n                  style: {\n                    padding: 8,\n                    fontFamily: 'monospace'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 615,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: m.var,\n                  onChange: e => {\n                    var _selectedNode$data10;\n                    const arr = [...((selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data10 = selectedNode.data) === null || _selectedNode$data10 === void 0 ? void 0 : _selectedNode$data10.mappings) || [])];\n                    arr[idx] = {\n                      ...arr[idx],\n                      var: e.target.value\n                    };\n                    updateNodeData({\n                      mappings: arr\n                    });\n                  },\n                  placeholder: \"ex.: userId\",\n                  style: {\n                    padding: 8\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    var _selectedNode$data11;\n                    const arr = [...((selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data11 = selectedNode.data) === null || _selectedNode$data11 === void 0 ? void 0 : _selectedNode$data11.mappings) || [])];\n                    arr.splice(idx, 1);\n                    updateNodeData({\n                      mappings: arr\n                    });\n                  },\n                  children: \"\\u2212\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 25\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 23\n              }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  marginTop: 6\n                },\n                onClick: () => {\n                  var _selectedNode$data12;\n                  return updateNodeData({\n                    mappings: [...((selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data12 = selectedNode.data) === null || _selectedNode$data12 === void 0 ? void 0 : _selectedNode$data12.mappings) || []), {\n                      path: '',\n                      var: ''\n                    }]\n                  });\n                },\n                children: \"+ adicionar mapeamento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280',\n                  marginTop: 6\n                },\n                children: [\"Paths do tipo \", /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: \"data.user.id\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 37\n                }, this), \". O executor gravar\\xE1 o valor em \", /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: \"vars.userId\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 94\n                }, this), \".\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), selectedNode.type === 'code' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: \"C\\xF3digo JavaScript\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 663,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: (selectedNode === null || selectedNode === void 0 ? void 0 : (_selectedNode$data13 = selectedNode.data) === null || _selectedNode$data13 === void 0 ? void 0 : _selectedNode$data13.code) || '',\n                onChange: e => updateNodeData({\n                  code: e.target.value\n                }),\n                style: {\n                  width: '100%',\n                  padding: 8,\n                  marginTop: 6,\n                  minHeight: 160,\n                  fontFamily: 'monospace'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280',\n                  marginTop: 6,\n                  lineHeight: 1.4\n                },\n                children: [\"O executor chamar\\xE1 seu c\\xF3digo como \", /*#__PURE__*/_jsxDEV(\"code\", {\n                  children: \"(vars) => { ... }\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 58\n                }, this), \". Retorne um objeto com novas vari\\xE1veis.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 19\n            }, this)\n          }, void 0, false)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 403,\n    columnNumber: 5\n  }, this);\n}\n_s(JourneyBuilder, \"g5qt9IJovtded0KcnT3URpqDgGM=\");\n_c6 = JourneyBuilder;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"StartNode\");\n$RefreshReg$(_c2, \"EndNode\");\n$RefreshReg$(_c3, \"MessageNode\");\n$RefreshReg$(_c4, \"ApiNode\");\n$RefreshReg$(_c5, \"CodeNode\");\n$RefreshReg$(_c6, \"JourneyBuilder\");","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","ReactFlow","addEdge","applyEdgeChanges","applyNodeChanges","Background","Controls","MiniMap","Position","Handle","jsxDEV","_jsxDEV","Fragment","_Fragment","STORAGE_KEY","CURRENT_KEY","sanitizeNodes","list","filter","Boolean","map","n","i","_n$position","_n$position2","_n$id","x","Number","position","y","id","String","type","data","label","isFinite","Math","floor","draggable","selectable","sanitizeEdges","e","_e$id","source","target","animated","loadFlows","raw","localStorage","getItem","arr","JSON","parse","Array","isArray","f","nodes","edges","saveFlows","flows","safe","setItem","stringify","ensureStartEnd","flow","hasStart","some","hasEnd","extra","push","Date","now","length","flattenJSON","value","path","out","set","p","v","forEach","Object","assign","k","entries","HANDLE_COMMON","width","height","borderRadius","border","boxShadow","cursor","HANDLE_SRC","background","HANDLE_TGT","HANDLE_START","HANDLE_END","card","padding","minWidth","textAlign","StartNode","style","children","fontWeight","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","color","Right","_c","EndNode","Left","_c2","MessageNode","marginBottom","templateName","_c3","ApiNode","method","url","URL","hostname","_c4","CodeNode","_c5","nodeTypes","start","end","message","api","code","JourneyBuilder","_s","_selectedNode$data2","_selectedNode$data3","_selectedNode$data4","_selectedNode$data5","_selectedNode$data6","_selectedNode$data$he","_selectedNode$data7","_selectedNode$data$bo","_selectedNode$data8","_apiTest$suggestions","_selectedNode$data0","_selectedNode$data13","setFlows","flowId","setFlowId","_list$","curr","currentFlow","find","setNodes","setEdges","selection","setSelection","selectedNodeId","setSelectedNodeId","templates","setTemplates","templatesLoading","setTemplatesLoading","templatesError","setTemplatesError","apiTest","setApiTest","loading","status","ok","text","json","suggestions","live","fetch","then","r","contents","t","firstType","types","values","sid","friendlyName","friendly_name","body","catch","finally","onNodesChange","changes","nds","onEdgesChange","eds","onConnect","connection","filtered","onSelectionChange","ns","es","onNodeClick","_","node","selectedNode","h","key","test","tagName","preventDefault","handleDeleteSelected","document","addEventListener","removeEventListener","nodeIds","Set","edgeIds","has","saveCurrentFlow","updated","newFlow","name","duplicateFlow","copy","addNode","baseX","baseY","templateSid","templateBody","templateType","headers","mappings","var","goToList","window","location","href","updateNodeData","patch","nid","selectedTemplate","_selectedNode$data","isMessage","isApi","isCode","testApi","init","includes","toUpperCase","res","keys","slice","split","replace","onClick","display","gap","alignItems","flexWrap","onChange","marginLeft","disabled","gridTemplateColumns","minHeight","overflow","fitView","panOnDrag","connectionRadius","defaultEdgeOptions","size","margin","marginTop","placeholder","tpl","whiteSpace","fontFamily","readOnly","sug","_selectedNode$data9","m","idx","_selectedNode$data1","_selectedNode$data10","_selectedNode$data11","splice","_selectedNode$data12","lineHeight","_c6","$RefreshReg$"],"sources":["/Users/gustsantos/Desktop/initucastt/frontend/src/pages/JourneyBuilder.jsx"],"sourcesContent":["// frontend/src/pages/JourneyBuilder.jsx\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport ReactFlow, {\n  addEdge,\n  applyEdgeChanges,\n  applyNodeChanges,\n  Background,\n  Controls,\n  MiniMap,\n  Position,\n  Handle,\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\n\nconst STORAGE_KEY = 'flows_v2';\nconst CURRENT_KEY = 'flows_current_v2';\n\n/* ------------------ Persistência e utils ------------------ */\nconst sanitizeNodes = (list) =>\n  (list || []).filter(Boolean).map((n, i) => {\n    const x = Number(n?.position?.x);\n    const y = Number(n?.position?.y);\n    return {\n      id: String(n?.id ?? `n_${i}`),\n      type: n?.type || 'message',\n      data: n?.data || { label: 'Step' },\n      position:\n        Number.isFinite(x) && Number.isFinite(y)\n          ? { x, y }\n          : { x: 140 + (i % 4) * 220, y: 140 + Math.floor(i / 4) * 160 },\n      draggable: true,\n      selectable: true,\n    };\n  });\n\nconst sanitizeEdges = (list) =>\n  (list || []).filter(Boolean).map((e, i) => ({\n    id: String(e?.id ?? `e_${i}`),\n    source: String(e?.source),\n    target: String(e?.target),\n    animated: !!e?.animated,\n    label: e?.label,\n    selectable: true,\n  }));\n\nfunction loadFlows() {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    const arr = raw ? JSON.parse(raw) : [];\n    if (!Array.isArray(arr)) return [];\n    return arr.map((f) => ({\n      ...f,\n      nodes: sanitizeNodes(f.nodes),\n      edges: sanitizeEdges(f.edges),\n    }));\n  } catch {\n    return [];\n  }\n}\n\nfunction saveFlows(flows) {\n  const safe = (flows || []).map((f) => ({\n    ...f,\n    nodes: sanitizeNodes(f.nodes),\n    edges: sanitizeEdges(f.edges),\n  }));\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(safe));\n  return safe;\n}\n\nconst ensureStartEnd = (flow) => {\n  if (!flow) return flow;\n  const hasStart = (flow.nodes || []).some((n) => n.type === 'start');\n  const hasEnd = (flow.nodes || []).some((n) => n.type === 'end');\n  const extra = [];\n  if (!hasStart)\n    extra.push({\n      id: `start_${Date.now()}`,\n      type: 'start',\n      data: { label: 'Start' },\n      position: { x: 160, y: 100 },\n    });\n  if (!hasEnd)\n    extra.push({\n      id: `end_${Date.now() + 1}`,\n      type: 'end',\n      data: { label: 'End' },\n      position: { x: 700, y: 100 },\n    });\n  return extra.length ? { ...flow, nodes: [...(flow.nodes || []), ...extra] } : flow;\n};\n\n// flatten JSON → { \"a.b[0].c\": value }\nfunction flattenJSON(value, path = '') {\n  const out = {};\n  const set = (p, v) => { if (p) out[p] = v; };\n  if (Array.isArray(value)) {\n    value.forEach((v, i) =>\n      Object.assign(out, flattenJSON(v, path ? `${path}.${i}` : `${i}`)));\n  } else if (value && typeof value === 'object') {\n    for (const [k, v] of Object.entries(value)) {\n      const p = path ? `${path}.${k}` : k;\n      Object.assign(out, flattenJSON(v, p));\n    }\n  } else {\n    set(path, value);\n  }\n  return out;\n}\n\n/* ---------------------- Estilos dos handles ---------------------- */\nconst HANDLE_COMMON = {\n  width: 16,\n  height: 16,\n  borderRadius: '50%',\n  border: '2px solid #fff',\n  boxShadow: '0 0 0 2px rgba(0,0,0,0.07)',\n  cursor: 'crosshair',\n};\nconst HANDLE_SRC = { ...HANDLE_COMMON, background: '#3b82f6' };\nconst HANDLE_TGT = { ...HANDLE_COMMON, background: '#94a3b8' };\nconst HANDLE_START = { ...HANDLE_COMMON, background: '#22c55e' };\nconst HANDLE_END = { ...HANDLE_COMMON, background: '#ef4444' };\n\n/* ---------------------- Node Components ---------------------- */\nconst card = {\n  padding: 12, border: '1px solid #e5e7eb', borderRadius: 10, background: '#fff',\n  minWidth: 220, boxShadow: '0 1px 2px rgba(0,0,0,0.06)', textAlign: 'center'\n};\n\nfunction StartNode() {\n  return (\n    <div style={{ ...card }}>\n      <div style={{ fontWeight: 800, fontSize: 18 }}>Start</div>\n      <div style={{ fontSize: 12, color: '#6b7280' }}>início do fluxo</div>\n      <Handle type=\"source\" position={Position.Right} style={HANDLE_START} />\n    </div>\n  );\n}\nfunction EndNode() {\n  return (\n    <div style={{ ...card }}>\n      <div style={{ fontWeight: 800, fontSize: 18 }}>End</div>\n      <div style={{ fontSize: 12, color: '#6b7280' }}>término do fluxo</div>\n      <Handle type=\"target\" position={Position.Left} style={HANDLE_END} />\n    </div>\n  );\n}\nfunction MessageNode({ data }) {\n  return (\n    <div style={{ ...card, textAlign: 'left' }}>\n      <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 6 }}>\n        {data?.label || 'Message'}\n      </div>\n      <div style={{ fontSize: 12, color: '#6b7280' }}>\n        Template: {data?.templateName || '—'}\n      </div>\n      <Handle type=\"target\" position={Position.Left} style={HANDLE_TGT} />\n      <Handle type=\"source\" position={Position.Right} style={HANDLE_SRC} />\n    </div>\n  );\n}\nfunction ApiNode({ data }) {\n  return (\n    <div style={{ ...card, textAlign: 'left' }}>\n      <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 6 }}>\n        {data?.label || 'API Call'}\n      </div>\n      <div style={{ fontSize: 12, color: '#6b7280' }}>\n        {data?.method || 'GET'} {data?.url ? (()=>{ try{ return new URL(data.url).hostname; }catch{return ''} })() : ''}\n      </div>\n      <Handle type=\"target\" position={Position.Left} style={HANDLE_TGT} />\n      <Handle type=\"source\" position={Position.Right} style={HANDLE_SRC} />\n    </div>\n  );\n}\nfunction CodeNode({ data }) {\n  return (\n    <div style={{ ...card, textAlign: 'left' }}>\n      <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 6 }}>\n        {data?.label || 'Code (JS)'}\n      </div>\n      <div style={{ fontSize: 12, color: '#6b7280' }}>\n        retorna variáveis de <code>return {'{ ... }'}</code>\n      </div>\n      <Handle type=\"target\" position={Position.Left} style={HANDLE_TGT} />\n      <Handle type=\"source\" position={Position.Right} style={HANDLE_SRC} />\n    </div>\n  );\n}\nconst nodeTypes = { start: StartNode, end: EndNode, message: MessageNode, api: ApiNode, code: CodeNode };\n\n/* ---------------------- Página ---------------------- */\nexport default function JourneyBuilder() {\n  const [flows, setFlows] = useState(() => loadFlows());\n  const [flowId, setFlowId] = useState(() => {\n    const curr = localStorage.getItem(CURRENT_KEY);\n    const list = loadFlows();\n    return curr && list.some((f) => f.id === curr) ? curr : (list[0]?.id || '');\n  });\n  const currentFlow = useMemo(\n    () => ensureStartEnd(flows.find((f) => f.id === flowId)),\n    [flows, flowId]\n  );\n\n  const [nodes, setNodes] = useState(() => sanitizeNodes(currentFlow?.nodes || []));\n  const [edges, setEdges] = useState(() => sanitizeEdges(currentFlow?.edges || []));\n  const [selection, setSelection] = useState({ nodes: [], edges: [] });\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n\n  // Twilio templates\n  const [templates, setTemplates] = useState([]);\n  const [templatesLoading, setTemplatesLoading] = useState(false);\n  const [templatesError, setTemplatesError] = useState(null);\n\n  // Teste de API\n  const [apiTest, setApiTest] = useState({ loading: false, status: null, ok: null, text: '', json: null, suggestions: [] });\n\n  useEffect(() => {\n    let live = true;\n    setTemplatesLoading(true);\n    fetch('/api/templates/list')\n      .then((r) => r.json())\n      .then((data) => {\n        if (!live) return;\n        const list = (data?.contents || []).map((t) => {\n          const firstType = t?.types ? Object.values(t.types)[0] : null;\n          return {\n            sid: t?.sid,\n            friendlyName: t?.friendly_name || t?.friendlyName || t?.sid,\n            body: firstType?.body || '',\n            type: firstType?.type || '',\n          };\n        });\n        setTemplates(list);\n        setTemplatesError(null);\n      })\n      .catch((e) => setTemplatesError(e?.message || 'Erro ao buscar templates'))\n      .finally(() => setTemplatesLoading(false));\n    return () => { live = false; };\n  }, []);\n\n  useEffect(() => {\n    const f = ensureStartEnd(flows.find((x) => x.id === flowId));\n    setNodes(sanitizeNodes(f?.nodes || []));\n    setEdges(sanitizeEdges(f?.edges || []));\n    setSelectedNodeId(null);\n    setApiTest({ loading: false, status: null, ok: null, text: '', json: null, suggestions: [] });\n    if (flowId) localStorage.setItem(CURRENT_KEY, flowId);\n  }, [flowId, flows]);\n\n  const onNodesChange = useCallback(\n    (changes) => setNodes((nds) => sanitizeNodes(applyNodeChanges(changes, nds))),\n    []\n  );\n  const onEdgesChange = useCallback(\n    (changes) => setEdges((eds) => sanitizeEdges(applyEdgeChanges(changes, eds))),\n    []\n  );\n\n  // 1 saída por nó\n  const onConnect = useCallback((connection) => {\n    setEdges((eds) => {\n      const filtered = eds.filter((e) => e.source !== connection.source);\n      return sanitizeEdges(addEdge({ ...connection, id: `e_${Date.now()}` }, filtered));\n    });\n  }, []);\n\n  const onSelectionChange = useCallback(({ nodes: ns, edges: es }) => {\n    setSelection({ nodes: ns || [], edges: es || [] });\n  }, []);\n  const onNodeClick = useCallback((_, node) => setSelectedNodeId(node?.id || null), []);\n  const selectedNode = useMemo(() => nodes.find((n) => n.id === selectedNodeId), [nodes, selectedNodeId]);\n\n  // Delete com teclado\n  useEffect(() => {\n    const h = (e) => {\n      if ((e.key === 'Delete' || e.key === 'Backspace') && !/input|textarea|select/i.test(e.target.tagName)) {\n        e.preventDefault();\n        handleDeleteSelected();\n      }\n    };\n    document.addEventListener('keydown', h);\n    return () => document.removeEventListener('keydown', h);\n  }, [selection]);\n\n  const handleDeleteSelected = () => {\n    const nodeIds = new Set(selection.nodes.map((n) => n.id));\n    const edgeIds = new Set(selection.edges.map((e) => e.id));\n    setNodes((nds) => nds.filter((n) => !nodeIds.has(n.id)));\n    setEdges((eds) => eds.filter((e) =>\n      !edgeIds.has(e.id) && !nodeIds.has(e.source) && !nodeIds.has(e.target)\n    ));\n    if (selectedNodeId && nodeIds.has(selectedNodeId)) setSelectedNodeId(null);\n  };\n\n  const saveCurrentFlow = () => {\n    if (!currentFlow) return;\n    const updated = flows.map((f) =>\n      f.id === currentFlow.id ? { ...f, nodes: sanitizeNodes(nodes), edges: sanitizeEdges(edges) } : f\n    );\n    setFlows(saveFlows(updated));\n  };\n  const newFlow = () => {\n    const id = `flow_${Date.now()}`;\n    const f = ensureStartEnd({ id, name: 'Novo Flow', nodes: [], edges: [] });\n    const updated = [...flows, f];\n    setFlows(saveFlows(updated));\n    setFlowId(id);\n  };\n  const duplicateFlow = () => {\n    if (!currentFlow) return;\n    const id = `copy_${Date.now()}`;\n    const copy = {\n      ...currentFlow,\n      id,\n      name: `${currentFlow.name || currentFlow.id} (copy)`,\n      nodes: sanitizeNodes(nodes),\n      edges: sanitizeEdges(edges),\n    };\n    const updated = [...flows, copy];\n    setFlows(saveFlows(updated));\n    setFlowId(id);\n  };\n\n  const addNode = (type) => {\n    const id = `n_${Date.now()}`;\n    const baseX = 200 + (nodes.length % 4) * 240;\n    const baseY = 160 + Math.floor(nodes.length / 4) * 160;\n\n    let data = { label: '' };\n    if (type === 'message') data = { label: 'Message', templateSid: '', templateName: '', templateBody: '', templateType: '' };\n    if (type === 'api') data = { label: 'API Call', method: 'GET', url: '', headers: '{}', body: '', mappings: [{ path: 'data.id', var: 'userId' }] };\n    if (type === 'code') data = {\n      label: 'Code (JS)',\n      code:\n`// recebe objeto \"vars\" com variáveis anteriores\n// retorne um objeto com novas variáveis\nconst fullName = (vars.firstName || '') + ' ' + (vars.lastName || '');\nreturn { fullName };`\n    };\n\n    setNodes((nds) => sanitizeNodes([...nds, { id, type, position: { x: baseX, y: baseY }, data }]));\n  };\n\n  const goToList = () => (window.location.href = '/journeys');\n  const updateNodeData = (patch) => {\n    if (!selectedNode) return;\n    const nid = selectedNode.id;\n    setNodes((nds) =>\n      sanitizeNodes(nds.map((n) => (n.id === nid ? { ...n, data: { ...n.data, ...patch } } : n)))\n    );\n  };\n\n  const selectedTemplate = useMemo(() => {\n    const sid = selectedNode?.data?.templateSid;\n    return templates.find((t) => t.sid === sid);\n  }, [selectedNode, templates]);\n\n  const isMessage = selectedNode?.type === 'message';\n  const isApi = selectedNode?.type === 'api';\n  const isCode = selectedNode?.type === 'code';\n\n  // -------- Test API ----------\n  const testApi = async () => {\n    if (!isApi) return;\n    const method = selectedNode.data.method || 'GET';\n    const url = selectedNode.data.url || '';\n    let headers = {};\n    try { headers = JSON.parse(selectedNode.data.headers || '{}') || {}; } catch {}\n    const init = { method, headers };\n    if (['POST', 'PUT', 'PATCH', 'DELETE'].includes(method.toUpperCase()) && selectedNode.data.body) {\n      init.body = selectedNode.data.body;\n      if (!headers['Content-Type']) init.headers['Content-Type'] = 'application/json';\n    }\n\n    setApiTest({ loading: true, status: null, ok: null, text: '', json: null, suggestions: [] });\n    try {\n      const res = await fetch(url, init);\n      const text = await res.text();\n      let json = null;\n      try { json = JSON.parse(text); } catch {}\n      const suggestions = json ? Object.keys(flattenJSON(json))\n        .slice(0, 12)\n        .map((path) => ({ path, var: path.split('.').slice(-1)[0].replace(/\\W+/g, '') })) : [];\n      setApiTest({ loading: false, status: res.status, ok: res.ok, text, json, suggestions });\n    } catch (e) {\n      setApiTest({ loading: false, status: null, ok: null, text: String(e?.message || e), json: null, suggestions: [] });\n    }\n  };\n\n  if (!flows.length) {\n    return (\n      <div>\n        <h2>Journey Builder (MVP)</h2>\n        <p style={{ color: '#6b7280' }}>Nenhum flow. Clique em <b>Novo</b> para começar.</p>\n        <button onClick={newFlow}>+ Novo</button>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <h2>Journey Builder (MVP)</h2>\n\n      {/* Toolbar */}\n      <div style={{ display: 'flex', gap: 8, alignItems: 'center', marginBottom: 12, flexWrap: 'wrap' }}>\n        <div>\n          <label style={{ fontSize: 12, color: '#6b7280' }}>Flow</label>\n          <select value={flowId} onChange={(e) => setFlowId(e.target.value)} style={{ marginLeft: 8, padding: 6 }}>\n            {flows.map((f) => (\n              <option key={f.id} value={f.id}>\n                {f.name || f.id} ({f.id})\n              </option>\n            ))}\n          </select>\n        </div>\n        <button onClick={newFlow}>+ Novo</button>\n        <button onClick={duplicateFlow}>Duplicar</button>\n        <button onClick={() => addNode('message')}>+ Message</button>\n        <button onClick={() => addNode('api')}>+ API</button>\n        <button onClick={() => addNode('code')}>+ Code</button>\n        <button onClick={saveCurrentFlow}>Salvar</button>\n        <button onClick={handleDeleteSelected} disabled={!selection.nodes.length && !selection.edges.length}>\n          Delete selected\n        </button>\n        <button onClick={goToList} style={{ marginLeft: 'auto' }}>Voltar p/ lista</button>\n      </div>\n\n      <div style={{ fontSize: 12, color: '#6b7280', marginBottom: 10 }}>\n        Regras: cada nó tem no máximo <b>1 saída</b>. Arraste das bolinhas para conectar. Selecione e use <b>Delete</b> para remover.\n      </div>\n\n      {/* Layout */}\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 420px', gap: 16, minHeight: 560 }}>\n        {/* Canvas */}\n        <div style={{ border: '1px solid #e5e7eb', borderRadius: 8, overflow: 'hidden', background: '#fff' }}>\n          <ReactFlow\n            nodes={nodes}\n            edges={edges}\n            nodeTypes={nodeTypes}\n            onNodesChange={onNodesChange}\n            onEdgesChange={onEdgesChange}\n            onConnect={onConnect}\n            onSelectionChange={onSelectionChange}\n            onNodeClick={onNodeClick}\n            fitView\n            panOnDrag={[2]}            // só botão direito\n            connectionRadius={28}      // mira maior para conectar\n            defaultEdgeOptions={{ type: 'smoothstep' }}\n          >\n            <MiniMap />\n            <Controls />\n            <Background gap={16} size={1} />\n          </ReactFlow>\n        </div>\n\n        {/* Painel lateral */}\n        <div style={{ border: '1px solid #e5e7eb', borderRadius: 8, padding: 12, background: '#fff' }}>\n          <h4 style={{ margin: '4px 0 12px' }}>Propriedades do Nó</h4>\n\n          {!selectedNode ? (\n            <div style={{ color: '#6b7280' }}>Selecione um nó.</div>\n          ) : (\n            <>\n              {/* Label comum */}\n              <div style={{ marginBottom: 12 }}>\n                <label style={{ fontSize: 12, color: '#6b7280' }}>Label</label>\n                <input\n                  value={selectedNode?.data?.label || ''}\n                  onChange={(e) => updateNodeData({ label: e.target.value })}\n                  style={{ width: '100%', padding: 8, marginTop: 6 }}\n                  placeholder=\"Ex.: Send Welcome\"\n                />\n              </div>\n\n              {/* Message (Twilio) */}\n              {selectedNode.type === 'message' && (\n                <>\n                  <div style={{ marginBottom: 12 }}>\n                    <label style={{ fontSize: 12, color: '#6b7280' }}>Template (Twilio)</label>\n                    <select\n                      value={selectedNode?.data?.templateSid || ''}\n                      onChange={(e) => {\n                        const sid = e.target.value;\n                        const tpl = templates.find((t) => t.sid === sid);\n                        updateNodeData({\n                          templateSid: sid || '',\n                          templateName: tpl?.friendlyName || '',\n                          templateBody: tpl?.body || '',\n                          templateType: tpl?.type || '',\n                        });\n                      }}\n                      style={{ width: '100%', padding: 8, marginTop: 6 }}\n                      disabled={templatesLoading || !!templatesError}\n                    >\n                      <option value=\"\">— selecione —</option>\n                      {templates.map((t) => (\n                        <option key={t.sid} value={t.sid}>{t.friendlyName}</option>\n                      ))}\n                    </select>\n                    {templatesLoading && <div style={{ marginTop: 6, fontSize: 12, color: '#6b7280' }}>Buscando templates…</div>}\n                    {templatesError && <div style={{ marginTop: 6, fontSize: 12, color: '#ef4444' }}>{templatesError}</div>}\n                  </div>\n\n                  <div>\n                    <label style={{ fontSize: 12, color: '#6b7280' }}>Preview</label>\n                    <div\n                      style={{\n                        marginTop: 6, padding: 10, border: '1px solid #e5e7eb', borderRadius: 6,\n                        background: '#f8fafc', minHeight: 100, whiteSpace: 'pre-wrap', fontFamily: 'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Courier New\", monospace', fontSize: 12\n                      }}\n                    >\n                      {selectedNode?.data?.templateBody || 'Selecione um template para ver o preview.'}\n                    </div>\n                  </div>\n                </>\n              )}\n\n              {/* API */}\n              {selectedNode.type === 'api' && (\n                <>\n                  <div style={{ display: 'grid', gridTemplateColumns: '120px 1fr', gap: 8, marginBottom: 8 }}>\n                    <div>\n                      <label style={{ fontSize: 12, color: '#6b7280' }}>Method</label>\n                      <select\n                        value={selectedNode?.data?.method || 'GET'}\n                        onChange={(e) => updateNodeData({ method: e.target.value })}\n                        style={{ width: '100%', padding: 8, marginTop: 6 }}\n                      >\n                        <option>GET</option><option>POST</option><option>PUT</option><option>PATCH</option><option>DELETE</option>\n                      </select>\n                    </div>\n                    <div>\n                      <label style={{ fontSize: 12, color: '#6b7280' }}>URL</label>\n                      <input\n                        value={selectedNode?.data?.url || ''}\n                        onChange={(e) => updateNodeData({ url: e.target.value })}\n                        style={{ width: '100%', padding: 8, marginTop: 6 }}\n                        placeholder=\"https://api.meuservico.com/users/1\"\n                      />\n                    </div>\n                  </div>\n\n                  <div style={{ marginBottom: 8 }}>\n                    <label style={{ fontSize: 12, color: '#6b7280' }}>Headers (JSON)</label>\n                    <textarea\n                      value={selectedNode?.data?.headers ?? '{}'}\n                      onChange={(e) => updateNodeData({ headers: e.target.value })}\n                      style={{ width: '100%', padding: 8, marginTop: 6, minHeight: 70, fontFamily: 'monospace' }}\n                      placeholder='{\"Authorization\":\"Bearer ...\"}'\n                    />\n                  </div>\n\n                  <div style={{ marginBottom: 8 }}>\n                    <label style={{ fontSize: 12, color: '#6b7280' }}>Body</label>\n                    <textarea\n                      value={selectedNode?.data?.body ?? ''}\n                      onChange={(e) => updateNodeData({ body: e.target.value })}\n                      style={{ width: '100%', padding: 8, marginTop: 6, minHeight: 70, fontFamily: 'monospace' }}\n                      placeholder='{\"name\":\"Ada\"}  (enviado em POST/PUT/PATCH)'\n                    />\n                  </div>\n\n                  <div style={{ marginBottom: 8, display: 'flex', gap: 8 }}>\n                    <button onClick={testApi} disabled={apiTest.loading}>Testar API</button>\n                    {apiTest.loading && <span style={{ fontSize: 12, color: '#6b7280' }}>executando…</span>}\n                    {apiTest.status !== null && !apiTest.loading && (\n                      <span style={{ fontSize: 12, color: apiTest.ok ? '#16a34a' : '#ef4444' }}>\n                        status {apiTest.status}\n                      </span>\n                    )}\n                  </div>\n\n                  {apiTest.text && (\n                    <div style={{ marginBottom: 8 }}>\n                      <label style={{ fontSize: 12, color: '#6b7280' }}>Resposta (preview)</label>\n                      <textarea\n                        readOnly\n                        value={apiTest.json ? JSON.stringify(apiTest.json, null, 2) : apiTest.text}\n                        style={{ width: '100%', padding: 8, marginTop: 6, minHeight: 120, fontFamily: 'monospace', background: '#f8fafc' }}\n                      />\n                    </div>\n                  )}\n\n                  {!!apiTest.suggestions?.length && (\n                    <div style={{ marginBottom: 8 }}>\n                      <label style={{ fontSize: 12, color: '#6b7280' }}>Sugestões de mapeamento</label>\n                      <div style={{ marginTop: 6, display: 'grid', gap: 6 }}>\n                        {apiTest.suggestions.map((sug, i) => (\n                          <div key={i} style={{ display: 'grid', gridTemplateColumns: '1fr 1fr auto', gap: 6 }}>\n                            <input value={sug.path} readOnly style={{ padding: 8, fontFamily: 'monospace' }} />\n                            <input value={sug.var} readOnly style={{ padding: 8 }} />\n                            <button\n                              onClick={() => {\n                                const arr = [...(selectedNode?.data?.mappings || [])];\n                                if (!arr.some(m => m.path === sug.path && m.var === sug.var)) {\n                                  arr.push(sug);\n                                  updateNodeData({ mappings: arr });\n                                }\n                              }}\n                            >\n                              + adicionar\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  <div>\n                    <label style={{ fontSize: 12, color: '#6b7280' }}>Mapeamentos JSON → Variáveis</label>\n                    {(selectedNode?.data?.mappings || []).map((m, idx) => (\n                      <div key={idx} style={{ display: 'grid', gridTemplateColumns: '1fr 1fr auto', gap: 6, marginTop: 6 }}>\n                        <input\n                          value={m.path}\n                          onChange={(e) => {\n                            const arr = [...(selectedNode?.data?.mappings || [])];\n                            arr[idx] = { ...arr[idx], path: e.target.value };\n                            updateNodeData({ mappings: arr });\n                          }}\n                          placeholder=\"ex.: data.user.id\"\n                          style={{ padding: 8, fontFamily: 'monospace' }}\n                        />\n                        <input\n                          value={m.var}\n                          onChange={(e) => {\n                            const arr = [...(selectedNode?.data?.mappings || [])];\n                            arr[idx] = { ...arr[idx], var: e.target.value };\n                            updateNodeData({ mappings: arr });\n                          }}\n                          placeholder=\"ex.: userId\"\n                          style={{ padding: 8 }}\n                        />\n                        <button\n                          onClick={() => {\n                            const arr = [...(selectedNode?.data?.mappings || [])];\n                            arr.splice(idx, 1);\n                            updateNodeData({ mappings: arr });\n                          }}\n                        >\n                          −\n                        </button>\n                      </div>\n                    ))}\n                    <button\n                      style={{ marginTop: 6 }}\n                      onClick={() => updateNodeData({ mappings: [...(selectedNode?.data?.mappings || []), { path: '', var: '' }] })}\n                    >\n                      + adicionar mapeamento\n                    </button>\n                    <div style={{ fontSize: 12, color: '#6b7280', marginTop: 6 }}>\n                      Paths do tipo <code>data.user.id</code>. O executor gravará o valor em <code>vars.userId</code>.\n                    </div>\n                  </div>\n                </>\n              )}\n\n              {/* Code (JS) */}\n              {selectedNode.type === 'code' && (\n                <>\n                  <div>\n                    <label style={{ fontSize: 12, color: '#6b7280' }}>Código JavaScript</label>\n                    <textarea\n                      value={selectedNode?.data?.code || ''}\n                      onChange={(e) => updateNodeData({ code: e.target.value })}\n                      style={{ width: '100%', padding: 8, marginTop: 6, minHeight: 160, fontFamily: 'monospace' }}\n                    />\n                    <div style={{ fontSize: 12, color: '#6b7280', marginTop: 6, lineHeight: 1.4 }}>\n                      O executor chamará seu código como <code>(vars) =&gt; &#123; ... &#125;</code>.\n                      Retorne um objeto com novas variáveis.\n                    </div>\n                  </div>\n                </>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}